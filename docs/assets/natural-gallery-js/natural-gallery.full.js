(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define('NaturalGallery',[],t):'object'==typeof exports?exports.NaturalGallery=t():e.NaturalGallery=t()})(this,function(){var e=Math.min,t=Math.max,o=Math.round,i=Math.ceil,n=Math.floor;return function(e){function t(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,i){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=4)}([function(e,t,o){'use strict';var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var n=o(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.addRows=function(t){this.completeLastRow(),e.prototype.addRows.call(this,t)},t.prototype.endResize=function(){e.prototype.endResize.call(this),this.completeLastRow(),this.flushBufferedItems()},t.prototype.completeLastRow=function(){var e=this;if(this.visibleCollection.length){var t=this.visibleCollection[this.visibleCollection.length-1].row,o=this.visibleCollection.filter(function(e){return e.row===t}).length,n=this.collection.slice(this.visibleCollection.length-o);this.organizeItems(n,n[0].row,n[0].row);var i=n.slice(o).filter(function(e){return e.row<=n[0].row});i.forEach(function(t){return e.addItemToDOM(t)})}},t}(n.AbstractRowGallery);t.AbstractResponsiveRowGallery=l},function(e,t,o){'use strict';var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var n=o(2),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onScroll=function(){this.addRows(1)},t.prototype.onPageAdd=function(){this.addRows(this.getRowsPerPage())},t.prototype.addRows=function(e){var t=this,o=this.visibleCollection.length,i=this.visibleCollection.length?this.visibleCollection[o-1].row+1:0,n=i+e-1,l=this.collection.slice(o);this.organizeItems(l,i,n);var a=l.filter(function(e){return e.row<=n});a.forEach(function(e){return t.addItemToDOM(e)}),this.flushBufferedItems(),this.updateNextButtonVisibility()},t.prototype.endResize=function(){e.prototype.endResize.call(this),this.visibleCollection.length&&this.organizeItems(this.visibleCollection)},t}(n.AbstractGallery);t.AbstractRowGallery=l},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var i=o(8),l=o(3),a=o(9),s=o(10),r=o(11),d=function(){function e(e,t,o,i){void 0===i&&(i=null),this.elementRef=e,this.userOptions=t,this.photoswipeElementRef=o,this.scrollElementRef=i,this.defaultOptions={gap:3,rowsPerPage:0,showLabels:'hover',lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:null},this.photoswipeDefaultOptions={bgOpacity:0.85,showHideOpacity:!1},this.old_scroll_top=0,this._collection=[],this._visibleCollection=[],this.photoswipeCollection=[],this.scrollBufferedItems=[],this.requiredItems=0,this.init()}return e.prototype.init=function(){var e=this;this.elementRef.classList.add('natural-gallery-js'),this.flushBufferedItems=r.debounce(function(){e.scrollBufferedItems.forEach(function(e){e.loadImage()}),e.scrollBufferedItems=[],e.requiredItems&&(e.dispatchEvent('pagination',{offset:e.collection.length,limit:e.requiredItems}),e.requiredItems=0)},300,{leading:!1,trailing:!0}),this.defaultsOptions(),this.options.lightbox&&!this.photoswipeElementRef&&console.error('Lightbox option is set to true, but no PhotoSwipe reference is given'),this.render(),this.requestItems(),this.options.rowsPerPage||this.bindScroll(null===this.scrollElementRef?document:this.scrollElementRef)},e.prototype.defaultsOptions=function(){for(var e in this.options=this.userOptions,this.defaultOptions)'undefined'==typeof this.options[e]&&(this.options[e]=this.defaultOptions[e])},e.prototype.requestItems=function(){var e=this.getEstimatedItemsPerRow(),t=e*(this.getRowsPerPage()+1);this.dispatchEvent('pagination',{offset:this.collection.length,limit:t})},e.prototype.getRowsPerPage=function(){if(0<this.options.rowsPerPage)return this.options.rowsPerPage;var e=this.getEstimatedRowsPerPage();return e<this.options.minRowsAtStart?this.options.minRowsAtStart:e},e.prototype.addItemToDOM=function(e,t){var o=this;void 0===t&&(t=this.bodyElementRef),this.visibleCollection.push(e),t.appendChild(e.init()),this.scrollBufferedItems.push(e),this.requiredItems++,e.element.addEventListener('select',function(){o.dispatchEvent('select',o.visibleCollection.filter(function(e){return e.selected}).map(function(e){return e.model}))}),e.element.addEventListener('activate',function(e){o.dispatchEvent('activate',{model:e.detail.item.model,clickEvent:e.detail.clickEvent})}),e.element.addEventListener('zoom',function(e){o.openPhotoSwipe(e.detail)})},e.prototype.render=function(){var t=this;this.nextButton=document.createElement('div'),this.nextButton.classList.add('natural-gallery-next'),this.nextButton.appendChild(l.Utility.getIcon('natural-gallery-icon-next')),this.nextButton.style.display='none',this.nextButton.addEventListener('click',function(o){o.preventDefault(),t.onPageAdd()}),this.bodyElementRef=document.createElement('div'),this.bodyElementRef.classList.add('natural-gallery-body'),this.extendToFreeViewport();var e=document.createElement('iframe');this.elementRef.appendChild(e);var o=500,i=r.debounce(function(){return t.startResize()},o,{leading:!0,trailing:!1}),n=r.debounce(function(){return t.endResize()},o,{leading:!1,trailing:!0});e.contentWindow.addEventListener('resize',function(){n(),i()}),this.elementRef.appendChild(this.bodyElementRef),this.elementRef.appendChild(this.nextButton)},e.prototype.updateNextButtonVisibility=function(){this.nextButton.style.display=this.visibleCollection.length===this.collection.length?'none':'block'},e.prototype.addItems=function(e){var t=this;if(e.constructor===Array&&e.length){var o=this.collection.length===this.visibleCollection.length;e.forEach(function(e){var o=new i.Item(t.getItemOptions(),e);t._collection.push(o),t.photoswipeCollection.push(t.getPhotoswipeItem(o))}),o&&this.onPageAdd()}},e.prototype.getItemOptions=function(){return{lightbox:this.options.lightbox,selectable:this.options.selectable,activable:this.options.activable,gap:this.options.gap,showLabels:this.options.showLabels}},e.prototype.extendToFreeViewport=function(){return this.options.rowsPerPage?this.options.rowsPerPage:void(this.elementRef.style.minHeight=this.getGalleryVisibleHeight()+10+'px')},e.prototype.getGalleryVisibleHeight=function(){var e=this.scrollElementRef?this.scrollElementRef.clientHeight:document.documentElement.clientHeight;return e-this.elementRef.offsetTop},e.prototype.startResize=function(){this.bodyElementRef.classList.add('resizing')},e.prototype.endResize=function(){this.bodyElementRef.classList.remove('resizing')},e.prototype.bindScroll=function(e){var t=this,o=null;o=e instanceof Document?e.documentElement:e;var i=r.debounce(function(){return t.elementRef.classList.add('scrolling')},300,{leading:!0,trailing:!1}),n=r.debounce(function(){return t.elementRef.classList.remove('scrolling')},300,{leading:!1,trailing:!0});e.addEventListener('scroll',function(){i(),n();var e=t.elementRef.offsetTop+t.elementRef.offsetHeight+t.options.infiniteScrollOffset,l=o.scrollTop-(o.clientTop||0),a=o.clientHeight,s=l-t.old_scroll_top;t.old_scroll_top=l,0<s&&l+a>=e&&t.onScroll()})},e.prototype.openPhotoSwipe=function(e){var t=this;if(this.options.lightbox&&!this.photoswipeElementRef)return void console.error('Lightbox option is set to true, but no PhotoSwipe reference is given');var o={index:this.collection.findIndex(function(t){return t===e}),loop:!1};o=Object.assign({},this.photoswipeDefaultOptions,this.options.photoSwipeOptions,o);var i=new a(this.photoswipeElementRef,s,this.photoswipeCollection,o);i.init(),i.listen('beforeChange',function(e){1===e&&i.getCurrentIndex()===t.visibleCollection.length&&t.onPageAdd()}),this.dispatchEvent('zoom',{item:e.model,photoswipe:i})},e.prototype.getPhotoswipeItem=function(e){return{src:e.model.enlargedSrc,w:e.model.enlargedWidth,h:e.model.enlargedHeight,title:e.title}},e.prototype.dispatchEvent=function(e,t){var o=new CustomEvent(e,{detail:t});this.elementRef.dispatchEvent(o)},e.prototype.selectVisibleItems=function(){this.visibleCollection.forEach(function(e){return e.select()})},e.prototype.unselectAllItems=function(){this.visibleCollection.forEach(function(e){return e.unselect()})},e.prototype.addEventListener=function(e,t){this.elementRef.addEventListener(e,t),'pagination'===e&&this.requestItems()},e.prototype.empty=function(){this.bodyElementRef.innerHTML='',this._visibleCollection=[],this.photoswipeCollection=[],this._collection=[]},e.prototype.clear=function(){this.empty(),this.requestItems()},e.prototype.setItems=function(e){this.empty(),this.addItems(e)},Object.defineProperty(e.prototype,'collection',{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'visibleCollection',{get:function(){return this._visibleCollection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'width',{get:function(){return n(this.bodyElementRef.getBoundingClientRect().width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'collectionLength',{get:function(){return this.collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'visibleCollectionLength',{get:function(){return this.visibleCollection.length},enumerable:!0,configurable:!0}),e}();t.AbstractGallery=d},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o;(function(e){e.getIcon=function(e){var t=document.createElementNS('http://www.w3.org/2000/svg','svg');return t.setAttribute('viewBox','0 0 100 100'),t.innerHTML='<use xlink:href="#'+e+'"></use>',t}})(o=t.Utility||(t.Utility={}))},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),o(5),o(6);var i=o(7);t.Natural=i.Natural;var n=o(12);t.Masonry=n.Masonry;var l=o(14);t.ResponsiveSquare=l.ResponsiveSquare;var a=o(15);t.Square=a.Square},function(){},function(){},function(e,t,l){'use strict';var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var s=l(0),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultOptions={rowHeight:400,gap:3,rowsPerPage:0,showLabels:'hover',lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:null},t}return a(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.elementRef.classList.add('responsive-square-gallery')},t.prototype.getEstimatedItemsPerRow=function(){return i((this.width+this.options.gap)/(this.options.rowHeight+this.options.gap))},t.prototype.getEstimatedRowsPerPage=function(){return i(this.getGalleryVisibleHeight()/(this.options.rowHeight+this.options.gap))+1},t.prototype.organizeItems=function(e,t,o,i){void 0===t&&(t=0),void 0===o&&(o=null),void 0===i&&(i=null),i||(i=t?t:0);for(var n=1;n<=e.length;n++){var l=e.slice(0,n),a=this.getRowWidth(this.options.rowHeight,this.options.gap,l);if(a>=this.width){this.computeSizes(l,this.width,this.options.gap,i);var s=i+1;(null===o||s<=o)&&this.organizeItems(e.slice(n),t,o,s);break}else if(n===e.length){this.computeSizes(l,null,this.options.gap,i,this.options.rowHeight);break}}},t.prototype.computeSizes=function(e,t,l,a,s){void 0===s&&(s=null);for(var r=t?this.getRowHeight(t,l,e):s,d=this.getRowWidth(r,l,e),p=t?this.apportionExcess(e,t,d):0,c=0,m=0;m<e.length;m++){var i=e[m],u=this.getImageRatio(i)*r-p;c+=u-n(u),u=n(u),(1<=c||m===e.length-1&&1===o(c))&&(u++,c--),i.width=u,i.height=n(r),i.row=a,i.last=m===e.length-1,i.style()}},t.prototype.getRowWidth=function(e,t,o){return t*(o.length-1)+this.getRatios(o)*e},t.prototype.getRowHeight=function(e,t,o){return e/this.getRatios(o)+t*(o.length-1)},t.prototype.getRatios=function(e){for(var t=this,o=0,n=0;n<e.length;n++)o+=t.getImageRatio(e[n]);return o},t.prototype.getImageRatio=function(e){return+e.thumbnailWidth/+e.thumbnailHeight},t.prototype.apportionExcess=function(e,t,o){return(o-t)/e.length},t}(s.AbstractResponsiveRowGallery);t.Natural=r},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var i=o(3),n=function(){function e(e,t){this.options=e,this.model=t,this._selected=!1,this.title=this.getTitleDetails(t.title)}return e.prototype.getTitleDetails=function(e){return e.replace(/<(?!\s*br\s*\/?)[^>]+>/gi,'')},e.prototype.init=function(){var t=this,e=null;this.title&&-1<['always','hover'].indexOf(this.options.showLabels)&&(e=!0);var o=document.createElement('div'),n=document.createElement('div'),l=this.getLinkElement(),a=null,s=null;if(this.options.lightbox&&e&&l?(e=l,e.classList.add('button'),a=n,s=l):this.options.lightbox&&e&&!l?(e=document.createElement('div'),this.options.activable?(s=e,e.classList.add('button'),a=n):a=o):this.options.lightbox&&!e?a=o:!this.options.lightbox&&e&&l?(n=this.getLinkElement(),e=l,e.classList.add('button'),s=o):this.options.lightbox||!e||l?!this.options.lightbox&&!e&&l&&(n=l,s=l):(e=document.createElement('div'),this.options.activable&&(s=o,e.classList.add('button'))),a&&(a.classList.add('zoomable'),a.addEventListener('click',function(){var e=new CustomEvent('zoom',{detail:t});t._element.dispatchEvent(e)})),s&&(s.classList.add('activable'),s.addEventListener('click',function(e){var o=new CustomEvent('activate',{detail:{item:t,clickEvent:e}});t._element.dispatchEvent(o)})),n.classList.add('image'),o.classList.add('figure'),o.appendChild(n),this._element=o,this._image=n,e&&(e.textContent=this.title,e.classList.add('title'),'hover'===this.options.showLabels&&e.classList.add('hover'),o.appendChild(e)),this.options.selectable){this._selectBtn=document.createElement('div');var r=i.Utility.getIcon('natural-gallery-icon-select');this._selectBtn.appendChild(r),this._selectBtn.classList.add('selectBtn'),this._selectBtn.addEventListener('click',function(o){o.stopPropagation(),t.toggleSelect();var e=new CustomEvent('select',{detail:t});t._element.dispatchEvent(e)}),this._element.appendChild(this._selectBtn)}return this.style(),o},e.prototype.style=function(){this._element&&(this._element.style.width=this.width+'px',this._element.style.height=this.height+'px',this._element.style.marginBottom=this.options.gap+'px',this._element.style.marginRight=this.last?'0':this.options.gap+'px')},e.prototype.loadImage=function(){var e=this,t=document.createElement('img');t.setAttribute('src',this.model.thumbnailSrc),this._image.style.backgroundImage='url('+this.model.thumbnailSrc+')',t.addEventListener('load',function(){e._element.classList.add('loaded')}),t.addEventListener('error',function(){e._element.classList.add('errored')})},e.prototype.toggleSelect=function(){this._selected?this.unselect():this.select()},e.prototype.select=function(){this._selected=!0,this._element.classList.add('selected')},e.prototype.unselect=function(){this._selected=!1,this._element.classList.remove('selected')},e.prototype.getLinkElement=function(){if(this.model.link){var e=document.createElement('a');return e.setAttribute('href',this.model.link),e.classList.add('link'),this.model.linkTarget&&e.setAttribute('target',this.model.linkTarget),e}return null},e.prototype.remove=function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)},Object.defineProperty(e.prototype,'last',{get:function(){return this._last},set:function(e){this._last=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'row',{get:function(){return this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'height',{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'width',{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'thumbnailWidth',{get:function(){return this.model.thumbnailWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'thumbnailHeight',{get:function(){return this.model.thumbnailHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'selected',{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'element',{get:function(){return this._element},enumerable:!0,configurable:!0}),e}();t.Item=n},function(i,n,l){var a,s;(function(e,t){a=t,s='function'==typeof a?a.call(n,l,n,i):a,!(s!==void 0&&(i.exports=s))})(this,function(){'use strict';return function(n,l,i,a){var r=Math.abs,s=Math.PI,d={features:null,bind:function(e,t,o,n){var l=(n?'remove':'add')+'EventListener';t=t.split(' ');for(var a=0;a<t.length;a++)t[a]&&e[l](t[a],o,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var o=document.createElement(t||'div');return e&&(o.className=e),o},getScrollY:function(){var e=window.pageYOffset;return void 0===e?document.documentElement.scrollTop:e},unbind:function(e,t,o){d.bind(e,t,o,!0)},removeClass:function(e,t){var o=new RegExp('(\\s|^)'+t+'(\\s|$)');e.className=e.className.replace(o,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'')},addClass:function(e,t){d.hasClass(e,t)||(e.className+=(e.className?' ':'')+t)},hasClass:function(e,t){return e.className&&new RegExp('(^|\\s)'+t+'(\\s|$)').test(e.className)},getChildByClass:function(e,t){for(var o=e.firstChild;o;){if(d.hasClass(o,t))return o;o=o.nextSibling}},arraySearch:function(e,t,o){for(var n=e.length;n--;)if(e[n][o]===t)return n;return-1},extend:function(e,t,o){for(var i in t)if(t.hasOwnProperty(i)){if(o&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(s/2))},inOut:function(e){return-(Math.cos(s*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(d.features)return d.features;var e=d.createEl(),o=e.style,n='',l={};if(l.oldIE=document.all&&!document.addEventListener,l.touch='ontouchstart'in window,window.requestAnimationFrame&&(l.raf=window.requestAnimationFrame,l.caf=window.cancelAnimationFrame),l.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!l.pointerEvent){var s=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&0<r.length&&(r=parseInt(r[1],10),1<=r&&8>r&&(l.isOldIOSPhone=!0))}var p=s.match(/Android\s([0-9\.]*)/),c=p?p[1]:0;c=parseFloat(c),1<=c&&(4.4>c&&(l.isOldAndroid=!0),l.androidVersion=c),l.isMobileOpera=/opera mini|opera mobi/i.test(s)}for(var m,u,g=['transform','perspective','animationName'],h=['','webkit','Moz','ms','O'],y=0;4>y;y++){n=h[y];for(var i=0;3>i;i++)m=g[i],u=n+(n?m.charAt(0).toUpperCase()+m.slice(1):m),!l[m]&&u in o&&(l[m]=u);n&&!l.raf&&(n=n.toLowerCase(),l.raf=window[n+'RequestAnimationFrame'],l.raf&&(l.caf=window[n+'CancelAnimationFrame']||window[n+'CancelRequestAnimationFrame']))}if(!l.raf){var a=0;l.raf=function(e){var o=new Date().getTime(),i=t(0,16-(o-a)),n=window.setTimeout(function(){e(o+i)},i);return a=o+i,n},l.caf=function(e){clearTimeout(e)}}return l.svg=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect,d.features=l,l}};d.detectFeatures(),d.features.oldIE&&(d.bind=function(e,t,o,n){t=t.split(' ');for(var l,a=(n?'detach':'attach')+'Event',s=function(){o.handleEvent.call(o)},r=0;r<t.length;r++)if(l=t[r],l)if('object'==typeof o&&o.handleEvent){if(!n)o['oldIE'+l]=s;else if(!o['oldIE'+l])return!1;e[a]('on'+l,o['oldIE'+l])}else e[a]('on'+l,o)});var c=this,m=25,u=3,g={allowPanToNext:!0,spacing:0.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(e){return'A'===e.tagName},getDoubleTapZoom:function(e,t){return e?1:0.7>t.initialZoomLevel?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:'fit'};d.extend(g,a);var h,y,f,w,b,x,v,_,I,E,C,R,P,S,O,L,T,D,k,A,F,z,M,Z,H,B,N,W,U,G,K,q,V,Y,X,j,$,Q,J,ee,te,oe,ie,ne,le,ae,se,re,de,pe,ce,me,ue,ge,he,ye,fe,xe=function(){return{x:0,y:0}},we=xe(),be=xe(),ve=xe(),_e={},Ie=0,Ee={},Ce=xe(),Re=0,Pe=!0,Se=[],Oe={},Le=!1,Te=function(e,t){d.extend(c,t.publicMethods),Se.push(e)},De=function(e){var t=no();if(e>t-1)return e-t;return 0>e?t+e:e},ke={},Ae=function(e,t){return ke[e]||(ke[e]=[]),ke[e].push(t)},Fe=function(e){var t=ke[e];if(t){var o=Array.prototype.slice.call(arguments);o.shift();for(var n=0;n<t.length;n++)t[n].apply(c,o)}},ze=function(){return new Date().getTime()},Me=function(e){he=e,c.bg.style.opacity=e*g.bgOpacity},Ze=function(e,t,o,i,n){(!Le||n&&n!==c.currItem)&&(i/=n?n.fitRatio:c.currItem.fitRatio),e[z]=R+t+'px, '+o+'px'+P+' scale('+i+')'},He=function(e){pe&&(e&&(E>c.currItem.fitRatio?!Le&&(fo(c.currItem,!1,!0),Le=!0):Le&&(fo(c.currItem),Le=!1)),Ze(pe,ve.x,ve.y,E))},Be=function(e){e.container&&Ze(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ne=function(e,t){t[z]=R+e+'px, 0px'+P},We=function(e,t){if(!g.loop&&t){var i=w+(Ce.x*Ie-e)/Ce.x,n=o(e-It.x);(0>i&&0<n||i>=no()-1&&0>n)&&(e=It.x+n*g.mainScrollEndFriction)}It.x=e,Ne(e,b)},Ue=function(e,t){var o=Et[e]-Ee[e];return be[e]+we[e]+o-o*(t/C)},Ge=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ke=function(e){e.x=o(e.x),e.y=o(e.y)},qe=null,Ve=function(){qe&&(d.unbind(document,'mousemove',Ve),d.addClass(n,'pswp--has_mouse'),g.mouseUsed=!0,Fe('mouseUsed')),qe=setTimeout(function(){qe=null},100)},Ye=function(){d.bind(document,'keydown',c),K.transform&&d.bind(c.scrollWrap,'click',c),g.mouseUsed||d.bind(document,'mousemove',Ve),d.bind(window,'resize scroll orientationchange',c),Fe('bindEvents')},Xe=function(){d.unbind(window,'resize scroll orientationchange',c),d.unbind(window,'scroll',I.scroll),d.unbind(document,'keydown',c),d.unbind(document,'mousemove',Ve),K.transform&&d.unbind(c.scrollWrap,'click',c),J&&d.unbind(window,v,c),clearTimeout(q),Fe('unbindEvents')},je=function(e,t){var o=uo(c.currItem,_e,e);return t&&(de=o),o},$e=function(e){return e||(e=c.currItem),e.initialZoomLevel},Qe=function(e){return e||(e=c.currItem),0<e.w?g.maxSpreadZoom:1},Je=function(e,t,o,i){return i===c.currItem.initialZoomLevel?(o[e]=c.currItem.initialPosition[e],!0):(o[e]=Ue(e,i),o[e]>t.min[e])?(o[e]=t.min[e],!0):!!(o[e]<t.max[e])&&(o[e]=t.max[e],!0)},et=function(){if(z){var e=K.perspective&&!Z;return R='translate'+(e?'3d(':'('),void(P=K.perspective?', 0px)':')')}z='left',d.addClass(n,'pswp--ie'),Ne=function(e,t){t.left=e+'px'},Be=function(e){var t=1<e.fitRatio?1:e.fitRatio,o=e.container.style,i=t*e.w,n=t*e.h;o.width=i+'px',o.height=n+'px',o.left=e.initialPosition.x+'px',o.top=e.initialPosition.y+'px'},He=function(){if(pe){var e=pe,t=c.currItem,o=1<t.fitRatio?1:t.fitRatio,i=o*t.w,n=o*t.h;e.width=i+'px',e.height=n+'px',e.left=ve.x+'px',e.top=ve.y+'px'}}},tt=function(t){var e='';g.escKey&&27===t.keyCode?e='close':g.arrowKeys&&(37===t.keyCode?e='prev':39===t.keyCode&&(e='next')),!e||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,c[e]())},ot=function(t){!t||(oe||te||ce||$)&&(t.preventDefault(),t.stopPropagation())},it=function(){c.setScrollOffset(0,d.getScrollY())},nt={},lt=0,at=function(e){nt[e]&&(nt[e].raf&&B(nt[e].raf),lt--,delete nt[e])},st=function(e){nt[e]&&at(e),nt[e]||(lt++,nt[e]={})},rt=function(){for(var e in nt)nt.hasOwnProperty(e)&&at(e)},dt=function(e,o,i,n,l,a,s){var r,t=ze();st(e);var d=function(){if(nt[e]){if(r=ze()-t,r>=n)return at(e),a(i),void(s&&s());a((i-o)*l(r/n)+o),nt[e].raf=H(d)}};d()},pt=30,ct=10,mt={},p={},ut={},gt={},ht={},yt=[],ft={},xt=[],wt={},bt=0,vt=xe(),_t=0,It=xe(),Et=xe(),Ct=xe(),Rt=function(e,t){return e.x===t.x&&e.y===t.y},Pt=function(e,t){return r(e.x-t.x)<m&&r(e.y-t.y)<m},St=function(e,t){return wt.x=r(e.x-t.x),wt.y=r(e.y-t.y),Math.sqrt(wt.x*wt.x+wt.y*wt.y)},Ot=function(){ie&&(B(ie),ie=null)},Lt=function(){J&&(ie=H(Lt),qt())},Tt=function(){return'fit'!==g.scaleMode||E!==c.currItem.initialZoomLevel},Dt=function(e,t){return e&&e!==document&&(e.getAttribute('class')&&-1<e.getAttribute('class').indexOf('pswp__scroll-wrap')?!1:t(e)?e:Dt(e.parentNode,t))},kt={},At=function(t,e){return kt.prevent=!Dt(t.target,g.isClickableElement),Fe('preventDragEvent',t,e,kt),kt.prevent},Ft=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},zt=function(e,t,o){o.x=0.5*(e.x+t.x),o.y=0.5*(e.y+t.y)},Mt=function(e,t,i){if(50<e-Y){var n=2<xt.length?xt.shift():{};n.x=t,n.y=i,xt.push(n),Y=e}},Zt=function(){var e=ve.y-c.currItem.initialPosition.y;return 1-r(e/(_e.y/2))},Ht={},Bt={},Nt=[],Wt=function(t){for(;0<Nt.length;)Nt.pop();return M?(fe=0,yt.forEach(function(e){0===fe?Nt[0]=e:1===fe&&(Nt[1]=e),fe++})):-1<t.type.indexOf('touch')?t.touches&&0<t.touches.length&&(Nt[0]=Ft(t.touches[0],Ht),1<t.touches.length&&(Nt[1]=Ft(t.touches[1],Bt))):(Ht.x=t.pageX,Ht.y=t.pageY,Ht.id='',Nt[0]=Ht),Nt},Ut=function(e,t){var o,i,n,l,a=0,s=ve[e]+t[e],r=0<t[e],d=It.x+t.x,p=It.x-ft.x;return o=s>de.min[e]||s<de.max[e]?g.panEndFriction:1,s=ve[e]+t[e]*o,(g.allowPanToNext||E===c.currItem.initialZoomLevel)&&(pe?'h'===me&&'x'===e&&!te&&(r?(s>de.min[e]&&(o=g.panEndFriction,a=de.min[e]-s,i=de.min[e]-be[e]),(0>=i||0>p)&&1<no()?(l=d,0>p&&d>ft.x&&(l=ft.x)):de.min.x!==de.max.x&&(n=s)):(s<de.max[e]&&(o=g.panEndFriction,a=s-de.max[e],i=be[e]-de.max[e]),(0>=i||0<p)&&1<no()?(l=d,0<p&&d<ft.x&&(l=ft.x)):de.min.x!==de.max.x&&(n=s))):l=d,'x'===e)?(void 0!==l&&(We(l,!0),ne=l!==ft.x),de.min.x!==de.max.x&&(void 0===n?!ne&&(ve.x+=t.x*o):ve.x=n),void 0!==l):void(!ce&&!ne&&E>c.currItem.fitRatio&&(ve[e]+=t[e]*o))},Gt=function(t){if(!('mousedown'===t.type&&0<t.button)){if(oo)return void t.preventDefault();if(!(Q&&'mousedown'===t.type)){if(At(t,!0)&&t.preventDefault(),Fe('pointerDown'),M){var e=d.arraySearch(yt,t.pointerId,'id');0>e&&(e=yt.length),yt[e]={x:t.pageX,y:t.pageY,id:t.pointerId}}var o=Wt(t),i=o.length;le=null,rt(),J&&1!==i||(J=ue=!0,d.bind(window,v,c),j=ye=ge=$=ne=oe=ee=te=!1,me=null,Fe('firstTouchStart',o),Ge(be,ve),we.x=we.y=0,Ge(gt,o[0]),Ge(ht,gt),ft.x=Ce.x*Ie,xt=[{x:gt.x,y:gt.y}],Y=V=ze(),je(E,!0),Ot(),Lt()),ae||!(1<i)||ce||ne||(C=E,te=!1,ae=ee=!0,we.y=we.x=0,Ge(be,ve),Ge(mt,o[0]),Ge(p,o[1]),zt(mt,p,Ct),Et.x=r(Ct.x)-ve.x,Et.y=r(Ct.y)-ve.y,se=re=St(mt,p))}}},Kt=function(t){if(t.preventDefault(),M){var e=d.arraySearch(yt,t.pointerId,'id');if(-1<e){var o=yt[e];o.x=t.pageX,o.y=t.pageY}}if(J){var i=Wt(t);if(me||oe||ae)le=i;else if(It.x!==Ce.x*Ie)me='h';else{var n=r(i[0].x-gt.x)-r(i[0].y-gt.y);r(n)>=ct&&(me=0<n?'h':'v',le=i)}}},qt=function(){if(le){var e=le.length;if(0!==e)if(Ge(mt,le[0]),ut.x=mt.x-gt.x,ut.y=mt.y-gt.y,ae&&1<e){if(gt.x=mt.x,gt.y=mt.y,!ut.x&&!ut.y&&Rt(le[1],p))return;Ge(p,le[1]),te||(te=!0,Fe('zoomGestureStarted'));var t=St(mt,p),o=$t(t);o>c.currItem.initialZoomLevel+c.currItem.initialZoomLevel/15&&(ye=!0);var i=1,n=$e(),l=Qe();if(!(o<n))o>l&&(i=(o-l)/(6*n),1<i&&(i=1),o=l+i*n);else if(g.pinchToClose&&!ye&&C<=c.currItem.initialZoomLevel){var a=n-o,s=1-a/(n/1.2);Me(s),Fe('onPinchClose',s),ge=!0}else i=(n-o)/n,1<i&&(i=1),o=n-i*(n/3);0>i&&(i=0),se=t,zt(mt,p,vt),we.x+=vt.x-Ct.x,we.y+=vt.y-Ct.y,Ge(Ct,vt),ve.x=Ue('x',o),ve.y=Ue('y',o),j=o>E,E=o,He()}else{if(!me)return;if(ue&&(ue=!1,r(ut.x)>=ct&&(ut.x-=le[0].x-ht.x),r(ut.y)>=ct&&(ut.y-=le[0].y-ht.y)),gt.x=mt.x,gt.y=mt.y,0===ut.x&&0===ut.y)return;if('v'===me&&g.closeOnVerticalDrag&&!Tt()){we.y+=ut.y,ve.y+=ut.y;var d=Zt();return $=!0,Fe('onVerticalDrag',d),Me(d),void He()}Mt(ze(),mt.x,mt.y),oe=!0,de=c.currItem.bounds;var m=Ut('x',ut);m||(Ut('y',ut),Ke(ve),He())}}},Vt=function(t){if(K.isOldAndroid){if(Q&&'mouseup'===t.type)return;-1<t.type.indexOf('touch')&&(clearTimeout(Q),Q=setTimeout(function(){Q=0},600))}Fe('pointerUp'),At(t,!1)&&t.preventDefault();var e;if(M){var o=d.arraySearch(yt,t.pointerId,'id');if(-1<o)if(e=yt.splice(o,1)[0],navigator.pointerEnabled)e.type=t.pointerType||'mouse';else{e.type={2:'touch',3:'pen',4:'mouse'}[t.pointerType],e.type||(e.type=t.pointerType||'mouse')}}var i,n=Wt(t),l=n.length;if('mouseup'===t.type&&(l=0),2===l)return le=null,!0;1===l&&Ge(ht,n[0]),0!==l||me||ce||(!e&&('mouseup'===t.type?e={x:t.pageX,y:t.pageY,type:'mouse'}:t.changedTouches&&t.changedTouches[0]&&(e={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:'touch'})),Fe('touchRelease',t,e));var a=-1;if(0===l&&(J=!1,d.unbind(window,v,c),Ot(),ae?a=0:-1!=_t&&(a=ze()-_t)),_t=1===l?ze():-1,i=-1!=a&&150>a?'zoom':'swipe',ae&&2>l&&(ae=!1,1===l&&(i='zoomPointerUp'),Fe('zoomGestureEnded')),le=null,oe||te||ce||$){if(rt(),X||(X=Yt()),X.calculateSwipeSpeed('x'),$){var s=Zt();if(s<g.verticalDragRange)c.close();else{var r=ve.y,p=he;dt('verticalDrag',0,1,300,d.easing.cubic.out,function(e){ve.y=(c.currItem.initialPosition.y-r)*e+r,Me((1-p)*e+p),He()}),Fe('onVerticalDrag',1)}return}if((ne||ce)&&0===l){var m=jt(i,X);if(m)return;i='zoomPointerUp'}return ce?void 0:'swipe'===i?void(!ne&&E>c.currItem.fitRatio&&Xt(X)):void Qt()}},Yt=function(){var e,t,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(o){1<xt.length?(e=ze()-Y+50,t=xt[xt.length-2][o]):(e=ze()-V,t=ht[o]),i.lastFlickOffset[o]=gt[o]-t,i.lastFlickDist[o]=r(i.lastFlickOffset[o]),i.lastFlickSpeed[o]=20<i.lastFlickDist[o]?i.lastFlickOffset[o]/e:0,0.1>r(i.lastFlickSpeed[o])&&(i.lastFlickSpeed[o]=0),i.slowDownRatio[o]=0.95,i.slowDownRatioReverse[o]=1-i.slowDownRatio[o],i.speedDecelerationRatio[o]=1},calculateOverBoundsAnimOffset:function(e,t){i.backAnimStarted[e]||(ve[e]>de.min[e]?i.backAnimDestination[e]=de.min[e]:ve[e]<de.max[e]&&(i.backAnimDestination[e]=de.max[e]),i.backAnimDestination[e]!==void 0&&(i.slowDownRatio[e]=0.7,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],0.05>i.speedDecelerationRatioAbs[e]&&(i.lastFlickSpeed[e]=0,i.backAnimStarted[e]=!0,dt('bounceZoomPan'+e,ve[e],i.backAnimDestination[e],t||300,d.easing.sine.out,function(t){ve[e]=t,He()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]*=i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10,i.speedDecelerationRatioAbs[e]=r(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,ve[e]+=i.distanceOffset[e])},panAnimLoop:function(){if(nt.zoomPan&&(nt.zoomPan.raf=H(i.panAnimLoop),i.now=ze(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset('x'),i.calculateAnimOffset('y'),He(),i.calculateOverBoundsAnimOffset('x'),i.calculateOverBoundsAnimOffset('y'),0.05>i.speedDecelerationRatioAbs.x&&0.05>i.speedDecelerationRatioAbs.y))return ve.x=o(ve.x),ve.y=o(ve.y),He(),void at('zoomPan')}};return i},Xt=function(e){return e.calculateSwipeSpeed('y'),de=c.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},0.05>=r(e.lastFlickSpeed.x)&&0.05>=r(e.lastFlickSpeed.y)?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset('x'),e.calculateOverBoundsAnimOffset('y'),!0):void(st('zoomPan'),e.lastNow=ze(),e.panAnimLoop())},jt=function(o,i){var n;ce||(bt=w);var l;if('swipe'===o){var a=gt.x-ht.x,s=10>i.lastFlickDist.x;a>pt&&(s||20<i.lastFlickOffset.x)?l=-1:a<-pt&&(s||-20>i.lastFlickOffset.x)&&(l=1)}var p;l&&(w+=l,0>w?(w=g.loop?no()-1:0,p=!0):w>=no()&&(w=g.loop?0:no()-1,p=!0),(!p||g.loop)&&(Re+=l,Ie-=l,n=!0));var m,u=Ce.x*Ie,h=r(u-It.x);return n||u>It.x==0<i.lastFlickSpeed.x?(m=0<r(i.lastFlickSpeed.x)?h/r(i.lastFlickSpeed.x):333,m=e(m,400),m=t(m,250)):m=333,bt===w&&(n=!1),ce=!0,Fe('mainScrollAnimStart'),dt('mainScroll',It.x,u,m,d.easing.cubic.out,We,function(){rt(),ce=!1,bt=-1,(n||bt!==w)&&c.updateCurrItem(),Fe('mainScrollAnimComplete')}),n&&c.updateCurrItem(!0),n},$t=function(e){return 1/re*e*C},Qt=function(){var e=E,t=$e(),o=Qe();E<t?e=t:E>o&&(e=o);var i,n=he;return ge&&!j&&!ye&&E<t?(c.close(),!0):(ge&&(i=function(e){Me((1-n)*e+n)}),c.zoomTo(e,0,200,d.easing.cubic.out,i),!0)};Te('Gestures',{publicMethods:{initGestures:function(){var e=function(e,t,o,i,n){D=e+t,k=e+o,A=e+i,F=n?e+n:''};M=K.pointerEvent,M&&K.touch&&(K.touch=!1),M?navigator.pointerEnabled?e('pointer','down','move','up','cancel'):e('MSPointer','Down','Move','Up','Cancel'):K.touch?(e('touch','start','move','end','cancel'),Z=!0):e('mouse','down','move','up'),v=k+' '+A+' '+F,_=D,M&&!Z&&(Z=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),c.likelyTouchDevice=Z,I[D]=Gt,I[k]=Kt,I[A]=Vt,F&&(I[F]=I[A]),K.touch&&(_+=' mousedown',v+=' mousemove mouseup',I.mousedown=I[D],I.mousemove=I[k],I.mouseup=I[A]),Z||(g.allowPanToNext=!1)}}});var Jt,eo,to,oo,io,no,lo,ao=function(e,t,o,i){Jt&&clearTimeout(Jt),oo=!0,to=!0;var l;e.initialLayout?(l=e.initialLayout,e.initialLayout=null):l=g.getThumbBoundsFn&&g.getThumbBoundsFn(w);var a=o?g.hideAnimationDuration:g.showAnimationDuration,s=function(){at('initialZoom'),o?(c.template.removeAttribute('style'),c.bg.removeAttribute('style')):(Me(1),t&&(t.style.display='block'),d.addClass(n,'pswp--animated-in'),Fe('initialZoom'+(o?'OutEnd':'InEnd'))),i&&i(),oo=!1};if(!a||!l||void 0===l.x)return Fe('initialZoom'+(o?'Out':'In')),E=e.initialZoomLevel,Ge(ve,e.initialPosition),He(),n.style.opacity=o?0:1,Me(1),void(a?setTimeout(function(){s()},a):s());(function(){var t=f,i=!c.currItem.src||c.currItem.loadError||g.showHideOpacity;e.miniImg&&(e.miniImg.style.webkitBackfaceVisibility='hidden'),o||(E=l.w/e.w,ve.x=l.x,ve.y=l.y-W,c[i?'template':'bg'].style.opacity=1e-3,He()),st('initialZoom'),o&&!t&&d.removeClass(n,'pswp--animated-in'),i&&(o?d[(t?'remove':'add')+'Class'](n,'pswp--animate_opacity'):setTimeout(function(){d.addClass(n,'pswp--animate_opacity')},30)),Jt=setTimeout(function(){if(Fe('initialZoom'+(o?'Out':'In')),!o)E=e.initialZoomLevel,Ge(ve,e.initialPosition),He(),Me(1),i?n.style.opacity=1:Me(1),Jt=setTimeout(s,a+20);else{var r=l.w/e.w,p={x:ve.x,y:ve.y},c=E,m=he,u=function(e){1===e?(E=r,ve.x=l.x,ve.y=l.y-G):(E=(r-c)*e+c,ve.x=(l.x-p.x)*e+p.x,ve.y=(l.y-G-p.y)*e+p.y),He(),i?n.style.opacity=1-e:Me(m-e*m)};t?dt('initialZoom',0,1,a,d.easing.cubic.out,u,s):(u(1),Jt=setTimeout(s,a+20))}},o?25:90)})()},so={},ro=[],po={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return eo.length}},co=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},mo=function(e,t,i){var n=e.bounds;n.center.x=o((so.x-t)/2),n.center.y=o((so.y-i)/2)+e.vGap.top,n.max.x=t>so.x?o(so.x-t):n.center.x,n.max.y=i>so.y?o(so.y-i)+e.vGap.top:n.center.y,n.min.x=t>so.x?0:n.center.x,n.min.y=i>so.y?e.vGap.top:n.center.y},uo=function(e,t,o){if(e.src&&!e.loadError){var i=!o;if(i&&(!e.vGap&&(e.vGap={top:0,bottom:0}),Fe('parseVerticalMargin',e)),so.x=t.x,so.y=t.y-e.vGap.top-e.vGap.bottom,i){var n=so.x/e.w,l=so.y/e.h;e.fitRatio=n<l?n:l;var a=g.scaleMode;'orig'===a?o=1:'fit'===a&&(o=e.fitRatio),1<o&&(o=1),e.initialZoomLevel=o,e.bounds||(e.bounds=co())}return o?(mo(e,e.w*o,e.h*o),i&&o===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=co(),e.initialPosition=e.bounds.center,e.bounds},go=function(e,t,o,i,n,l){t.loadError||i&&(t.imageAppended=!0,fo(t,i,t===c.currItem&&Le),o.appendChild(i),l&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display='none',t.placeholder=null)},500))},ho=function(e){e.loading=!0,e.loaded=!1;var t=e.img=d.createEl('pswp__img','img'),o=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=o,t.onerror=function(){e.loadError=!0,o()},t.src=e.src,t},yo=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=''),e.container.innerHTML=g.errorMsg.replace('%url%',e.src),!0},fo=function(e,t,i){if(e.src){t||(t=e.container.lastChild);var n=i?e.w:o(e.w*e.fitRatio),l=i?e.h:o(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=n+'px',e.placeholder.style.height=l+'px'),t.style.width=n+'px',t.style.height=l+'px'}},xo=function(){if(ro.length){for(var e,t=0;t<ro.length;t++)e=ro[t],e.holder.index===e.index&&go(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);ro=[]}};Te('Controller',{publicMethods:{lazyLoadItem:function(e){e=De(e);var t=io(e);t&&(!t.loaded&&!t.loading||O)&&(Fe('gettingData',e,t),t.src&&ho(t))},initController:function(){d.extend(g,po,!0),c.items=eo=i,io=c.getItemAt,no=g.getNumItemsFn,lo=g.loop,3>no()&&(g.loop=!1),Ae('beforeChange',function(t){var o,i=g.preload,n=!(null!==t)||0<=t,l=e(i[0],no()),a=e(i[1],no());for(o=1;o<=(n?a:l);o++)c.lazyLoadItem(w+o);for(o=1;o<=(n?l:a);o++)c.lazyLoadItem(w-o)}),Ae('initialLayout',function(){c.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(w)}),Ae('mainScrollAnimComplete',xo),Ae('initialZoomInEnd',xo),Ae('destroy',function(){for(var e,t=0;t<eo.length;t++)e=eo[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);ro=null})},getItemAt:function(e){return!!(0<=e)&&void 0!==eo[e]&&eo[e]},allowProgressiveImg:function(){return g.forceProgressiveLoading||!Z||g.mouseUsed||1200<screen.width},setContent:function(e,t){g.loop&&(t=De(t));var o=c.getItemAt(e.index);o&&(o.container=null);var i,n=c.getItemAt(t);if(!n)return void(e.el.innerHTML='');Fe('gettingData',t,n),e.index=t,e.item=n;var l=n.container=d.createEl('pswp__zoom-wrap');if(!n.src&&n.html&&(n.html.tagName?l.appendChild(n.html):l.innerHTML=n.html),yo(n),uo(n,_e),n.src&&!n.loadError&&!n.loaded){if(n.loadComplete=function(o){if(h){if(e&&e.index===t){if(yo(o,!0))return o.loadComplete=o.img=null,uo(o,_e),Be(o),void(e.index===w&&c.updateCurrZoomItem());o.imageAppended?!oo&&o.placeholder&&(o.placeholder.style.display='none',o.placeholder=null):K.transform&&(ce||oo)?ro.push({item:o,baseDiv:l,img:o.img,index:t,holder:e,clearPlaceholder:!0}):go(t,o,l,o.img,ce||oo,!0)}o.loadComplete=null,o.img=null,Fe('imageLoadComplete',t,o)}},d.features.transform){var a='pswp__img pswp__img--placeholder';a+=n.msrc?'':' pswp__img--placeholder--blank';var s=d.createEl(a,n.msrc?'img':'');n.msrc&&(s.src=n.msrc),fo(n,s),l.appendChild(s),n.placeholder=s}n.loading||ho(n),c.allowProgressiveImg()&&(!to&&K.transform?ro.push({item:n,baseDiv:l,img:n.img,index:t,holder:e}):go(t,n,l,n.img,!0,!0))}else n.src&&!n.loadError&&(i=d.createEl('pswp__img','img'),i.style.opacity=1,i.src=n.src,fo(n,i),go(t,n,l,i,!0));to||t!==w?Be(n):(pe=l.style,ao(n,i||n.img)),e.el.innerHTML='',e.el.appendChild(l)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var wo,bo={},vo=function(t,o,i){var n=document.createEvent('CustomEvent'),e={origEvent:t,target:t.target,releasePoint:o,pointerType:i||'touch'};n.initCustomEvent('pswpTap',!0,!0,e),t.target.dispatchEvent(n)};Te('Tap',{publicMethods:{initTap:function(){Ae('firstTouchStart',c.onTapStart),Ae('touchRelease',c.onTapRelease),Ae('destroy',function(){bo={},wo=null})},onTapStart:function(e){1<e.length&&(clearTimeout(wo),wo=null)},onTapRelease:function(t,e){if(e&&!oe&&!ee&&!lt){var o=e;if(wo&&(clearTimeout(wo),wo=null,Pt(o,bo)))return void Fe('doubleTap',o);if('mouse'===e.type)return void vo(t,e,'mouse');var i=t.target.tagName.toUpperCase();if('BUTTON'===i||d.hasClass(t.target,'pswp__single-tap'))return void vo(t,e);Ge(bo,o),wo=setTimeout(function(){vo(t,e),wo=null},300)}}}});var _o;Te('DesktopZoom',{publicMethods:{initDesktopZoom:function(){U||(Z?Ae('mouseUsed',function(){c.setupDesktopZoom()}):c.setupDesktopZoom(!0))},setupDesktopZoom:function(e){_o={};var t='wheel mousewheel DOMMouseScroll';Ae('bindEvents',function(){d.bind(n,t,c.handleMouseWheel)}),Ae('unbindEvents',function(){_o&&d.unbind(n,t,c.handleMouseWheel)}),c.mouseZoomedIn=!1;var o,i=function(){c.mouseZoomedIn&&(d.removeClass(n,'pswp--zoomed-in'),c.mouseZoomedIn=!1),1>E?d.addClass(n,'pswp--zoom-allowed'):d.removeClass(n,'pswp--zoom-allowed'),l()},l=function(){o&&(d.removeClass(n,'pswp--dragging'),o=!1)};Ae('resize',i),Ae('afterChange',i),Ae('pointerDown',function(){c.mouseZoomedIn&&(o=!0,d.addClass(n,'pswp--dragging'))}),Ae('pointerUp',l),e||i()},handleMouseWheel:function(t){if(E<=c.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||lt||J?t.preventDefault():z&&2<r(t.deltaY)&&(f=!0,c.close())),!0;if(t.stopPropagation(),_o.x=0,'deltaX'in t)1===t.deltaMode?(_o.x=18*t.deltaX,_o.y=18*t.deltaY):(_o.x=t.deltaX,_o.y=t.deltaY);else if('wheelDelta'in t)t.wheelDeltaX&&(_o.x=-0.16*t.wheelDeltaX),_o.y=t.wheelDeltaY?-0.16*t.wheelDeltaY:-0.16*t.wheelDelta;else if('detail'in t)_o.y=t.detail;else return;je(E,!0);var e=ve.x-_o.x,o=ve.y-_o.y;(g.modal||e<=de.min.x&&e>=de.max.x&&o<=de.min.y&&o>=de.max.y)&&t.preventDefault(),c.panTo(e,o)},toggleDesktopZoom:function(e){e=e||{x:_e.x/2+Ee.x,y:_e.y/2+Ee.y};var t=g.getDoubleTapZoom(!0,c.currItem),o=E===t;c.mouseZoomedIn=!o,c.zoomTo(o?c.currItem.initialZoomLevel:t,e,333),d[(o?'remove':'add')+'Class'](n,'pswp--zoomed-in')}}});var Io,Eo,Co,Ro,Po,So,Oo,Lo,To,Do,ko,Ao,Fo={history:!0,galleryUID:1},zo=function(){return ko.hash.substring(1)},Mo=function(){Io&&clearTimeout(Io),Co&&clearTimeout(Co)},Zo=function(){var e=zo(),t={};if(5>e.length)return t;var o,i=e.split('&');for(o=0;o<i.length;o++)if(i[o]){var n=i[o].split('=');2>n.length||(t[n[0]]=n[1])}if(g.galleryPIDs){var l=t.pid;for(t.pid=0,o=0;o<eo.length;o++)if(eo[o].pid===l){t.pid=o;break}}else t.pid=parseInt(t.pid,10)-1;return 0>t.pid&&(t.pid=0),t},Ho=function(){if(Co&&clearTimeout(Co),lt||J)return void(Co=setTimeout(Ho,500));Ro?clearTimeout(Eo):Ro=!0;var e=w+1,t=io(w);t.hasOwnProperty('pid')&&(e=t.pid);var o=Oo+'&gid='+g.galleryUID+'&pid='+e;Lo||-1!==ko.hash.indexOf(o)||(Do=!0);var i=ko.href.split('#')[0]+'#'+o;Ao?'#'+o!==window.location.hash&&history[Lo?'replaceState':'pushState']('',document.title,i):Lo?ko.replace(i):ko.hash=o,Lo=!0,Eo=setTimeout(function(){Ro=!1},60)};Te('History',{publicMethods:{initHistory:function(){if(d.extend(g,Fo,!0),!!g.history){ko=window.location,Do=!1,To=!1,Lo=!1,Oo=zo(),Ao='pushState'in history,-1<Oo.indexOf('gid=')&&(Oo=Oo.split('&gid=')[0],Oo=Oo.split('?gid=')[0]),Ae('afterChange',c.updateURL),Ae('unbindEvents',function(){d.unbind(window,'hashchange',c.onHashChange)});var e=function(){So=!0,To||(Do?history.back():Oo?ko.hash=Oo:Ao?history.pushState('',document.title,ko.pathname+ko.search):ko.hash=''),Mo()};Ae('unbindEvents',function(){f&&e()}),Ae('destroy',function(){So||e()}),Ae('firstUpdate',function(){w=Zo().pid});var t=Oo.indexOf('pid=');-1<t&&(Oo=Oo.substring(0,t),'&'===Oo.slice(-1)&&(Oo=Oo.slice(0,-1))),setTimeout(function(){h&&d.bind(window,'hashchange',c.onHashChange)},40)}},onHashChange:function(){return zo()===Oo?(To=!0,void c.close()):void(!Ro&&(Po=!0,c.goTo(Zo().pid),Po=!1))},updateURL:function(){Mo();Po||(Lo?Io=setTimeout(Ho,800):Ho())}}}),d.extend(c,{shout:Fe,listen:Ae,viewportSize:_e,options:g,isMainScrollAnimating:function(){return ce},getZoomLevel:function(){return E},getCurrentIndex:function(){return w},isDragging:function(){return J},isZooming:function(){return ae},setScrollOffset:function(e,t){Ee.x=e,G=Ee.y=t,Fe('updateScrollOffset',Ee)},applyZoomPan:function(e,t,o,i){ve.x=t,ve.y=o,E=e,He(i)},init:function(){if(!(h||y)){var e;c.framework=d,c.template=n,c.bg=d.getChildByClass(n,'pswp__bg'),N=n.className,h=!0,K=d.detectFeatures(),H=K.raf,B=K.caf,z=K.transform,U=K.oldIE,c.scrollWrap=d.getChildByClass(n,'pswp__scroll-wrap'),c.container=d.getChildByClass(c.scrollWrap,'pswp__container'),b=c.container.style,c.itemHolders=L=[{el:c.container.children[0],wrap:0,index:-1},{el:c.container.children[1],wrap:0,index:-1},{el:c.container.children[2],wrap:0,index:-1}],L[0].el.style.display=L[2].el.style.display='none',et(),I={resize:c.updateSize,orientationchange:function(){clearTimeout(q),q=setTimeout(function(){_e.x!==c.scrollWrap.clientWidth&&c.updateSize()},500)},scroll:it,keydown:tt,click:ot};var t=K.isOldIOSPhone||K.isOldAndroid||K.isMobileOpera;for(K.animationName&&K.transform&&!t||(g.showAnimationDuration=g.hideAnimationDuration=0),e=0;e<Se.length;e++)c['init'+Se[e]]();if(l){var o=c.ui=new l(c,d);o.init()}Fe('firstUpdate'),w=w||g.index||0,(isNaN(w)||0>w||w>=no())&&(w=0),c.currItem=io(w),(K.isOldIOSPhone||K.isOldAndroid)&&(Pe=!1),n.setAttribute('aria-hidden','false'),g.modal&&(Pe?n.style.position='fixed':(n.style.position='absolute',n.style.top=d.getScrollY()+'px')),void 0===G&&(Fe('initialLayout'),G=W=d.getScrollY());var i='pswp--open ';for(g.mainClass&&(i+=g.mainClass+' '),g.showHideOpacity&&(i+='pswp--animate_opacity '),i+=Z?'pswp--touch':'pswp--notouch',i+=K.animationName?' pswp--css_animation':'',i+=K.svg?' pswp--svg':'',d.addClass(n,i),c.updateSize(),x=-1,Re=null,e=0;e<u;e++)Ne((e+x)*Ce.x,L[e].el.style);U||d.bind(c.scrollWrap,_,c),Ae('initialZoomInEnd',function(){c.setContent(L[0],w-1),c.setContent(L[2],w+1),L[0].el.style.display=L[2].el.style.display='block',g.focus&&n.focus(),Ye()}),c.setContent(L[1],w),c.updateCurrItem(),Fe('afterInit'),Pe||(S=setInterval(function(){lt||J||ae||E!==c.currItem.initialZoomLevel||c.updateSize()},1e3)),d.addClass(n,'pswp--visible')}},close:function(){h&&(h=!1,y=!0,Fe('close'),Xe(),ao(c.currItem,null,!0,c.destroy))},destroy:function(){Fe('destroy'),Jt&&clearTimeout(Jt),n.setAttribute('aria-hidden','true'),n.className=N,S&&clearInterval(S),d.unbind(c.scrollWrap,_,c),d.unbind(window,'scroll',c),Ot(),rt(),ke=null},panTo:function(e,t,o){o||(e>de.min.x?e=de.min.x:e<de.max.x&&(e=de.max.x),t>de.min.y?t=de.min.y:t<de.max.y&&(t=de.max.y)),ve.x=e,ve.y=t,He()},handleEvent:function(t){t=t||window.event,I[t.type]&&I[t.type](t)},goTo:function(e){e=De(e);var t=e-w;Re=t,w=e,c.currItem=io(w),Ie-=t,We(Ce.x*Ie),rt(),ce=!1,c.updateCurrItem()},next:function(){c.goTo(w+1)},prev:function(){c.goTo(w-1)},updateCurrZoomItem:function(e){if(e&&Fe('beforeChange',0),L[1].el.children.length){var t=L[1].el.children[0];pe=d.hasClass(t,'pswp__zoom-wrap')?t.style:null}else pe=null;de=c.currItem.bounds,C=E=c.currItem.initialZoomLevel,ve.x=de.center.x,ve.y=de.center.y,e&&Fe('afterChange')},invalidateCurrItems:function(){O=!0;for(var e=0;e<u;e++)L[e].item&&(L[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Re){var t,o=r(Re);if(!(e&&2>o)){c.currItem=io(w),Le=!1,Fe('beforeChange',Re),o>=u&&(x+=Re+(0<Re?-u:u),o=u);for(var n=0;n<o;n++)0<Re?(t=L.shift(),L[u-1]=t,x++,Ne((x+2)*Ce.x,t.el.style),c.setContent(t,w-o+n+1+1)):(t=L.pop(),L.unshift(t),x--,Ne(x*Ce.x,t.el.style),c.setContent(t,w+o-n-1-1));if(pe&&1===r(Re)){var i=io(T);i.initialZoomLevel!==E&&(uo(i,_e),fo(i),Be(i))}Re=0,c.updateCurrZoomItem(),T=w,Fe('afterChange')}}},updateSize:function(e){if(!Pe&&g.modal){var t=d.getScrollY();if(G!==t&&(n.style.top=t+'px',G=t),!e&&Oe.x===window.innerWidth&&Oe.y===window.innerHeight)return;Oe.x=window.innerWidth,Oe.y=window.innerHeight,n.style.height=Oe.y+'px'}if(_e.x=c.scrollWrap.clientWidth,_e.y=c.scrollWrap.clientHeight,it(),Ce.x=_e.x+o(_e.x*g.spacing),Ce.y=_e.y,We(Ce.x*Ie),Fe('beforeResize'),void 0!==x){for(var l,a,s,r=0;r<u;r++)l=L[r],Ne((r+x)*Ce.x,l.el.style),s=w+r-1,g.loop&&2<no()&&(s=De(s)),a=io(s),a&&(O||a.needsUpdate||!a.bounds)?(c.cleanSlide(a),c.setContent(l,s),1===r&&(c.currItem=a,c.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===l.index&&0<=s&&c.setContent(l,s),a&&a.container&&(uo(a,_e),fo(a),Be(a));O=!1}C=E=c.currItem.initialZoomLevel,de=c.currItem.bounds,de&&(ve.x=de.center.x,ve.y=de.center.y,He(!0)),Fe('resize')},zoomTo:function(e,t,o,i,n){t&&(C=E,Et.x=r(t.x)-ve.x,Et.y=r(t.y)-ve.y,Ge(be,ve));var l=je(e,!1),a={};Je('x',l,a,e),Je('y',l,a,e);var s=E,p={x:ve.x,y:ve.y};Ke(a);var c=function(t){1===t?(E=e,ve.x=a.x,ve.y=a.y):(E=(e-s)*t+s,ve.x=(a.x-p.x)*t+p.x,ve.y=(a.y-p.y)*t+p.y),n&&n(t),He(1===t)};o?dt('customZoomTo',0,1,o,i||d.easing.sine.inOut,c):c(1)}})}})},function(e,t,i){var n,l;(function(o,a){n=a,l='function'==typeof n?n.call(t,i,t,e):n,!(l!==void 0&&(e.exports=l))})(this,function(){'use strict';return function(t,n){var i,l,e,a,s,r,d,p,c,m,u,g,h,y,f,x,w,b,v=this,_=!1,I=!0,E=!0,C={barsSize:{top:44,bottom:'auto'},closeElClasses:['item','caption','zoom-wrap','ui','top-bar'],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML='',!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:'facebook',label:'Share on Facebook',url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},{id:'twitter',label:'Tweet',url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},{id:'pinterest',label:'Pin it',url:'http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}'},{id:'download',label:'Download image',url:'{{raw_image_url}}',download:!0}],getImageURLForShare:function(){return t.currItem.src||''},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return t.currItem.title||''},indexIndicatorSep:' / ',fitControlsWidth:1200},R=function(t){if(x)return!0;t=t||window.event,f.timeToIdle&&f.mouseUsed&&!c&&z();for(var e,o,l=t.target||t.srcElement,a=l.getAttribute('class')||'',s=0;s<G.length;s++)e=G[s],e.onTap&&-1<a.indexOf('pswp__'+e.name)&&(e.onTap(),o=!0);if(o){t.stopPropagation&&t.stopPropagation(),x=!0;var i=n.features.isOldAndroid?600:30;setTimeout(function(){x=!1},i)}},P=function(){return!t.likelyTouchDevice||f.mouseUsed||screen.width>f.fitControlsWidth},S=function(e,t,o){n[(o?'add':'remove')+'Class'](e,'pswp__'+t)},O=function(){var e=1===f.getNumItemsFn();e!==y&&(S(l,'ui--one-slide',e),y=e)},L=function(){S(d,'share-modal--hidden',E)},T=function(){return E=!E,E?(n.removeClass(d,'pswp__share-modal--fade-in'),setTimeout(function(){E&&L()},300)):(L(),setTimeout(function(){E||n.addClass(d,'pswp__share-modal--fade-in')},30)),E||k(),!1},D=function(i){i=i||window.event;var e=i.target||i.srcElement;return(t.shout('shareLinkClick',i,e),!!e.href)&&(!!e.hasAttribute('download')||(window.open(e.href,'pswp_share','scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left='+(window.screen?o(screen.width/2-275):100)),E||T(),!1))},k=function(){for(var e,t,o,n,l,a='',s=0;s<f.shareButtons.length;s++)e=f.shareButtons[s],o=f.getImageURLForShare(e),n=f.getPageURLForShare(e),l=f.getTextForShare(e),t=e.url.replace('{{url}}',encodeURIComponent(n)).replace('{{image_url}}',encodeURIComponent(o)).replace('{{raw_image_url}}',o).replace('{{text}}',encodeURIComponent(l)),a+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?'download':'')+'>'+e.label+'</a>',f.parseShareButtonOut&&(a=f.parseShareButtonOut(e,a));d.children[0].innerHTML=a,d.children[0].onclick=D},A=function(e){for(var t=0;t<f.closeElClasses.length;t++)if(n.hasClass(e,'pswp__'+f.closeElClasses[t]))return!0},F=0,z=function(){clearTimeout(b),F=0,c&&v.setIdle(!1)},M=function(t){t=t?t:window.event;var e=t.relatedTarget||t.toElement;e&&'HTML'!==e.nodeName||(clearTimeout(b),b=setTimeout(function(){v.setIdle(!0)},f.timeToIdleOutside))},Z=function(){f.fullscreenEl&&!n.features.isOldAndroid&&(!i&&(i=v.getFullscreenAPI()),i?(n.bind(document,i.eventK,v.updateFullscreen),v.updateFullscreen(),n.addClass(t.template,'pswp--supports-fs')):n.removeClass(t.template,'pswp--supports-fs'))},H=function(){f.preloaderEl&&(B(!0),m('beforeChange',function(){clearTimeout(h),h=setTimeout(function(){t.currItem&&t.currItem.loading?(!t.allowProgressiveImg()||t.currItem.img&&!t.currItem.img.naturalWidth)&&B(!1):B(!0)},f.loadingIndicatorDelay)}),m('imageLoadComplete',function(e,o){t.currItem===o&&B(!0)}))},B=function(e){g!==e&&(S(u,'preloader--active',!e),g=e)},N=function(t){var o=t.vGap;if(P()){var i=f.barsSize;if(!(f.captionEl&&'auto'===i.bottom))o.bottom='auto'===i.bottom?0:i.bottom;else if(a||(a=n.createEl('pswp__caption pswp__caption--fake'),a.appendChild(n.createEl('pswp__caption__center')),l.insertBefore(a,e),n.addClass(l,'pswp__ui--fit')),f.addCaptionHTMLFn(t,a,!0)){var s=a.clientHeight;o.bottom=parseInt(s,10)||44}else o.bottom=i.top;o.top=i.top}else o.top=o.bottom=0},W=function(){f.timeToIdle&&m('mouseUsed',function(){n.bind(document,'mousemove',z),n.bind(document,'mouseout',M),w=setInterval(function(){F++,2==F&&v.setIdle(!0)},f.timeToIdle/2)})},U=function(){m('onVerticalDrag',function(e){I&&0.95>e?v.hideControls():!I&&0.95<=e&&v.showControls()});var e;m('onPinchClose',function(t){I&&0.9>t?(v.hideControls(),e=!0):e&&!I&&0.9<t&&v.showControls()}),m('zoomGestureEnded',function(){e=!1,e&&!I&&v.showControls()})},G=[{name:'caption',option:'captionEl',onInit:function(t){e=t}},{name:'share-modal',option:'shareEl',onInit:function(e){d=e},onTap:function(){T()}},{name:'button--share',option:'shareEl',onInit:function(e){r=e},onTap:function(){T()}},{name:'button--zoom',option:'zoomEl',onTap:t.toggleDesktopZoom},{name:'counter',option:'counterEl',onInit:function(e){s=e}},{name:'button--close',option:'closeEl',onTap:t.close},{name:'button--arrow--left',option:'arrowEl',onTap:t.prev},{name:'button--arrow--right',option:'arrowEl',onTap:t.next},{name:'button--fs',option:'fullscreenEl',onTap:function(){i.isFullscreen()?i.exit():i.enter()}},{name:'preloader',option:'preloaderEl',onInit:function(e){u=e}}],K=function(){var e,t,o,i=function(s){if(s)for(var r=s.length,l=0;l<r;l++){e=s[l],t=e.className;for(var i=0;i<G.length;i++)o=G[i],-1<t.indexOf('pswp__'+o.name)&&(f[o.option]?(n.removeClass(e,'pswp__element--disabled'),o.onInit&&o.onInit(e)):n.addClass(e,'pswp__element--disabled'))}};i(l.children);var a=n.getChildByClass(l,'pswp__top-bar');a&&i(a.children)};v.init=function(){n.extend(t.options,C,!0),f=t.options,l=n.getChildByClass(t.scrollWrap,'pswp__ui'),m=t.listen,U(),m('beforeChange',v.update),m('doubleTap',function(e){var o=t.currItem.initialZoomLevel;t.getZoomLevel()===o?t.zoomTo(f.getDoubleTapZoom(!1,t.currItem),e,333):t.zoomTo(o,e,333)}),m('preventDragEvent',function(o,e,i){var n=o.target||o.srcElement;n&&n.getAttribute('class')&&-1<o.type.indexOf('mouse')&&(0<n.getAttribute('class').indexOf('__caption')||/(SMALL|STRONG|EM)/i.test(n.tagName))&&(i.prevent=!1)}),m('bindEvents',function(){n.bind(l,'pswpTap click',R),n.bind(t.scrollWrap,'pswpTap',v.onGlobalTap),t.likelyTouchDevice||n.bind(t.scrollWrap,'mouseover',v.onMouseOver)}),m('unbindEvents',function(){E||T(),w&&clearInterval(w),n.unbind(document,'mouseout',M),n.unbind(document,'mousemove',z),n.unbind(l,'pswpTap click',R),n.unbind(t.scrollWrap,'pswpTap',v.onGlobalTap),n.unbind(t.scrollWrap,'mouseover',v.onMouseOver),i&&(n.unbind(document,i.eventK,v.updateFullscreen),i.isFullscreen()&&(f.hideAnimationDuration=0,i.exit()),i=null)}),m('destroy',function(){f.captionEl&&(a&&l.removeChild(a),n.removeClass(e,'pswp__caption--empty')),d&&(d.children[0].onclick=null),n.removeClass(l,'pswp__ui--over-close'),n.addClass(l,'pswp__ui--hidden'),v.setIdle(!1)}),f.showAnimationDuration||n.removeClass(l,'pswp__ui--hidden'),m('initialZoomIn',function(){f.showAnimationDuration&&n.removeClass(l,'pswp__ui--hidden')}),m('initialZoomOut',function(){n.addClass(l,'pswp__ui--hidden')}),m('parseVerticalMargin',N),K(),f.shareEl&&r&&d&&(E=!0),O(),W(),Z(),H()},v.setIdle=function(e){c=e,S(l,'ui--idle',e)},v.update=function(){I&&t.currItem?(v.updateIndexIndicator(),f.captionEl&&(f.addCaptionHTMLFn(t.currItem,e),S(e,'caption--empty',!t.currItem.title)),_=!0):_=!1,E||T(),O()},v.updateFullscreen=function(o){o&&setTimeout(function(){t.setScrollOffset(0,n.getScrollY())},50),n[(i.isFullscreen()?'add':'remove')+'Class'](t.template,'pswp--fs')},v.updateIndexIndicator=function(){f.counterEl&&(s.innerHTML=t.getCurrentIndex()+1+f.indexIndicatorSep+f.getNumItemsFn())},v.onGlobalTap=function(o){o=o||window.event;var e=o.target||o.srcElement;if(!x)if(o.detail&&'mouse'===o.detail.pointerType){if(A(e))return void t.close();n.hasClass(e,'pswp__img')&&(1===t.getZoomLevel()&&t.getZoomLevel()<=t.currItem.fitRatio?f.clickToCloseNonZoomable&&t.close():t.toggleDesktopZoom(o.detail.releasePoint))}else if(f.tapToToggleControls&&(I?v.hideControls():v.showControls()),f.tapToClose&&(n.hasClass(e,'pswp__img')||A(e)))return void t.close()},v.onMouseOver=function(t){t=t||window.event;var e=t.target||t.srcElement;S(l,'ui--over-close',A(e))},v.hideControls=function(){n.addClass(l,'pswp__ui--hidden'),I=!1},v.showControls=function(){I=!0,_||v.update(),n.removeClass(l,'pswp__ui--hidden')},v.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},v.getFullscreenAPI=function(){var e,o=document.documentElement,i='fullscreenchange';return o.requestFullscreen?e={enterK:'requestFullscreen',exitK:'exitFullscreen',elementK:'fullscreenElement',eventK:i}:o.mozRequestFullScreen?e={enterK:'mozRequestFullScreen',exitK:'mozCancelFullScreen',elementK:'mozFullScreenElement',eventK:'moz'+i}:o.webkitRequestFullscreen?e={enterK:'webkitRequestFullscreen',exitK:'webkitExitFullscreen',elementK:'webkitFullscreenElement',eventK:'webkit'+i}:o.msRequestFullscreen&&(e={enterK:'msRequestFullscreen',exitK:'msExitFullscreen',elementK:'msFullscreenElement',eventK:'MSFullscreenChange'}),e&&(e.enter=function(){return p=f.closeOnScroll,f.closeOnScroll=!1,'webkitRequestFullscreen'===this.enterK?void t.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):t.template[this.enterK]()},e.exit=function(){return f.closeOnScroll=p,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})},function(o,i){'use strict';function n(e){const t=typeof e;return null!=e&&('object'==t||'function'==t)}Object.defineProperty(i,'__esModule',{value:!0}),i.isObject=n,i.debounce=function(o,i,l){function a(e){const t=h,i=y;return h=y=void 0,v=e,x=o.apply(i,t),x}function s(e,t){return setTimeout(e,t)}function r(e){clearTimeout(e)}function d(e){return v=e,w=s(m,i),_?a(e):x}function p(t){const o=t-b,n=t-v,l=i-o;return I?e(l,f-n):l}function c(e){const t=e-b,o=e-v;return void 0==b||t>=i||0>t||I&&o>=f}function m(){const e=Date.now();return c(e)?u(e):void(w=s(m,p(e)))}function u(e){return(w=void 0,E&&h)?a(e):(h=y=void 0,x)}function g(...e){const t=Date.now(),o=c(t);if(h=e,y=this,b=t,o){if(void 0===w)return d(b);if(I)return w=s(m,i),a(b)}return void 0===w&&(w=s(m,i)),x}let h,y,f,x,w,b,v=0,_=!1,I=!1,E=!0;if('function'!=typeof o)throw new TypeError('Expected a function');return i=+i||0,n(l)&&(_=!!l.leading,I='maxWait'in l,f=I?t(+l.maxWait||0,i):f,E='trailing'in l?!!l.trailing:E),g.cancel=function(){void 0!==w&&r(w),v=0,h=b=y=w=void 0},g.flush=function(){return void 0===w?x:u(Date.now())},g.pending=function(){return void 0!==w},g}},function(e,t,o){'use strict';var l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var a=o(2),s=o(13),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultOptions={columnWidth:300,gap:3,rowsPerPage:0,showLabels:'hover',lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:null},t}return l(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.elementRef.classList.add('masonry-gallery'),this.addColumns()},t.prototype.onScroll=function(){this.addUntilFill()},t.prototype.onPageAdd=function(){var e=this.addUntilFill(),t=this.getEstimatedItemsPerRow(),o=this.getEstimatedRowsPerPage()*t,i=o-e;0<i&&this.addItemsToDom(i)},t.prototype.getEstimatedItemsPerRow=function(){return i((this.width-this.options.gap)/(this.options.columnWidth+this.options.gap))},t.prototype.getEstimatedRowsPerPage=function(){var e=this.getColumnWidth();return i(this.getGalleryVisibleHeight()/(e/1.75))},t.prototype.addUntilFill=function(){var e=this.elementRef.clientHeight,t=0;do t++,this.addItemsToDom(1);while(this.elementRef.clientHeight===e&&this.visibleCollection.length<this.collection.length);var o=this.getEstimatedRowsPerPage();return this.addItemsToDom(o),t+o},t.prototype.addItemsToDom=function(e){var t=this.visibleCollection.length,o=this.visibleCollection.length?t:0,n=o+e-1;this.organizeItems(this.collection.slice(t),o,n);for(var l,a=t;a<this.collection.length&&(l=this.collection[a],a<=n);a++)this.addItemToDOM(l);this.flushBufferedItems(),this.updateNextButtonVisibility()},t.prototype.addItemToDOM=function(t,o){void 0===o&&(o=null);var i=this.getShortestColumn();i.addItem(t),e.prototype.addItemToDOM.call(this,t,i.elementRef)},t.prototype.endResize=function(){e.prototype.endResize.call(this),this.visibleCollection.length&&(this.visibleCollection.length=0,this.addColumns(),this.addUntilFill())},t.prototype.addColumns=function(){this.bodyElementRef.innerHTML='',this.columns=[];for(var e,t=this.getColumnWidth(),o=0;o<this.getEstimatedItemsPerRow();o++)e=new s.Column({width:t,gap:this.options.gap}),this.columns.push(e),this.bodyElementRef.appendChild(e.init())},t.prototype.organizeItems=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=null);var l=this.getEstimatedItemsPerRow(),a=this.getColumnWidth(),s=o?l*(o-t+1):e.length;s=s>e.length?e.length:s;for(var r,d=0;d<s;d++)r=e[d],r.last=!0,r.width=n(a),r.height=r.width*r.model.enlargedWidth/r.model.enlargedHeight,r.style()},t.prototype.getColumnWidth=function(){var e=this.getEstimatedItemsPerRow();return n((this.width-(e-1)*this.options.gap)/e)},t.prototype.getShortestColumn=function(){return this.columns.reduce(function(e,t){return e?t.height<e.height?t:e:t})},t.prototype.empty=function(){e.prototype.empty.call(this),this.addColumns()},t}(a.AbstractGallery);t.Masonry=r},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e){this.options=e,this.collection=[]}return e.prototype.init=function(){return this._elementRef=document.createElement('div'),this._elementRef.classList.add('column'),this._elementRef.style.marginRight=this.options.gap+'px',this._elementRef.style.width=this.options.width+'px',this._elementRef},e.prototype.addItem=function(e){this.collection.push(e)},Object.defineProperty(e.prototype,'height',{get:function(){return this._elementRef.offsetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'length',{get:function(){return this.collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'elementRef',{get:function(){return this._elementRef},enumerable:!0,configurable:!0}),e}();t.Column=o},function(e,t,o){'use strict';var l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var a=o(0),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultOptions={rowHeight:400,gap:3,rowsPerPage:0,showLabels:'hover',lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:null},t}return l(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.elementRef.classList.add('responsive-square-gallery')},t.prototype.getEstimatedItemsPerRow=function(){return i((this.width+this.options.gap)/(this.options.rowHeight+this.options.gap))},t.prototype.organizeItems=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=null);var l=this.getEstimatedItemsPerRow(),a=this.getItemSideSize(),s=this.width-l*a-(l-1)*this.options.gap,r=o?l*(o-t+1):e.length;r=r>e.length?e.length:r;for(var d,p=0;p<r;p++)d=e[p],d.last=p%l==l-1,d.row=n(p/l)+t,d.width=n(a),d.height=n(a),d.last&&(d.width=n(a+s)),d.style()},t.prototype.getItemSideSize=function(){var e=this.getEstimatedItemsPerRow();return(this.width-(e-1)*this.options.gap)/e},t.prototype.getEstimatedRowsPerPage=function(){return i(this.getGalleryVisibleHeight()/this.getItemSideSize())},t}(a.AbstractResponsiveRowGallery);t.ResponsiveSquare=s},function(e,t,o){'use strict';var l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,'__esModule',{value:!0});var a=o(1),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultOptions={itemsPerRow:4,gap:3,rowsPerPage:0,showLabels:'hover',lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:null},t}return l(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.elementRef.classList.add('square-gallery')},t.prototype.getEstimatedItemsPerRow=function(){return this.options.itemsPerRow},t.prototype.organizeItems=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=null);var l=this.getItemSideSize(),a=o?this.options.itemsPerRow*(o-t+1):e.length;a=a>e.length?e.length:a;for(var s,r=0;r<a;r++)s=e[r],s.width=n(l),s.height=n(l),s.last=r%this.options.itemsPerRow==this.options.itemsPerRow-1,s.row=n(r/this.options.itemsPerRow)+t,s.style()},t.prototype.getEstimatedRowsPerPage=function(){return i(this.getGalleryVisibleHeight()/this.getItemSideSize())},t.prototype.getItemSideSize=function(){var e=this.getEstimatedItemsPerRow();return(this.width-(e-1)*this.options.gap)/e},t}(a.AbstractRowGallery);t.Square=s}])});