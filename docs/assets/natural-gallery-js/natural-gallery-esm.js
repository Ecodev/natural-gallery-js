/*! For license information please see natural-gallery-esm.js.LICENSE.txt */
var t={835:function(t,e,n){var i,o;void 0===(o="function"==typeof(i=function(){return function(t,e){var n,i,o,r,s,l,a,c,u,d,h,p,m,f,g,v,y,w,b=this,x=!1,_=!0,C=!0,I={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(t,e){return t.title?(e.children[0].innerHTML=t.title,!0):(e.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return t.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return t.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},E=function(t){if(v)return!0;t=t||window.event,g.timeToIdle&&g.mouseUsed&&!u&&k();for(var n,i,o=(t.target||t.srcElement).getAttribute("class")||"",r=0;r<W.length;r++)(n=W[r]).onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){t.stopPropagation&&t.stopPropagation(),v=!0;var s=e.features.isOldAndroid?600:30;setTimeout((function(){v=!1}),s)}},R=function(){return!t.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},T=function(t,n,i){e[(i?"add":"remove")+"Class"](t,"pswp__"+n)},S=function(){var t=1===g.getNumItemsFn();t!==f&&(T(i,"ui--one-slide",t),f=t)},O=function(){T(a,"share-modal--hidden",C)},L=function(){return(C=!C)?(e.removeClass(a,"pswp__share-modal--fade-in"),setTimeout((function(){C&&O()}),300)):(O(),setTimeout((function(){C||e.addClass(a,"pswp__share-modal--fade-in")}),30)),C||M(),!1},P=function(e){var n=(e=e||window.event).target||e.srcElement;return t.shout("shareLinkClick",e,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),C||L(),1))},M=function(){for(var t,e,n,i,o="",r=0;r<g.shareButtons.length;r++)t=g.shareButtons[r],e=g.getImageURLForShare(t),n=g.getPageURLForShare(t),i=g.getTextForShare(t),o+='<a href="'+t.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(e)).replace("{{raw_image_url}}",e).replace("{{text}}",encodeURIComponent(i))+'" target="_blank" class="pswp__share--'+t.id+'"'+(t.download?"download":"")+">"+t.label+"</a>",g.parseShareButtonOut&&(o=g.parseShareButtonOut(t,o));a.children[0].innerHTML=o,a.children[0].onclick=P},D=function(t){for(var n=0;n<g.closeElClasses.length;n++)if(e.hasClass(t,"pswp__"+g.closeElClasses[n]))return!0},A=0,k=function(){clearTimeout(w),A=0,u&&b.setIdle(!1)},F=function(t){var e=(t=t||window.event).relatedTarget||t.toElement;e&&"HTML"!==e.nodeName||(clearTimeout(w),w=setTimeout((function(){b.setIdle(!0)}),g.timeToIdleOutside))},z=function(){g.fullscreenEl&&!e.features.isOldAndroid&&(n||(n=b.getFullscreenAPI()),n?(e.bind(document,n.eventK,b.updateFullscreen),b.updateFullscreen(),e.addClass(t.template,"pswp--supports-fs")):e.removeClass(t.template,"pswp--supports-fs"))},j=function(){g.preloaderEl&&(B(!0),d("beforeChange",(function(){clearTimeout(m),m=setTimeout((function(){t.currItem&&t.currItem.loading?(!t.allowProgressiveImg()||t.currItem.img&&!t.currItem.img.naturalWidth)&&B(!1):B(!0)}),g.loadingIndicatorDelay)})),d("imageLoadComplete",(function(e,n){t.currItem===n&&B(!0)})))},B=function(t){p!==t&&(T(h,"preloader--active",!t),p=t)},Z=function(t){var n=t.vGap;if(R()){var s=g.barsSize;if(g.captionEl&&"auto"===s.bottom)if(r||((r=e.createEl("pswp__caption pswp__caption--fake")).appendChild(e.createEl("pswp__caption__center")),i.insertBefore(r,o),e.addClass(i,"pswp__ui--fit")),g.addCaptionHTMLFn(t,r,!0)){var l=r.clientHeight;n.bottom=parseInt(l,10)||44}else n.bottom=s.top;else n.bottom="auto"===s.bottom?0:s.bottom;n.top=s.top}else n.top=n.bottom=0},H=function(){g.timeToIdle&&d("mouseUsed",(function(){e.bind(document,"mousemove",k),e.bind(document,"mouseout",F),y=setInterval((function(){2==++A&&b.setIdle(!0)}),g.timeToIdle/2)}))},N=function(){var t;d("onVerticalDrag",(function(t){_&&t<.95?b.hideControls():!_&&t>=.95&&b.showControls()})),d("onPinchClose",(function(e){_&&e<.9?(b.hideControls(),t=!0):t&&!_&&e>.9&&b.showControls()})),d("zoomGestureEnded",(function(){(t=!1)&&!_&&b.showControls()}))},W=[{name:"caption",option:"captionEl",onInit:function(t){o=t}},{name:"share-modal",option:"shareEl",onInit:function(t){a=t},onTap:function(){L()}},{name:"button--share",option:"shareEl",onInit:function(t){l=t},onTap:function(){L()}},{name:"button--zoom",option:"zoomEl",onTap:t.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(t){s=t}},{name:"button--close",option:"closeEl",onTap:t.close},{name:"button--arrow--left",option:"arrowEl",onTap:t.prev},{name:"button--arrow--right",option:"arrowEl",onTap:t.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(t){h=t}}],U=function(){var t,n,o,r=function(i){if(i)for(var r=i.length,s=0;s<r;s++){t=i[s],n=t.className;for(var l=0;l<W.length;l++)o=W[l],n.indexOf("pswp__"+o.name)>-1&&(g[o.option]?(e.removeClass(t,"pswp__element--disabled"),o.onInit&&o.onInit(t)):e.addClass(t,"pswp__element--disabled"))}};r(i.children);var s=e.getChildByClass(i,"pswp__top-bar");s&&r(s.children)};b.init=function(){e.extend(t.options,I,!0),g=t.options,i=e.getChildByClass(t.scrollWrap,"pswp__ui"),d=t.listen,N(),d("beforeChange",b.update),d("doubleTap",(function(e){var n=t.currItem.initialZoomLevel;t.getZoomLevel()!==n?t.zoomTo(n,e,333):t.zoomTo(g.getDoubleTapZoom(!1,t.currItem),e,333)})),d("preventDragEvent",(function(t,e,n){var i=t.target||t.srcElement;i&&i.getAttribute("class")&&t.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)})),d("bindEvents",(function(){e.bind(i,"pswpTap click",E),e.bind(t.scrollWrap,"pswpTap",b.onGlobalTap),t.likelyTouchDevice||e.bind(t.scrollWrap,"mouseover",b.onMouseOver)})),d("unbindEvents",(function(){C||L(),y&&clearInterval(y),e.unbind(document,"mouseout",F),e.unbind(document,"mousemove",k),e.unbind(i,"pswpTap click",E),e.unbind(t.scrollWrap,"pswpTap",b.onGlobalTap),e.unbind(t.scrollWrap,"mouseover",b.onMouseOver),n&&(e.unbind(document,n.eventK,b.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)})),d("destroy",(function(){g.captionEl&&(r&&i.removeChild(r),e.removeClass(o,"pswp__caption--empty")),a&&(a.children[0].onclick=null),e.removeClass(i,"pswp__ui--over-close"),e.addClass(i,"pswp__ui--hidden"),b.setIdle(!1)})),g.showAnimationDuration||e.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",(function(){g.showAnimationDuration&&e.removeClass(i,"pswp__ui--hidden")})),d("initialZoomOut",(function(){e.addClass(i,"pswp__ui--hidden")})),d("parseVerticalMargin",Z),U(),g.shareEl&&l&&a&&(C=!0),S(),H(),z(),j()},b.setIdle=function(t){u=t,T(i,"ui--idle",t)},b.update=function(){_&&t.currItem?(b.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(t.currItem,o),T(o,"caption--empty",!t.currItem.title)),x=!0):x=!1,C||L(),S()},b.updateFullscreen=function(i){i&&setTimeout((function(){t.setScrollOffset(0,e.getScrollY())}),50),e[(n.isFullscreen()?"add":"remove")+"Class"](t.template,"pswp--fs")},b.updateIndexIndicator=function(){g.counterEl&&(s.innerHTML=t.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},b.onGlobalTap=function(n){var i=(n=n||window.event).target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(D(i))return void t.close();e.hasClass(i,"pswp__img")&&(1===t.getZoomLevel()&&t.getZoomLevel()<=t.currItem.fitRatio?g.clickToCloseNonZoomable&&t.close():t.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(_?b.hideControls():b.showControls()),g.tapToClose&&(e.hasClass(i,"pswp__img")||D(i)))return void t.close()},b.onMouseOver=function(t){var e=(t=t||window.event).target||t.srcElement;T(i,"ui--over-close",D(e))},b.hideControls=function(){e.addClass(i,"pswp__ui--hidden"),_=!1},b.showControls=function(){_=!0,x||b.update(),e.removeClass(i,"pswp__ui--hidden")},b.supportsFullscreen=function(){var t=document;return!!(t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen)},b.getFullscreenAPI=function(){var e,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){if(c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return t.template[this.enterK]();t.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})?i.call(e,n,e,t):i)||(t.exports=o)},234:function(t,e,n){var i,o;void 0===(o="function"==typeof(i=function(){return function(t,e,n,i){var o={features:null,bind:function(t,e,n,i){var o=(i?"remove":"add")+"EventListener";e=e.split(" ");for(var r=0;r<e.length;r++)e[r]&&t[o](e[r],n,!1)},isArray:function(t){return t instanceof Array},createEl:function(t,e){var n=document.createElement(e||"div");return t&&(n.className=t),n},getScrollY:function(){var t=window.pageYOffset;return void 0!==t?t:document.documentElement.scrollTop},unbind:function(t,e,n){o.bind(t,e,n,!0)},removeClass:function(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(t,e){o.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},hasClass:function(t,e){return t.className&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},getChildByClass:function(t,e){for(var n=t.firstChild;n;){if(o.hasClass(n,e))return n;n=n.nextSibling}},arraySearch:function(t,e,n){for(var i=t.length;i--;)if(t[i][n]===e)return i;return-1},extend:function(t,e,n){for(var i in e)if(e.hasOwnProperty(i)){if(n&&t.hasOwnProperty(i))continue;t[i]=e[i]}},easing:{sine:{out:function(t){return Math.sin(t*(Math.PI/2))},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},cubic:{out:function(t){return--t*t*t+1}}},detectFeatures:function(){if(o.features)return o.features;var t=o.createEl().style,e="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var i=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&r.length>0&&(r=parseInt(r[1],10))>=1&&r<8&&(n.isOldIOSPhone=!0)}var s=i.match(/Android\s([0-9\.]*)/),l=s?s[1]:0;(l=parseFloat(l))>=1&&(l<4.4&&(n.isOldAndroid=!0),n.androidVersion=l),n.isMobileOpera=/opera mini|opera mobi/i.test(i)}for(var a,c,u=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],h=0;h<4;h++){e=d[h];for(var p=0;p<3;p++)a=u[p],c=e+(e?a.charAt(0).toUpperCase()+a.slice(1):a),!n[a]&&c in t&&(n[a]=c);e&&!n.raf&&(e=e.toLowerCase(),n.raf=window[e+"RequestAnimationFrame"],n.raf&&(n.caf=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]))}if(!n.raf){var m=0;n.raf=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-m)),i=window.setTimeout((function(){t(e+n)}),n);return m=e+n,i},n.caf=function(t){clearTimeout(t)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=n,n}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(t,e,n,i){e=e.split(" ");for(var o,r=(i?"detach":"attach")+"Event",s=function(){n.handleEvent.call(n)},l=0;l<e.length;l++)if(o=e[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=s;t[r]("on"+o,n["oldIE"+o])}else t[r]("on"+o,n)});var r=this,s=25,l=3,a={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(t){return"A"===t.tagName},getDoubleTapZoom:function(t,e){return t||e.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(a,i);var c,u,d,h,p,m,f,g,v,y,w,b,x,_,C,I,E,R,T,S,O,L,P,M,D,A,k,F,z,j,B,Z,H,N,W,U,K,q,V,G,Y,$,X,J,Q,tt,et,nt,it,ot,rt,st,lt,at,ct,ut,dt=function(){return{x:0,y:0}},ht=dt(),pt=dt(),mt=dt(),ft={},gt=0,vt={},yt=dt(),wt=0,bt=!0,xt=[],_t={},Ct=!1,It=function(t,e){o.extend(r,e.publicMethods),xt.push(t)},Et=function(t){var e=Qe();return t>e-1?t-e:t<0?e+t:t},Rt={},Tt=function(t,e){return Rt[t]||(Rt[t]=[]),Rt[t].push(e)},St=function(t){var e=Rt[t];if(e){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<e.length;i++)e[i].apply(r,n)}},Ot=function(){return(new Date).getTime()},Lt=function(t){at=t,r.bg.style.opacity=t*a.bgOpacity},Pt=function(t,e,n,i,o){(!Ct||o&&o!==r.currItem)&&(i/=o?o.fitRatio:r.currItem.fitRatio),t[L]=b+e+"px, "+n+"px"+x+" scale("+i+")"},Mt=function(t){it&&(t&&(y>r.currItem.fitRatio?Ct||(dn(r.currItem,!1,!0),Ct=!0):Ct&&(dn(r.currItem),Ct=!1)),Pt(it,mt.x,mt.y,y))},Dt=function(t){t.container&&Pt(t.container.style,t.initialPosition.x,t.initialPosition.y,t.initialZoomLevel,t)},At=function(t,e){e[L]=b+t+"px, 0px"+x},kt=function(t,e){if(!a.loop&&e){var n=h+(yt.x*gt-t)/yt.x,i=Math.round(t-ye.x);(n<0&&i>0||n>=Qe()-1&&i<0)&&(t=ye.x+i*a.mainScrollEndFriction)}ye.x=t,At(t,p)},Ft=function(t,e){var n=we[t]-vt[t];return pt[t]+ht[t]+n-n*(e/w)},zt=function(t,e){t.x=e.x,t.y=e.y,e.id&&(t.id=e.id)},jt=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y)},Bt=null,Zt=function(){Bt&&(o.unbind(document,"mousemove",Zt),o.addClass(t,"pswp--has_mouse"),a.mouseUsed=!0,St("mouseUsed")),Bt=setTimeout((function(){Bt=null}),100)},Ht=function(){o.bind(document,"keydown",r),B.transform&&o.bind(r.scrollWrap,"click",r),a.mouseUsed||o.bind(document,"mousemove",Zt),o.bind(window,"resize scroll orientationchange",r),St("bindEvents")},Nt=function(){o.unbind(window,"resize scroll orientationchange",r),o.unbind(window,"scroll",v.scroll),o.unbind(document,"keydown",r),o.unbind(document,"mousemove",Zt),B.transform&&o.unbind(r.scrollWrap,"click",r),V&&o.unbind(window,f,r),clearTimeout(Z),St("unbindEvents")},Wt=function(t,e){var n=ln(r.currItem,ft,t);return e&&(nt=n),n},Ut=function(t){return t||(t=r.currItem),t.initialZoomLevel},Kt=function(t){return t||(t=r.currItem),t.w>0?a.maxSpreadZoom:1},qt=function(t,e,n,i){return i===r.currItem.initialZoomLevel?(n[t]=r.currItem.initialPosition[t],!0):(n[t]=Ft(t,i),n[t]>e.min[t]?(n[t]=e.min[t],!0):n[t]<e.max[t]&&(n[t]=e.max[t],!0))},Vt=function(){if(L){var e=B.perspective&&!M;return b="translate"+(e?"3d(":"("),void(x=B.perspective?", 0px)":")")}L="left",o.addClass(t,"pswp--ie"),At=function(t,e){e.left=t+"px"},Dt=function(t){var e=t.fitRatio>1?1:t.fitRatio,n=t.container.style,i=e*t.w,o=e*t.h;n.width=i+"px",n.height=o+"px",n.left=t.initialPosition.x+"px",n.top=t.initialPosition.y+"px"},Mt=function(){if(it){var t=it,e=r.currItem,n=e.fitRatio>1?1:e.fitRatio,i=n*e.w,o=n*e.h;t.width=i+"px",t.height=o+"px",t.left=mt.x+"px",t.top=mt.y+"px"}}},Gt=function(t){var e="";a.escKey&&27===t.keyCode?e="close":a.arrowKeys&&(37===t.keyCode?e="prev":39===t.keyCode&&(e="next")),e&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,r[e]()))},Yt=function(t){t&&($||Y||ot||K)&&(t.preventDefault(),t.stopPropagation())},$t=function(){r.setScrollOffset(0,o.getScrollY())},Xt={},Jt=0,Qt=function(t){Xt[t]&&(Xt[t].raf&&A(Xt[t].raf),Jt--,delete Xt[t])},te=function(t){Xt[t]&&Qt(t),Xt[t]||(Jt++,Xt[t]={})},ee=function(){for(var t in Xt)Xt.hasOwnProperty(t)&&Qt(t)},ne=function(t,e,n,i,o,r,s){var l,a=Ot();te(t);var c=function(){if(Xt[t]){if((l=Ot()-a)>=i)return Qt(t),r(n),void(s&&s());r((n-e)*o(l/i)+e),Xt[t].raf=D(c)}};c()},ie={shout:St,listen:Tt,viewportSize:ft,options:a,isMainScrollAnimating:function(){return ot},getZoomLevel:function(){return y},getCurrentIndex:function(){return h},isDragging:function(){return V},isZooming:function(){return tt},setScrollOffset:function(t,e){vt.x=t,j=vt.y=e,St("updateScrollOffset",vt)},applyZoomPan:function(t,e,n,i){mt.x=e,mt.y=n,y=t,Mt(i)},init:function(){if(!c&&!u){var n;r.framework=o,r.template=t,r.bg=o.getChildByClass(t,"pswp__bg"),k=t.className,c=!0,B=o.detectFeatures(),D=B.raf,A=B.caf,L=B.transform,z=B.oldIE,r.scrollWrap=o.getChildByClass(t,"pswp__scroll-wrap"),r.container=o.getChildByClass(r.scrollWrap,"pswp__container"),p=r.container.style,r.itemHolders=I=[{el:r.container.children[0],wrap:0,index:-1},{el:r.container.children[1],wrap:0,index:-1},{el:r.container.children[2],wrap:0,index:-1}],I[0].el.style.display=I[2].el.style.display="none",Vt(),v={resize:r.updateSize,orientationchange:function(){clearTimeout(Z),Z=setTimeout((function(){ft.x!==r.scrollWrap.clientWidth&&r.updateSize()}),500)},scroll:$t,keydown:Gt,click:Yt};var i=B.isOldIOSPhone||B.isOldAndroid||B.isMobileOpera;for(B.animationName&&B.transform&&!i||(a.showAnimationDuration=a.hideAnimationDuration=0),n=0;n<xt.length;n++)r["init"+xt[n]]();e&&(r.ui=new e(r,o)).init(),St("firstUpdate"),h=h||a.index||0,(isNaN(h)||h<0||h>=Qe())&&(h=0),r.currItem=Je(h),(B.isOldIOSPhone||B.isOldAndroid)&&(bt=!1),t.setAttribute("aria-hidden","false"),a.modal&&(bt?t.style.position="fixed":(t.style.position="absolute",t.style.top=o.getScrollY()+"px")),void 0===j&&(St("initialLayout"),j=F=o.getScrollY());var s="pswp--open ";for(a.mainClass&&(s+=a.mainClass+" "),a.showHideOpacity&&(s+="pswp--animate_opacity "),s+=M?"pswp--touch":"pswp--notouch",s+=B.animationName?" pswp--css_animation":"",s+=B.svg?" pswp--svg":"",o.addClass(t,s),r.updateSize(),m=-1,wt=null,n=0;n<l;n++)At((n+m)*yt.x,I[n].el.style);z||o.bind(r.scrollWrap,g,r),Tt("initialZoomInEnd",(function(){r.setContent(I[0],h-1),r.setContent(I[2],h+1),I[0].el.style.display=I[2].el.style.display="block",a.focus&&t.focus(),Ht()})),r.setContent(I[1],h),r.updateCurrItem(),St("afterInit"),bt||(_=setInterval((function(){Jt||V||tt||y!==r.currItem.initialZoomLevel||r.updateSize()}),1e3)),o.addClass(t,"pswp--visible")}},close:function(){c&&(c=!1,u=!0,St("close"),Nt(),tn(r.currItem,null,!0,r.destroy))},destroy:function(){St("destroy"),Ge&&clearTimeout(Ge),t.setAttribute("aria-hidden","true"),t.className=k,_&&clearInterval(_),o.unbind(r.scrollWrap,g,r),o.unbind(window,"scroll",r),Ie(),ee(),Rt=null},panTo:function(t,e,n){n||(t>nt.min.x?t=nt.min.x:t<nt.max.x&&(t=nt.max.x),e>nt.min.y?e=nt.min.y:e<nt.max.y&&(e=nt.max.y)),mt.x=t,mt.y=e,Mt()},handleEvent:function(t){t=t||window.event,v[t.type]&&v[t.type](t)},goTo:function(t){var e=(t=Et(t))-h;wt=e,h=t,r.currItem=Je(h),gt-=e,kt(yt.x*gt),ee(),ot=!1,r.updateCurrItem()},next:function(){r.goTo(h+1)},prev:function(){r.goTo(h-1)},updateCurrZoomItem:function(t){if(t&&St("beforeChange",0),I[1].el.children.length){var e=I[1].el.children[0];it=o.hasClass(e,"pswp__zoom-wrap")?e.style:null}else it=null;nt=r.currItem.bounds,w=y=r.currItem.initialZoomLevel,mt.x=nt.center.x,mt.y=nt.center.y,t&&St("afterChange")},invalidateCurrItems:function(){C=!0;for(var t=0;t<l;t++)I[t].item&&(I[t].item.needsUpdate=!0)},updateCurrItem:function(t){if(0!==wt){var e,n=Math.abs(wt);if(!(t&&n<2)){r.currItem=Je(h),Ct=!1,St("beforeChange",wt),n>=l&&(m+=wt+(wt>0?-l:l),n=l);for(var i=0;i<n;i++)wt>0?(e=I.shift(),I[l-1]=e,m++,At((m+2)*yt.x,e.el.style),r.setContent(e,h-n+i+1+1)):(e=I.pop(),I.unshift(e),m--,At(m*yt.x,e.el.style),r.setContent(e,h+n-i-1-1));if(it&&1===Math.abs(wt)){var o=Je(E);o.initialZoomLevel!==y&&(ln(o,ft),dn(o),Dt(o))}wt=0,r.updateCurrZoomItem(),E=h,St("afterChange")}}},updateSize:function(e){if(!bt&&a.modal){var n=o.getScrollY();if(j!==n&&(t.style.top=n+"px",j=n),!e&&_t.x===window.innerWidth&&_t.y===window.innerHeight)return;_t.x=window.innerWidth,_t.y=window.innerHeight,t.style.height=_t.y+"px"}if(ft.x=r.scrollWrap.clientWidth,ft.y=r.scrollWrap.clientHeight,$t(),yt.x=ft.x+Math.round(ft.x*a.spacing),yt.y=ft.y,kt(yt.x*gt),St("beforeResize"),void 0!==m){for(var i,s,c,u=0;u<l;u++)i=I[u],At((u+m)*yt.x,i.el.style),c=h+u-1,a.loop&&Qe()>2&&(c=Et(c)),(s=Je(c))&&(C||s.needsUpdate||!s.bounds)?(r.cleanSlide(s),r.setContent(i,c),1===u&&(r.currItem=s,r.updateCurrZoomItem(!0)),s.needsUpdate=!1):-1===i.index&&c>=0&&r.setContent(i,c),s&&s.container&&(ln(s,ft),dn(s),Dt(s));C=!1}w=y=r.currItem.initialZoomLevel,(nt=r.currItem.bounds)&&(mt.x=nt.center.x,mt.y=nt.center.y,Mt(!0)),St("resize")},zoomTo:function(t,e,n,i,r){e&&(w=y,we.x=Math.abs(e.x)-mt.x,we.y=Math.abs(e.y)-mt.y,zt(pt,mt));var s=Wt(t,!1),l={};qt("x",s,l,t),qt("y",s,l,t);var a=y,c={x:mt.x,y:mt.y};jt(l);var u=function(e){1===e?(y=t,mt.x=l.x,mt.y=l.y):(y=(t-a)*e+a,mt.x=(l.x-c.x)*e+c.x,mt.y=(l.y-c.y)*e+c.y),r&&r(e),Mt(1===e)};n?ne("customZoomTo",0,1,n,i||o.easing.sine.inOut,u):u(1)}},oe=30,re=10,se={},le={},ae={},ce={},ue={},de=[],he={},pe=[],me={},fe=0,ge=dt(),ve=0,ye=dt(),we=dt(),be=dt(),xe=function(t,e){return t.x===e.x&&t.y===e.y},_e=function(t,e){return Math.abs(t.x-e.x)<s&&Math.abs(t.y-e.y)<s},Ce=function(t,e){return me.x=Math.abs(t.x-e.x),me.y=Math.abs(t.y-e.y),Math.sqrt(me.x*me.x+me.y*me.y)},Ie=function(){X&&(A(X),X=null)},Ee=function(){V&&(X=D(Ee),He())},Re=function(){return!("fit"===a.scaleMode&&y===r.currItem.initialZoomLevel)},Te=function(t,e){return!(!t||t===document)&&!(t.getAttribute("class")&&t.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(e(t)?t:Te(t.parentNode,e))},Se={},Oe=function(t,e){return Se.prevent=!Te(t.target,a.isClickableElement),St("preventDragEvent",t,e,Se),Se.prevent},Le=function(t,e){return e.x=t.pageX,e.y=t.pageY,e.id=t.identifier,e},Pe=function(t,e,n){n.x=.5*(t.x+e.x),n.y=.5*(t.y+e.y)},Me=function(t,e,n){if(t-N>50){var i=pe.length>2?pe.shift():{};i.x=e,i.y=n,pe.push(i),N=t}},De=function(){var t=mt.y-r.currItem.initialPosition.y;return 1-Math.abs(t/(ft.y/2))},Ae={},ke={},Fe=[],ze=function(t){for(;Fe.length>0;)Fe.pop();return P?(ut=0,de.forEach((function(t){0===ut?Fe[0]=t:1===ut&&(Fe[1]=t),ut++}))):t.type.indexOf("touch")>-1?t.touches&&t.touches.length>0&&(Fe[0]=Le(t.touches[0],Ae),t.touches.length>1&&(Fe[1]=Le(t.touches[1],ke))):(Ae.x=t.pageX,Ae.y=t.pageY,Ae.id="",Fe[0]=Ae),Fe},je=function(t,e){var n,i,o,s,l=mt[t]+e[t],c=e[t]>0,u=ye.x+e.x,d=ye.x-he.x;if(n=l>nt.min[t]||l<nt.max[t]?a.panEndFriction:1,l=mt[t]+e[t]*n,(a.allowPanToNext||y===r.currItem.initialZoomLevel)&&(it?"h"!==rt||"x"!==t||Y||(c?(l>nt.min[t]&&(n=a.panEndFriction,nt.min[t],i=nt.min[t]-pt[t]),(i<=0||d<0)&&Qe()>1?(s=u,d<0&&u>he.x&&(s=he.x)):nt.min.x!==nt.max.x&&(o=l)):(l<nt.max[t]&&(n=a.panEndFriction,nt.max[t],i=pt[t]-nt.max[t]),(i<=0||d>0)&&Qe()>1?(s=u,d>0&&u<he.x&&(s=he.x)):nt.min.x!==nt.max.x&&(o=l))):s=u,"x"===t))return void 0!==s&&(kt(s,!0),J=s!==he.x),nt.min.x!==nt.max.x&&(void 0!==o?mt.x=o:J||(mt.x+=e.x*n)),void 0!==s;ot||J||y>r.currItem.fitRatio&&(mt[t]+=e[t]*n)},Be=function(t){if(!("mousedown"===t.type&&t.button>0))if(Xe)t.preventDefault();else if(!q||"mousedown"!==t.type){if(Oe(t,!0)&&t.preventDefault(),St("pointerDown"),P){var e=o.arraySearch(de,t.pointerId,"id");e<0&&(e=de.length),de[e]={x:t.pageX,y:t.pageY,id:t.pointerId}}var n=ze(t),i=n.length;Q=null,ee(),V&&1!==i||(V=st=!0,o.bind(window,f,r),U=ct=lt=K=J=$=G=Y=!1,rt=null,St("firstTouchStart",n),zt(pt,mt),ht.x=ht.y=0,zt(ce,n[0]),zt(ue,ce),he.x=yt.x*gt,pe=[{x:ce.x,y:ce.y}],N=H=Ot(),Wt(y,!0),Ie(),Ee()),!tt&&i>1&&!ot&&!J&&(w=y,Y=!1,tt=G=!0,ht.y=ht.x=0,zt(pt,mt),zt(se,n[0]),zt(le,n[1]),Pe(se,le,be),we.x=Math.abs(be.x)-mt.x,we.y=Math.abs(be.y)-mt.y,et=Ce(se,le))}},Ze=function(t){if(t.preventDefault(),P){var e=o.arraySearch(de,t.pointerId,"id");if(e>-1){var n=de[e];n.x=t.pageX,n.y=t.pageY}}if(V){var i=ze(t);if(rt||$||tt)Q=i;else if(ye.x!==yt.x*gt)rt="h";else{var r=Math.abs(i[0].x-ce.x)-Math.abs(i[0].y-ce.y);Math.abs(r)>=re&&(rt=r>0?"h":"v",Q=i)}}},He=function(){if(Q){var t=Q.length;if(0!==t)if(zt(se,Q[0]),ae.x=se.x-ce.x,ae.y=se.y-ce.y,tt&&t>1){if(ce.x=se.x,ce.y=se.y,!ae.x&&!ae.y&&xe(Q[1],le))return;zt(le,Q[1]),Y||(Y=!0,St("zoomGestureStarted"));var e=Ce(se,le),n=qe(e);n>r.currItem.initialZoomLevel+r.currItem.initialZoomLevel/15&&(ct=!0);var i=1,o=Ut(),s=Kt();if(n<o)if(a.pinchToClose&&!ct&&w<=r.currItem.initialZoomLevel){var l=1-(o-n)/(o/1.2);Lt(l),St("onPinchClose",l),lt=!0}else(i=(o-n)/o)>1&&(i=1),n=o-i*(o/3);else n>s&&((i=(n-s)/(6*o))>1&&(i=1),n=s+i*o);i<0&&(i=0),Pe(se,le,ge),ht.x+=ge.x-be.x,ht.y+=ge.y-be.y,zt(be,ge),mt.x=Ft("x",n),mt.y=Ft("y",n),U=n>y,y=n,Mt()}else{if(!rt)return;if(st&&(st=!1,Math.abs(ae.x)>=re&&(ae.x-=Q[0].x-ue.x),Math.abs(ae.y)>=re&&(ae.y-=Q[0].y-ue.y)),ce.x=se.x,ce.y=se.y,0===ae.x&&0===ae.y)return;if("v"===rt&&a.closeOnVerticalDrag&&!Re()){ht.y+=ae.y,mt.y+=ae.y;var c=De();return K=!0,St("onVerticalDrag",c),Lt(c),void Mt()}Me(Ot(),se.x,se.y),$=!0,nt=r.currItem.bounds,je("x",ae)||(je("y",ae),jt(mt),Mt())}}},Ne=function(t){if(B.isOldAndroid){if(q&&"mouseup"===t.type)return;t.type.indexOf("touch")>-1&&(clearTimeout(q),q=setTimeout((function(){q=0}),600))}var e;if(St("pointerUp"),Oe(t,!1)&&t.preventDefault(),P){var n=o.arraySearch(de,t.pointerId,"id");if(n>-1)if(e=de.splice(n,1)[0],navigator.msPointerEnabled){var i={4:"mouse",2:"touch",3:"pen"};e.type=i[t.pointerType],e.type||(e.type=t.pointerType||"mouse")}else e.type=t.pointerType||"mouse"}var s,l=ze(t),c=l.length;if("mouseup"===t.type&&(c=0),2===c)return Q=null,!0;1===c&&zt(ue,l[0]),0!==c||rt||ot||(e||("mouseup"===t.type?e={x:t.pageX,y:t.pageY,type:"mouse"}:t.changedTouches&&t.changedTouches[0]&&(e={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:"touch"})),St("touchRelease",t,e));var u=-1;if(0===c&&(V=!1,o.unbind(window,f,r),Ie(),tt?u=0:-1!==ve&&(u=Ot()-ve)),ve=1===c?Ot():-1,s=-1!==u&&u<150?"zoom":"swipe",tt&&c<2&&(tt=!1,1===c&&(s="zoomPointerUp"),St("zoomGestureEnded")),Q=null,$||Y||ot||K)if(ee(),W||(W=We()),W.calculateSwipeSpeed("x"),K)if(De()<a.verticalDragRange)r.close();else{var d=mt.y,h=at;ne("verticalDrag",0,1,300,o.easing.cubic.out,(function(t){mt.y=(r.currItem.initialPosition.y-d)*t+d,Lt((1-h)*t+h),Mt()})),St("onVerticalDrag",1)}else{if((J||ot)&&0===c){if(Ke(s,W))return;s="zoomPointerUp"}ot||("swipe"===s?!J&&y>r.currItem.fitRatio&&Ue(W):Ve())}},We=function(){var t,e,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){pe.length>1?(t=Ot()-N+50,e=pe[pe.length-2][i]):(t=Ot()-H,e=ue[i]),n.lastFlickOffset[i]=ce[i]-e,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/t:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(t,e){n.backAnimStarted[t]||(mt[t]>nt.min[t]?n.backAnimDestination[t]=nt.min[t]:mt[t]<nt.max[t]&&(n.backAnimDestination[t]=nt.max[t]),void 0!==n.backAnimDestination[t]&&(n.slowDownRatio[t]=.7,n.slowDownRatioReverse[t]=1-n.slowDownRatio[t],n.speedDecelerationRatioAbs[t]<.05&&(n.lastFlickSpeed[t]=0,n.backAnimStarted[t]=!0,ne("bounceZoomPan"+t,mt[t],n.backAnimDestination[t],e||300,o.easing.sine.out,(function(e){mt[t]=e,Mt()})))))},calculateAnimOffset:function(t){n.backAnimStarted[t]||(n.speedDecelerationRatio[t]=n.speedDecelerationRatio[t]*(n.slowDownRatio[t]+n.slowDownRatioReverse[t]-n.slowDownRatioReverse[t]*n.timeDiff/10),n.speedDecelerationRatioAbs[t]=Math.abs(n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]),n.distanceOffset[t]=n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]*n.timeDiff,mt[t]+=n.distanceOffset[t])},panAnimLoop:function(){if(Xt.zoomPan&&(Xt.zoomPan.raf=D(n.panAnimLoop),n.now=Ot(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Mt(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return mt.x=Math.round(mt.x),mt.y=Math.round(mt.y),Mt(),void Qt("zoomPan")}};return n},Ue=function(t){if(t.calculateSwipeSpeed("y"),nt=r.currItem.bounds,t.backAnimDestination={},t.backAnimStarted={},Math.abs(t.lastFlickSpeed.x)<=.05&&Math.abs(t.lastFlickSpeed.y)<=.05)return t.speedDecelerationRatioAbs.x=t.speedDecelerationRatioAbs.y=0,t.calculateOverBoundsAnimOffset("x"),t.calculateOverBoundsAnimOffset("y"),!0;te("zoomPan"),t.lastNow=Ot(),t.panAnimLoop()},Ke=function(t,e){var n,i,s;if(ot||(fe=h),"swipe"===t){var l=ce.x-ue.x,c=e.lastFlickDist.x<10;l>oe&&(c||e.lastFlickOffset.x>20)?i=-1:l<-oe&&(c||e.lastFlickOffset.x<-20)&&(i=1)}i&&((h+=i)<0?(h=a.loop?Qe()-1:0,s=!0):h>=Qe()&&(h=a.loop?0:Qe()-1,s=!0),s&&!a.loop||(wt+=i,gt-=i,n=!0));var u,d=yt.x*gt,p=Math.abs(d-ye.x);return n||d>ye.x==e.lastFlickSpeed.x>0?(u=Math.abs(e.lastFlickSpeed.x)>0?p/Math.abs(e.lastFlickSpeed.x):333,u=Math.min(u,400),u=Math.max(u,250)):u=333,fe===h&&(n=!1),ot=!0,St("mainScrollAnimStart"),ne("mainScroll",ye.x,d,u,o.easing.cubic.out,kt,(function(){ee(),ot=!1,fe=-1,(n||fe!==h)&&r.updateCurrItem(),St("mainScrollAnimComplete")})),n&&r.updateCurrItem(!0),n},qe=function(t){return 1/et*t*w},Ve=function(){var t=y,e=Ut(),n=Kt();y<e?t=e:y>n&&(t=n);var i,s=1,l=at;return lt&&!U&&!ct&&y<e?(r.close(),!0):(lt&&(i=function(t){Lt((s-l)*t+l)}),r.zoomTo(t,0,200,o.easing.cubic.out,i),!0)};It("Gestures",{publicMethods:{initGestures:function(){var t=function(t,e,n,i,o){R=t+e,T=t+n,S=t+i,O=o?t+o:""};(P=B.pointerEvent)&&B.touch&&(B.touch=!1),P?navigator.msPointerEnabled?t("MSPointer","Down","Move","Up","Cancel"):t("pointer","down","move","up","cancel"):B.touch?(t("touch","start","move","end","cancel"),M=!0):t("mouse","down","move","up"),f=T+" "+S+" "+O,g=R,P&&!M&&(M=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),r.likelyTouchDevice=M,v[R]=Be,v[T]=Ze,v[S]=Ne,O&&(v[O]=v[S]),B.touch&&(g+=" mousedown",f+=" mousemove mouseup",v.mousedown=v[R],v.mousemove=v[T],v.mouseup=v[S]),M||(a.allowPanToNext=!1)}}});var Ge,Ye,$e,Xe,Je,Qe,tn=function(e,n,i,s){var l;Ge&&clearTimeout(Ge),Xe=!0,$e=!0,e.initialLayout?(l=e.initialLayout,e.initialLayout=null):l=a.getThumbBoundsFn&&a.getThumbBoundsFn(h);var c,u,p=i?a.hideAnimationDuration:a.showAnimationDuration,m=function(){Qt("initialZoom"),i?(r.template.removeAttribute("style"),r.bg.removeAttribute("style")):(Lt(1),n&&(n.style.display="block"),o.addClass(t,"pswp--animated-in"),St("initialZoom"+(i?"OutEnd":"InEnd"))),s&&s(),Xe=!1};if(!p||!l||void 0===l.x)return St("initialZoom"+(i?"Out":"In")),y=e.initialZoomLevel,zt(mt,e.initialPosition),Mt(),t.style.opacity=i?0:1,Lt(1),void(p?setTimeout((function(){m()}),p):m());c=d,u=!r.currItem.src||r.currItem.loadError||a.showHideOpacity,e.miniImg&&(e.miniImg.style.webkitBackfaceVisibility="hidden"),i||(y=l.w/e.w,mt.x=l.x,mt.y=l.y-F,r[u?"template":"bg"].style.opacity=.001,Mt()),te("initialZoom"),i&&!c&&o.removeClass(t,"pswp--animated-in"),u&&(i?o[(c?"remove":"add")+"Class"](t,"pswp--animate_opacity"):setTimeout((function(){o.addClass(t,"pswp--animate_opacity")}),30)),Ge=setTimeout((function(){if(St("initialZoom"+(i?"Out":"In")),i){var n=l.w/e.w,r={x:mt.x,y:mt.y},s=y,a=at,d=function(e){1===e?(y=n,mt.x=l.x,mt.y=l.y-j):(y=(n-s)*e+s,mt.x=(l.x-r.x)*e+r.x,mt.y=(l.y-j-r.y)*e+r.y),Mt(),u?t.style.opacity=1-e:Lt(a-e*a)};c?ne("initialZoom",0,1,p,o.easing.cubic.out,d,m):(d(1),Ge=setTimeout(m,p+20))}else y=e.initialZoomLevel,zt(mt,e.initialPosition),Mt(),Lt(1),u?t.style.opacity=1:Lt(1),Ge=setTimeout(m,p+20)}),i?25:90)},en={},nn=[],on={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Ye.length}},rn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(t,e,n){var i=t.bounds;i.center.x=Math.round((en.x-e)/2),i.center.y=Math.round((en.y-n)/2)+t.vGap.top,i.max.x=e>en.x?Math.round(en.x-e):i.center.x,i.max.y=n>en.y?Math.round(en.y-n)+t.vGap.top:i.center.y,i.min.x=e>en.x?0:i.center.x,i.min.y=n>en.y?t.vGap.top:i.center.y},ln=function(t,e,n){if(t.src&&!t.loadError){var i=!n;if(i&&(t.vGap||(t.vGap={top:0,bottom:0}),St("parseVerticalMargin",t)),en.x=e.x,en.y=e.y-t.vGap.top-t.vGap.bottom,i){var o=en.x/t.w,r=en.y/t.h;t.fitRatio=o<r?o:r;var s=a.scaleMode;"orig"===s?n=1:"fit"===s&&(n=t.fitRatio),n>1&&(n=1),t.initialZoomLevel=n,t.bounds||(t.bounds=rn())}if(!n)return;return sn(t,t.w*n,t.h*n),i&&n===t.initialZoomLevel&&(t.initialPosition=t.bounds.center),t.bounds}return t.w=t.h=0,t.initialZoomLevel=t.fitRatio=1,t.bounds=rn(),t.initialPosition=t.bounds.center,t.bounds},an=function(t,e,n,i,o,s){e.loadError||i&&(e.imageAppended=!0,dn(e,i,e===r.currItem&&Ct),n.appendChild(i),s&&setTimeout((function(){e&&e.loaded&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null)}),500))},cn=function(t){t.loading=!0,t.loaded=!1;var e=t.img=o.createEl("pswp__img","img"),n=function(){t.loading=!1,t.loaded=!0,t.loadComplete?t.loadComplete(t):t.img=null,e.onload=e.onerror=null,e=null};return e.onload=n,e.onerror=function(){t.loadError=!0,n()},e.src=t.src,e},un=function(t,e){if(t.src&&t.loadError&&t.container)return e&&(t.container.innerHTML=""),t.container.innerHTML=a.errorMsg.replace("%url%",t.src),!0},dn=function(t,e,n){if(t.src){e||(e=t.container.lastChild);var i=n?t.w:Math.round(t.w*t.fitRatio),o=n?t.h:Math.round(t.h*t.fitRatio);t.placeholder&&!t.loaded&&(t.placeholder.style.width=i+"px",t.placeholder.style.height=o+"px"),e.style.width=i+"px",e.style.height=o+"px"}},hn=function(){if(nn.length){for(var t,e=0;e<nn.length;e++)(t=nn[e]).holder.index===t.index&&an(t.index,t.item,t.baseDiv,t.img,!1,t.clearPlaceholder);nn=[]}};It("Controller",{publicMethods:{lazyLoadItem:function(t){t=Et(t);var e=Je(t);e&&(!e.loaded&&!e.loading||C)&&(St("gettingData",t,e),e.src&&cn(e))},initController:function(){o.extend(a,on,!0),r.items=Ye=n,Je=r.getItemAt,Qe=a.getNumItemsFn,a.loop,Qe()<3&&(a.loop=!1),Tt("beforeChange",(function(t){var e,n=a.preload,i=null===t||t>=0,o=Math.min(n[0],Qe()),s=Math.min(n[1],Qe());for(e=1;e<=(i?s:o);e++)r.lazyLoadItem(h+e);for(e=1;e<=(i?o:s);e++)r.lazyLoadItem(h-e)})),Tt("initialLayout",(function(){r.currItem.initialLayout=a.getThumbBoundsFn&&a.getThumbBoundsFn(h)})),Tt("mainScrollAnimComplete",hn),Tt("initialZoomInEnd",hn),Tt("destroy",(function(){for(var t,e=0;e<Ye.length;e++)(t=Ye[e]).container&&(t.container=null),t.placeholder&&(t.placeholder=null),t.img&&(t.img=null),t.preloader&&(t.preloader=null),t.loadError&&(t.loaded=t.loadError=!1);nn=null}))},getItemAt:function(t){return t>=0&&void 0!==Ye[t]&&Ye[t]},allowProgressiveImg:function(){return a.forceProgressiveLoading||!M||a.mouseUsed||screen.width>1200},setContent:function(t,e){a.loop&&(e=Et(e));var n=r.getItemAt(t.index);n&&(n.container=null);var i,s=r.getItemAt(e);if(s){St("gettingData",e,s),t.index=e,t.item=s;var l=s.container=o.createEl("pswp__zoom-wrap");if(!s.src&&s.html&&(s.html.tagName?l.appendChild(s.html):l.innerHTML=s.html),un(s),ln(s,ft),!s.src||s.loadError||s.loaded)s.src&&!s.loadError&&((i=o.createEl("pswp__img","img")).style.opacity=1,i.src=s.src,dn(s,i),an(e,s,l,i,!0));else{if(s.loadComplete=function(n){if(c){if(t&&t.index===e){if(un(n,!0))return n.loadComplete=n.img=null,ln(n,ft),Dt(n),void(t.index===h&&r.updateCurrZoomItem());n.imageAppended?!Xe&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):B.transform&&(ot||Xe)?nn.push({item:n,baseDiv:l,img:n.img,index:e,holder:t,clearPlaceholder:!0}):an(e,n,l,n.img,ot||Xe,!0)}n.loadComplete=null,n.img=null,St("imageLoadComplete",e,n)}},o.features.transform){var u="pswp__img pswp__img--placeholder";u+=s.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(u,s.msrc?"img":"");s.msrc&&(d.src=s.msrc),dn(s,d),l.appendChild(d),s.placeholder=d}s.loading||cn(s),r.allowProgressiveImg()&&(!$e&&B.transform?nn.push({item:s,baseDiv:l,img:s.img,index:e,holder:t}):an(e,s,l,s.img,!0,!0))}$e||e!==h?Dt(s):(it=l.style,tn(s,i||s.img)),t.el.innerHTML="",t.el.appendChild(l)}else t.el.innerHTML=""},cleanSlide:function(t){t.img&&(t.img.onload=t.img.onerror=null),t.loaded=t.loading=t.img=t.imageAppended=!1}}});var pn,mn,fn={},gn=function(t,e,n){var i=document.createEvent("CustomEvent"),o={origEvent:t,target:t.target,releasePoint:e,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),t.target.dispatchEvent(i)};It("Tap",{publicMethods:{initTap:function(){Tt("firstTouchStart",r.onTapStart),Tt("touchRelease",r.onTapRelease),Tt("destroy",(function(){fn={},pn=null}))},onTapStart:function(t){t.length>1&&(clearTimeout(pn),pn=null)},onTapRelease:function(t,e){if(e&&!$&&!G&&!Jt){var n=e;if(pn&&(clearTimeout(pn),pn=null,_e(n,fn)))return void St("doubleTap",n);if("mouse"===e.type)return void gn(t,e,"mouse");if("BUTTON"===t.target.tagName.toUpperCase()||o.hasClass(t.target,"pswp__single-tap"))return void gn(t,e);zt(fn,n),pn=setTimeout((function(){gn(t,e),pn=null}),300)}}}}),It("DesktopZoom",{publicMethods:{initDesktopZoom:function(){z||(M?Tt("mouseUsed",(function(){r.setupDesktopZoom()})):r.setupDesktopZoom(!0))},setupDesktopZoom:function(e){mn={};var n="wheel mousewheel DOMMouseScroll";Tt("bindEvents",(function(){o.bind(t,n,r.handleMouseWheel)})),Tt("unbindEvents",(function(){mn&&o.unbind(t,n,r.handleMouseWheel)})),r.mouseZoomedIn=!1;var i,s=function(){r.mouseZoomedIn&&(o.removeClass(t,"pswp--zoomed-in"),r.mouseZoomedIn=!1),y<1?o.addClass(t,"pswp--zoom-allowed"):o.removeClass(t,"pswp--zoom-allowed"),l()},l=function(){i&&(o.removeClass(t,"pswp--dragging"),i=!1)};Tt("resize",s),Tt("afterChange",s),Tt("pointerDown",(function(){r.mouseZoomedIn&&(i=!0,o.addClass(t,"pswp--dragging"))})),Tt("pointerUp",l),e||s()},handleMouseWheel:function(t){if(y<=r.currItem.fitRatio)return a.modal&&(!a.closeOnScroll||Jt||V?t.preventDefault():L&&Math.abs(t.deltaY)>2&&(d=!0,r.close())),!0;if(t.stopPropagation(),mn.x=0,"deltaX"in t)1===t.deltaMode?(mn.x=18*t.deltaX,mn.y=18*t.deltaY):(mn.x=t.deltaX,mn.y=t.deltaY);else if("wheelDelta"in t)t.wheelDeltaX&&(mn.x=-.16*t.wheelDeltaX),t.wheelDeltaY?mn.y=-.16*t.wheelDeltaY:mn.y=-.16*t.wheelDelta;else{if(!("detail"in t))return;mn.y=t.detail}Wt(y,!0);var e=mt.x-mn.x,n=mt.y-mn.y;(a.modal||e<=nt.min.x&&e>=nt.max.x&&n<=nt.min.y&&n>=nt.max.y)&&t.preventDefault(),r.panTo(e,n)},toggleDesktopZoom:function(e){e=e||{x:ft.x/2+vt.x,y:ft.y/2+vt.y};var n=a.getDoubleTapZoom(!0,r.currItem),i=y===n;r.mouseZoomedIn=!i,r.zoomTo(i?r.currItem.initialZoomLevel:n,e,333),o[(i?"remove":"add")+"Class"](t,"pswp--zoomed-in")}}});var vn,yn,wn,bn,xn,_n,Cn,In,En,Rn,Tn,Sn,On={history:!0,galleryUID:1},Ln=function(){return Tn.hash.substring(1)},Pn=function(){vn&&clearTimeout(vn),wn&&clearTimeout(wn)},Mn=function(){var t=Ln(),e={};if(t.length<5)return e;var n,i=t.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(e[o[0]]=o[1])}if(a.galleryPIDs){var r=e.pid;for(e.pid=0,n=0;n<Ye.length;n++)if(Ye[n].pid===r){e.pid=n;break}}else e.pid=parseInt(e.pid,10)-1;return e.pid<0&&(e.pid=0),e},Dn=function(){if(wn&&clearTimeout(wn),Jt||V)wn=setTimeout(Dn,500);else{bn?clearTimeout(yn):bn=!0;var t=h+1,e=Je(h);e.hasOwnProperty("pid")&&(t=e.pid);var n=Cn+"&gid="+a.galleryUID+"&pid="+t;In||-1===Tn.hash.indexOf(n)&&(Rn=!0);var i=Tn.href.split("#")[0]+"#"+n;Sn?"#"+n!==window.location.hash&&history[In?"replaceState":"pushState"]("",document.title,i):In?Tn.replace(i):Tn.hash=n,In=!0,yn=setTimeout((function(){bn=!1}),60)}};It("History",{publicMethods:{initHistory:function(){if(o.extend(a,On,!0),a.history){Tn=window.location,Rn=!1,En=!1,In=!1,Cn=Ln(),Sn="pushState"in history,Cn.indexOf("gid=")>-1&&(Cn=(Cn=Cn.split("&gid=")[0]).split("?gid=")[0]),Tt("afterChange",r.updateURL),Tt("unbindEvents",(function(){o.unbind(window,"hashchange",r.onHashChange)}));var t=function(){_n=!0,En||(Rn?history.back():Cn?Tn.hash=Cn:Sn?history.pushState("",document.title,Tn.pathname+Tn.search):Tn.hash=""),Pn()};Tt("unbindEvents",(function(){d&&t()})),Tt("destroy",(function(){_n||t()})),Tt("firstUpdate",(function(){h=Mn().pid}));var e=Cn.indexOf("pid=");e>-1&&"&"===(Cn=Cn.substring(0,e)).slice(-1)&&(Cn=Cn.slice(0,-1)),setTimeout((function(){c&&o.bind(window,"hashchange",r.onHashChange)}),40)}},onHashChange:function(){if(Ln()===Cn)return En=!0,void r.close();bn||(xn=!0,r.goTo(Mn().pid),xn=!1)},updateURL:function(){Pn(),xn||(In?vn=setTimeout(Dn,800):Dn())}}}),o.extend(r,ie)}})?i.call(e,n,e,t):i)||(t.exports=o)}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};(()=>{function t(t,e){const n=t.createElement("div");return n.innerHTML='<svg viewBox="0 0 100 100"><use xlink:href="#'+e+'"></use></svg>',n.querySelector("svg")}function e(t,e){let n=Number(t.enlargedWidth)/Number(t.enlargedHeight);return e&&(e.min&&n<e.min?n=e.min:e.max&&n>e.max&&(n=e.max)),n}n.d(i,{Rk:()=>rn,U8:()=>nn,bK:()=>sn});const o=function(t){return t};const r=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var s=Math.max;const l=function(t,e,n){return e=s(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,l=s(i.length-e,0),a=Array(l);++o<l;)a[o]=i[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=i[o];return c[e]=n(a),r(t,this,c)}};const a=function(t){return function(){return t}};const c="object"==typeof global&&global&&global.Object===Object&&global;var u="object"==typeof self&&self&&self.Object===Object&&self;const d=c||u||Function("return this")();const h=d.Symbol;var p=Object.prototype,m=p.hasOwnProperty,f=p.toString,g=h?h.toStringTag:void 0;const v=function(t){var e=m.call(t,g),n=t[g];try{t[g]=void 0;var i=!0}catch(t){}var o=f.call(t);return i&&(e?t[g]=n:delete t[g]),o};var y=Object.prototype.toString;const w=function(t){return y.call(t)};var b=h?h.toStringTag:void 0;const x=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":b&&b in Object(t)?v(t):w(t)};const _=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const C=function(t){if(!_(t))return!1;var e=x(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};const I=d["__core-js_shared__"];var E,R=(E=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"";const T=function(t){return!!R&&R in t};var S=Function.prototype.toString;const O=function(t){if(null!=t){try{return S.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var L=/^\[object .+?Constructor\]$/,P=Function.prototype,M=Object.prototype,D=P.toString,A=M.hasOwnProperty,k=RegExp("^"+D.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const F=function(t){return!(!_(t)||T(t))&&(C(t)?k:L).test(O(t))};const z=function(t,e){return null==t?void 0:t[e]};const j=function(t,e){var n=z(t,e);return F(n)?n:void 0};const B=function(){try{var t=j(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const Z=B?function(t,e){return B(t,"toString",{configurable:!0,enumerable:!1,value:a(e),writable:!0})}:o;var H=Date.now;const N=function(t){var e=0,n=0;return function(){var i=H(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Z);const W=function(t,e){return N(l(t,e,o),t+"")};const U=function(t,e){return t===e||t!=t&&e!=e};const K=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};const q=function(t){return null!=t&&K(t.length)&&!C(t)};var V=/^(?:0|[1-9]\d*)$/;const G=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&V.test(t))&&t>-1&&t%1==0&&t<e};const Y=function(t,e,n){if(!_(n))return!1;var i=typeof e;return!!("number"==i?q(n)&&G(e,n.length):"string"==i&&e in n)&&U(n[e],t)};const $=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i};const X=function(t){return null!=t&&"object"==typeof t};const J=function(t){return X(t)&&"[object Arguments]"==x(t)};var Q=Object.prototype,tt=Q.hasOwnProperty,et=Q.propertyIsEnumerable;const nt=J(function(){return arguments}())?J:function(t){return X(t)&&tt.call(t,"callee")&&!et.call(t,"callee")};const it=Array.isArray;const ot=function(){return!1};var rt="object"==typeof exports&&exports&&!exports.nodeType&&exports,st=rt&&"object"==typeof module&&module&&!module.nodeType&&module,lt=st&&st.exports===rt?d.Buffer:void 0;const at=(lt?lt.isBuffer:void 0)||ot;var ct={};ct["[object Float32Array]"]=ct["[object Float64Array]"]=ct["[object Int8Array]"]=ct["[object Int16Array]"]=ct["[object Int32Array]"]=ct["[object Uint8Array]"]=ct["[object Uint8ClampedArray]"]=ct["[object Uint16Array]"]=ct["[object Uint32Array]"]=!0,ct["[object Arguments]"]=ct["[object Array]"]=ct["[object ArrayBuffer]"]=ct["[object Boolean]"]=ct["[object DataView]"]=ct["[object Date]"]=ct["[object Error]"]=ct["[object Function]"]=ct["[object Map]"]=ct["[object Number]"]=ct["[object Object]"]=ct["[object RegExp]"]=ct["[object Set]"]=ct["[object String]"]=ct["[object WeakMap]"]=!1;const ut=function(t){return X(t)&&K(t.length)&&!!ct[x(t)]};const dt=function(t){return function(e){return t(e)}};var ht="object"==typeof exports&&exports&&!exports.nodeType&&exports,pt=ht&&"object"==typeof module&&module&&!module.nodeType&&module,mt=pt&&pt.exports===ht&&c.process,ft=function(){try{var t=pt&&pt.require&&pt.require("util").types;return t||mt&&mt.binding&&mt.binding("util")}catch(t){}}();var gt=ft&&ft.isTypedArray;const vt=gt?dt(gt):ut;var yt=Object.prototype.hasOwnProperty;const wt=function(t,e){var n=it(t),i=!n&&nt(t),o=!n&&!i&&at(t),r=!n&&!i&&!o&&vt(t),s=n||i||o||r,l=s?$(t.length,String):[],a=l.length;for(var c in t)!e&&!yt.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||G(c,a))||l.push(c);return l};var bt=Object.prototype;const xt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)};const _t=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e};var Ct=Object.prototype.hasOwnProperty;const It=function(t){if(!_(t))return _t(t);var e=xt(t),n=[];for(var i in t)("constructor"!=i||!e&&Ct.call(t,i))&&n.push(i);return n};const Et=function(t){return q(t)?wt(t,!0):It(t)};var Rt=Object.prototype,Tt=Rt.hasOwnProperty;const St=W((function(t,e){t=Object(t);var n=-1,i=e.length,o=i>2?e[2]:void 0;for(o&&Y(e[0],e[1],o)&&(i=1);++n<i;)for(var r=e[n],s=Et(r),l=-1,a=s.length;++l<a;){var c=s[l],u=t[c];(void 0===u||U(u,Rt[c])&&!Tt.call(t,c))&&(t[c]=r[c])}return t}));const Ot=function(){return d.Date.now()};var Lt=/\s/;const Pt=function(t){for(var e=t.length;e--&&Lt.test(t.charAt(e)););return e};var Mt=/^\s+/;const Dt=function(t){return t?t.slice(0,Pt(t)+1).replace(Mt,""):t};const At=function(t){return"symbol"==typeof t||X(t)&&"[object Symbol]"==x(t)};var kt=/^[-+]0x[0-9a-f]+$/i,Ft=/^0b[01]+$/i,zt=/^0o[0-7]+$/i,jt=parseInt;const Bt=function(t){if("number"==typeof t)return t;if(At(t))return NaN;if(_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Dt(t);var n=Ft.test(t);return n||zt.test(t)?jt(t.slice(2),n?2:8):kt.test(t)?NaN:+t};var Zt=Math.max,Ht=Math.min;const Nt=function(t,e,n){var i,o,r,s,l,a,c=0,u=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,r=o;return i=o=void 0,c=e,s=t.apply(r,n)}function m(t){return c=t,l=setTimeout(g,e),u?p(t):s}function f(t){var n=t-a;return void 0===a||n>=e||n<0||d&&t-c>=r}function g(){var t=Ot();if(f(t))return v(t);l=setTimeout(g,function(t){var n=e-(t-a);return d?Ht(n,r-(t-c)):n}(t))}function v(t){return l=void 0,h&&i?p(t):(i=o=void 0,s)}function y(){var t=Ot(),n=f(t);if(i=arguments,o=this,a=t,n){if(void 0===l)return m(a);if(d)return clearTimeout(l),l=setTimeout(g,e),p(a)}return void 0===l&&(l=setTimeout(g,e)),s}return e=Bt(e)||0,_(n)&&(u=!!n.leading,r=(d="maxWait"in n)?Zt(Bt(n.maxWait)||0,e):r,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=a=o=l=void 0},y.flush=function(){return void 0===l?s:v(Ot())},y};var Wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/;const Kt=function(t,e){if(it(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!At(t))||(Ut.test(t)||!Wt.test(t)||null!=e&&t in Object(e))};const qt=j(Object,"create");const Vt=function(){this.__data__=qt?qt(null):{},this.size=0};const Gt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Yt=Object.prototype.hasOwnProperty;const $t=function(t){var e=this.__data__;if(qt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Yt.call(e,t)?e[t]:void 0};var Xt=Object.prototype.hasOwnProperty;const Jt=function(t){var e=this.__data__;return qt?void 0!==e[t]:Xt.call(e,t)};const Qt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qt&&void 0===e?"__lodash_hash_undefined__":e,this};function te(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}te.prototype.clear=Vt,te.prototype.delete=Gt,te.prototype.get=$t,te.prototype.has=Jt,te.prototype.set=Qt;const ee=te;const ne=function(){this.__data__=[],this.size=0};const ie=function(t,e){for(var n=t.length;n--;)if(U(t[n][0],e))return n;return-1};var oe=Array.prototype.splice;const re=function(t){var e=this.__data__,n=ie(e,t);return!(n<0)&&(n==e.length-1?e.pop():oe.call(e,n,1),--this.size,!0)};const se=function(t){var e=this.__data__,n=ie(e,t);return n<0?void 0:e[n][1]};const le=function(t){return ie(this.__data__,t)>-1};const ae=function(t,e){var n=this.__data__,i=ie(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function ce(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ce.prototype.clear=ne,ce.prototype.delete=re,ce.prototype.get=se,ce.prototype.has=le,ce.prototype.set=ae;const ue=ce;const de=j(d,"Map");const he=function(){this.size=0,this.__data__={hash:new ee,map:new(de||ue),string:new ee}};const pe=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const me=function(t,e){var n=t.__data__;return pe(e)?n["string"==typeof e?"string":"hash"]:n.map};const fe=function(t){var e=me(this,t).delete(t);return this.size-=e?1:0,e};const ge=function(t){return me(this,t).get(t)};const ve=function(t){return me(this,t).has(t)};const ye=function(t,e){var n=me(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function we(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}we.prototype.clear=he,we.prototype.delete=fe,we.prototype.get=ge,we.prototype.has=ve,we.prototype.set=ye;const be=we;function xe(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=t.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(xe.Cache||be),n}xe.Cache=be;const _e=xe;var Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/\\(\\)?/g;const Ee=function(t){var e=_e(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ce,(function(t,n,i,o){e.push(i?o.replace(Ie,"$1"):n||t)})),e}));const Re=function(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o};var Te=h?h.prototype:void 0,Se=Te?Te.toString:void 0;const Oe=function t(e){if("string"==typeof e)return e;if(it(e))return Re(e,t)+"";if(At(e))return Se?Se.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};const Le=function(t){return null==t?"":Oe(t)};const Pe=function(t,e){return it(t)?t:Kt(t,e)?[t]:Ee(Le(t))};const Me=function(t){if("string"==typeof t||At(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};const De=function(t,e){for(var n=0,i=(e=Pe(e,t)).length;null!=t&&n<i;)t=t[Me(e[n++])];return n&&n==i?t:void 0};const Ae=function(t,e,n){"__proto__"==e&&B?B(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var ke=Object.prototype.hasOwnProperty;const Fe=function(t,e,n){var i=t[e];ke.call(t,e)&&U(i,n)&&(void 0!==n||e in t)||Ae(t,e,n)};const ze=function(t,e,n,i){if(!_(t))return t;for(var o=-1,r=(e=Pe(e,t)).length,s=r-1,l=t;null!=l&&++o<r;){var a=Me(e[o]),c=n;if("__proto__"===a||"constructor"===a||"prototype"===a)return t;if(o!=s){var u=l[a];void 0===(c=i?i(u,a,l):void 0)&&(c=_(u)?u:G(e[o+1])?[]:{})}Fe(l,a,c),l=l[a]}return t};const je=function(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var s=e[i],l=De(t,s);n(l,s)&&ze(r,Pe(s,t),l)}return r};const Be=function(t,e){return null!=t&&e in Object(t)};const Ze=function(t,e,n){for(var i=-1,o=(e=Pe(e,t)).length,r=!1;++i<o;){var s=Me(e[i]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}return r||++i!=o?r:!!(o=null==t?0:t.length)&&K(o)&&G(s,o)&&(it(t)||nt(t))};const He=function(t,e){return null!=t&&Ze(t,e,Be)};const Ne=function(t,e){return je(t,e,(function(e,n){return He(t,n)}))};const We=function(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t};var Ue=h?h.isConcatSpreadable:void 0;const Ke=function(t){return it(t)||nt(t)||!!(Ue&&t&&t[Ue])};const qe=function t(e,n,i,o,r){var s=-1,l=e.length;for(i||(i=Ke),r||(r=[]);++s<l;){var a=e[s];n>0&&i(a)?n>1?t(a,n-1,i,o,r):We(r,a):o||(r[r.length]=a)}return r};const Ve=function(t){return(null==t?0:t.length)?qe(t,1):[]};const Ge=function(t){return N(l(t,void 0,Ve),t+"")}((function(t,e){return null==t?{}:Ne(t,e)}));var Ye=n(234),$e=n.n(Ye),Xe=n(835),Je=n.n(Xe);class Qe{constructor(t,e,n){this.document=t,this.options=e,this.model=n,this._selected=!1,this.title=this.getTitleDetails(n.title)}getTitleDetails(t){return t?t.replace(/<(?!\s*br\s*\/?)[^>]+>/gi,""):""}init(){let e=!1,n=null;this.title&&this.options.showLabels&&["always","hover"].includes(this.options.showLabels)&&(e=!0);const i=this.document.createElement("div");let o=this.document.createElement("div");const r=this.getLinkElement();let s=null,l=null;return this.options.lightbox&&e&&r?(n=r,n.classList.add("button"),s=o,l=r):this.options.lightbox&&e&&!r?(n=this.document.createElement("div"),this.options.activable?(l=n,n.classList.add("button"),s=o):s=i):this.options.lightbox&&!e?s=i:!this.options.lightbox&&e&&r?(o=this.getLinkElement(),n=r,n.classList.add("button"),l=i):this.options.lightbox||!e||r?this.options.lightbox||e||!r||(o=r,l=r):(n=this.document.createElement("div"),this.options.activable&&(l=i,n.classList.add("button"))),s&&(s.classList.add("zoomable"),s.addEventListener("click",(()=>{const t=new CustomEvent("zoom",{detail:this});this._element.dispatchEvent(t)}))),l&&(l.classList.add("activable"),l.addEventListener("click",(t=>{const e=new CustomEvent("activate",{detail:{item:this,clickEvent:t}});this._element.dispatchEvent(e)}))),o.style.backgroundSize=this.model.backgroundSize||"cover",o.style.backgroundPosition=this.model.backgroundPosition||"center",o.classList.add("image"),i.classList.add("figure"),i.appendChild(o),this.model.color&&(i.style.backgroundColor=this.model.color+"11"),this._element=i,this._image=o,n&&(n.innerHTML=this.title,n.classList.add("title"),"hover"===this.options.showLabels&&n.classList.add("hover"),i.appendChild(n)),this.options.selectable&&(this.model.selected&&this.select(),this._selectBtn=this.document.createElement("div"),this._selectBtn.appendChild(t(this.document,"natural-gallery-icon-select")),this._selectBtn.classList.add("selectBtn"),this._selectBtn.addEventListener("click",(t=>{t.stopPropagation(),this.toggleSelect();const e=new CustomEvent("select",{detail:this});this._element.dispatchEvent(e)})),this._element.appendChild(this._selectBtn)),this.style(),i}style(){this._element&&(this._element.style.width=String(this.width+"px"),this._element.style.height=String(this.height+"px"),this._element.style.marginBottom=String(this.options.gap+"px"),this.last?this._element.style.marginRight="0":this._element.style.marginRight=String(this.options.gap+"px"))}loadImage(){const t=this.document.createElement("img");t.setAttribute("src",this.model.thumbnailSrc),this._image.style.backgroundImage="url("+this.model.thumbnailSrc+")",t.addEventListener("load",(()=>{this._element.classList.add("loaded")})),t.addEventListener("error",(()=>{this._element.classList.add("errored")}))}toggleSelect(){this._selected?this.unselect():this.select()}select(){this._selected=!0,this._element.classList.add("selected")}unselect(){this._selected=!1,this._element.classList.remove("selected")}getLinkElement(){if(this.model.link){const t=this.document.createElement("a");return t.setAttribute("href",this.model.link),t.classList.add("link"),this.model.linkTarget&&t.setAttribute("target",this.model.linkTarget),t}return null}remove(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)}get last(){return this._last}set last(t){this._last=t}get row(){return this._row}set row(t){this._row=t}get height(){return this._height}set height(t){this._height=t}get width(){return this._width}set width(t){this._width=t}get enlargedWidth(){return this.model.enlargedWidth}get enlargedHeight(){return this.model.enlargedHeight}get selected(){return this._selected}get element(){return this._element}}class tn{constructor(t,e,n,i){this.elementRef=t,this.photoswipeElementRef=n,this.scrollElementRef=i,this.options={gap:3,rowsPerPage:0,showLabels:"hover",lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:null,ssr:{galleryWidth:480}},this.photoswipeDefaultOptions={bgOpacity:.85,showHideOpacity:!1},this.bodyElementRef=null,this.scrollBufferedItems=[],this.requiredItems=0,this.old_scroll_top=0,this.photoswipeCollection=[],this.nextButton=null,this._collection=[],this._visibleCollection=[],this.document=this.elementRef.ownerDocument,this.options=St(e,this.options),this.options.lightbox&&!this.photoswipeElementRef&&console.error("Lightbox option is set to true, but no PhotoSwipe reference is given"),this.flushBufferedItems=Nt((()=>{this.scrollBufferedItems.forEach((t=>{t.loadImage(),this.dispatchEvent("item-displayed",t.model)})),this.scrollBufferedItems=[],this.requiredItems&&(this.dispatchEvent("pagination",{offset:this.collection.length,limit:this.requiredItems}),this.requiredItems=0)}),500,{leading:!1,trailing:!0})}get collection(){return this._collection}get visibleCollection(){return this._visibleCollection}get selectedItems(){return this.visibleCollection.filter((t=>t.selected)).map((t=>t.model))}get width(){var t,e,n;return Math.floor(null!==(n=null===(e=(t=this.elementRef).getBoundingClientRect)||void 0===e?void 0:e.call(t).width)&&void 0!==n?n:this.options.ssr.galleryWidth)}get collectionLength(){return this.collection.length}get visibleCollectionLength(){return this.visibleCollection.length}init(){var e;this.elementRef.classList.add("natural-gallery-js"),this.nextButton=this.document.createElement("div"),this.nextButton.classList.add("natural-gallery-next"),this.nextButton.appendChild(t(this.document,"natural-gallery-icon-next")),this.nextButton.style.display="none",this.nextButton.addEventListener("click",(t=>{t.preventDefault(),this.onPageAdd()})),this.bodyElementRef=this.document.createElement("div"),this.bodyElementRef.classList.add("natural-gallery-body"),this.extendToFreeViewport();const n=this.document.createElement("iframe");this.elementRef.appendChild(n);const i=Nt((()=>this.startResize()),500,{leading:!0,trailing:!1}),o=Nt((()=>this.endResize()),500,{leading:!1,trailing:!0});null===(e=n.contentWindow)||void 0===e||e.addEventListener("resize",(()=>{o(),i()})),this.elementRef.appendChild(this.bodyElementRef),this.elementRef.appendChild(this.nextButton),this.options.rowsPerPage||this.bindScroll(this.scrollElementRef||this.document),this.initItems()}addItems(t){if(t.constructor!==Array||!t.length)return;const e=this.collection.length===this.visibleCollection.length;t.forEach((t=>{const e=Ge(this.options,["lightbox","selectable","activable","gap","showLabels"]),n=new Qe(this.document,e,t);this._collection.push(n),this.photoswipeElementRef&&this.photoswipeCollection.push(this.getPhotoswipeItem(n))})),e&&this.bodyElementRef&&this.onPageAdd()}selectVisibleItems(){return this.visibleCollection.forEach((t=>t.select())),this.selectedItems}unselectAllItems(){this.visibleCollection.forEach((t=>t.unselect()))}addEventListener(t,e){this.elementRef.addEventListener(t,e),"pagination"===t&&this.bodyElementRef&&this.requestItems()}clear(){this.empty(),this.requestItems()}getOptions(){return this.options}setItems(t){this.empty(),this.addItems(t)}initItems(){if(!this.collection.length)return void this.requestItems();const t=this.getEstimatedRowsPerPage(),e=t*this.getEstimatedColumnsPerRow(),n=this.collection.slice(0,e);this.organizeItems(n,0,t),n.forEach((t=>this.addItemToDOM(t))),this.scrollBufferedItems=n;const i=this.collection.slice(this.visibleCollection.length),o=i.length-e;this.requiredItems=Math.min(o,i.length,0),this.flushBufferedItems(),this.updateNextButtonVisibility()}requestItems(){const t=this.getEstimatedColumnsPerRow()*this.getRowsPerPage()+1;this.dispatchEvent("pagination",{offset:this.collection.length,limit:t})}getRowsPerPage(){if(this.options.rowsPerPage>0)return this.options.rowsPerPage;const t=this.getEstimatedRowsPerPage();return t<this.options.minRowsAtStart?this.options.minRowsAtStart:t}addItemToDOM(t,e=this.bodyElementRef){if(!e)throw new Error("Gallery not initialized");this.visibleCollection.push(t),e.appendChild(t.init()),this.scrollBufferedItems.push(t),this.requiredItems++,this.dispatchEvent("item-added-to-dom",t.model),t.element.addEventListener("select",(()=>{this.dispatchEvent("select",this.visibleCollection.filter((t=>t.selected)).map((t=>t.model)))})),t.element.addEventListener("activate",(t=>{this.dispatchEvent("activate",{model:t.detail.item.model,clickEvent:t.detail.clickEvent})})),t.element.addEventListener("zoom",(t=>{this.openPhotoSwipe(t.detail)}))}updateNextButtonVisibility(){this.nextButton&&(this.visibleCollection.length===this.collection.length?this.nextButton.style.display="none":this.nextButton.style.display="block")}extendToFreeViewport(){this.options.rowsPerPage||(this.elementRef.style.minHeight=this.getGalleryVisibleHeight()+10+"px")}getGalleryVisibleHeight(){return this.document.defaultView?this.document.defaultView.innerHeight-this.elementRef.offsetTop:0}startResize(){var t;null===(t=this.bodyElementRef)||void 0===t||t.classList.add("resizing")}endResize(){var t;null===(t=this.bodyElementRef)||void 0===t||t.classList.remove("resizing")}openPhotoSwipe(t){if(!this.options.lightbox)return;if(!this.photoswipeElementRef)return void console.error("Lightbox option is set to true, but no PhotoSwipe reference is given");let e={index:this.collection.findIndex((e=>e===t)),loop:!1};e=Object.assign({},this.photoswipeDefaultOptions,this.options.photoSwipeOptions,e);const n=new($e())(this.photoswipeElementRef,Je(),this.photoswipeCollection,e);n.init(),n.listen("beforeChange",(t=>{1===t&&n.getCurrentIndex()===this.visibleCollection.length&&this.onPageAdd()})),this.dispatchEvent("zoom",{item:t.model,photoswipe:n})}getPhotoswipeItem(t){return{src:t.model.enlargedSrc,w:t.model.enlargedWidth,h:t.model.enlargedHeight,title:t.title}}dispatchEvent(t,e){const n=new CustomEvent(t,{detail:e});this.elementRef.dispatchEvent(n)}empty(){this.bodyElementRef&&(this.bodyElementRef.innerHTML=""),this._visibleCollection=[],this.photoswipeCollection=[],this._collection=[]}bindScroll(t){const e=t,n=t instanceof Document?t.documentElement:t,i=Nt((()=>this.elementRef.classList.add("scrolling")),300,{leading:!0,trailing:!1}),o=Nt((()=>this.elementRef.classList.remove("scrolling")),300,{leading:!1,trailing:!0});e.addEventListener("scroll",(()=>{i(),o();const t=this.elementRef.offsetTop+this.elementRef.offsetHeight+this.options.infiniteScrollOffset,e=n.scrollTop-(n.clientTop||0),r=n.clientHeight,s=e-this.old_scroll_top;this.old_scroll_top=e,s>0&&e+r>=t&&this.onScroll()}))}}class en extends tn{onScroll(){this.addRows(1)}onPageAdd(){this.addRows(this.getRowsPerPage())}addRows(t){const e=this.visibleCollection.length,n=this.visibleCollection.length?this.visibleCollection[e-1].row+1:0,i=n+t-1,o=this.collection.slice(e);this.organizeItems(o,n,i);o.filter((t=>t.row<=i)).forEach((t=>this.addItemToDOM(t))),this.flushBufferedItems(),this.updateNextButtonVisibility()}endResize(){super.endResize(),this.visibleCollection.length&&this.organizeItems(this.visibleCollection)}}class nn extends en{constructor(t,e,n,i){if(super(t,e,n,i),!e.rowHeight||e.rowHeight<=0)throw new Error("Option.rowHeight must be positive")}static organizeItems(t,e,n=0,i=null,o=null){o||(o=n||0);const r=t.options;for(let s=1;s<=e.length;s++){const l=e.slice(0,s);if(this.getRowWidth(l.map((t=>t.model)),r.rowHeight,r.gap,r.ratioLimit)>=t.width){this.computeSizes(l,t.width,r.gap,o,null,r.ratioLimit);const a=o+1;(null===i||a<=i)&&nn.organizeItems(t,e.slice(s),n,i,a);break}if(s===e.length){this.computeSizes(l,null,r.gap,o,r.rowHeight,r.ratioLimit);break}}}static computeSizes(t,n,i,o,r=null,s){const l=t.map((t=>t.model)),a=n?this.getRowHeight(l,n,i,s):null!=r?r:0,c=(this.getRowWidth(l,a,i,s)-(null!=n?n:0))/t.length,u=n?c:0;let d=0;for(let n=0;n<t.length;n++){const i=t[n];let r=e(i.model,s)*a-u;d+=r-Math.floor(r),r=Math.floor(r),(d>=1||n===t.length-1&&1===Math.round(d))&&(r++,d--),i.width=r,i.height=Math.floor(a),i.row=o,i.last=n===t.length-1,i.style()}}static getRowWidth(t,e,n,i){return n*(t.length-1)+this.getRatios(t,i)*e}static getRowHeight(t,e,n,i){return e/this.getRatios(t,i)-n*(t.length-1)}static getRatios(t,n){return t.reduce(((t,i)=>t+e(i,n)),0)}addRows(t){this.completeLastRow(),super.addRows(t)}organizeItems(t,e,n){nn.organizeItems(this,t,e,n)}endResize(){super.endResize(),this.completeLastRow(),this.flushBufferedItems()}getEstimatedColumnsPerRow(){let t=1;return this.options.ratioLimit&&this.options.ratioLimit.min&&(t=this.options.ratioLimit.min),Math.ceil((1/t*this.width+this.options.gap)/(this.options.rowHeight+this.options.gap))}getEstimatedRowsPerPage(){return Math.ceil(this.getGalleryVisibleHeight()/(this.options.rowHeight+this.options.gap))+1}completeLastRow(){if(!this.visibleCollection.length)return;const t=this.visibleCollection[this.visibleCollection.length-1].row,e=this.visibleCollection.filter((e=>e.row===t)).length,n=this.collection.slice(this.visibleCollection.length-e);this.organizeItems(n,n[0].row,n[0].row);n.slice(e).filter((t=>t.row<=n[0].row)).forEach((t=>this.addItemToDOM(t)))}}class on{constructor(t,e){this.options=e,this.collection=[],this._elementRef=t.createElement("div"),this._elementRef.classList.add("column"),this._elementRef.style.marginRight=this.options.gap+"px",this._elementRef.style.width=this.options.width+"px"}addItem(t){this.collection.push(t)}get height(){return this._elementRef.offsetHeight}get length(){return this.collection.length}get elementRef(){return this._elementRef}}class rn extends tn{constructor(t,e,n,i){if(super(t,e,n,i),this.columns=[],!e.columnWidth||e.columnWidth<=0)throw new Error("Option.columnWidth must be positive")}static organizeItems(t,n,i=0,o=null){const r=t.getEstimatedColumnsPerRow(),s=t.getColumnWidth();let l=o?r*(o-i+1):n.length;l=l>n.length?n.length:l;for(let i=0;i<l;i++){const o=n[i],r=e(o.model,t.options.ratioLimit);o.last=!0,o.width=Math.floor(s),o.height=o.width/r,o.style()}}init(){if(super.init(),!this.options.infiniteScrollOffset){let t=.5;this.options.ratioLimit&&this.options.ratioLimit.min&&(t=this.options.ratioLimit.min);const e=this.getColumnWidth();this.options.infiniteScrollOffset=-1*e/t}}organizeItems(t,e,n){rn.organizeItems(this,t,e,n)}initItems(){this.addColumns(),super.initItems()}onScroll(){this.addUntilFill()}onPageAdd(){this.addUntilFill()}getEstimatedColumnsPerRow(){return Math.ceil((this.width-this.options.gap)/(this.options.columnWidth+this.options.gap))}getEstimatedRowsPerPage(){let t=1.75;this.options.ratioLimit&&this.options.ratioLimit.max&&(t=this.options.ratioLimit.max);const e=this.getColumnWidth()/t;return Math.ceil(this.getGalleryVisibleHeight()/e)}addUntilFill(){do{this.addItemsToDom(1)}while(this.viewPortIsNotFilled()&&this.visibleCollection.length<this.collection.length)}addItemToDOM(t){const e=this.getShortestColumn();e.addItem(t),super.addItemToDOM(t,e.elementRef)}endResize(){super.endResize(),this.visibleCollection.length&&(this.visibleCollection.length=0,this.addColumns(),this.addUntilFill())}addColumns(){if(!this.bodyElementRef)throw new Error("Gallery not initialized");this.bodyElementRef.innerHTML="",this.columns=[];const t=this.getColumnWidth();for(let e=0;e<this.getEstimatedColumnsPerRow();e++){const e=new on(this.document,{width:t,gap:this.options.gap});this.columns.push(e),this.bodyElementRef.appendChild(e.elementRef)}}empty(){super.empty(),this.addColumns()}viewPortIsNotFilled(){return this.columns.some((t=>t.elementRef.getBoundingClientRect().bottom<this.document.documentElement.clientHeight))}addItemsToDom(t){const e=this.visibleCollection.length,n=this.visibleCollection.length?e:0,i=n+t-1;this.organizeItems(this.collection.slice(e),n,i);for(let t=e;t<this.collection.length;t++){const e=this.collection[t];if(!(t<=i))break;this.addItemToDOM(e)}this.flushBufferedItems(),this.updateNextButtonVisibility()}getColumnWidth(){const t=this.getEstimatedColumnsPerRow();return Math.floor((this.width-(t-1)*this.options.gap)/t)}getShortestColumn(){return this.columns.reduce(((t,e)=>t?e.height<t.height?e:t:e))}}class sn extends en{constructor(t,e,n,i){if(super(t,e,n,i),!e.itemsPerRow||e.itemsPerRow<=0)throw new Error("Option.itemsPerRow must be positive")}static organizeItems(t,e,n=0,i=null){const o=t.getItemSideSize();let r=i?t.options.itemsPerRow*(i-n+1):e.length;r=r>e.length?e.length:r;for(let i=0;i<r;i++){const r=e[i];r.width=Math.floor(o),r.height=Math.floor(o),r.last=i%t.options.itemsPerRow==t.options.itemsPerRow-1,r.row=Math.floor(i/t.options.itemsPerRow)+n,r.style()}}getEstimatedColumnsPerRow(){return this.options.itemsPerRow}getEstimatedRowsPerPage(){return Math.ceil(this.getGalleryVisibleHeight()/this.getItemSideSize())}getItemSideSize(){const t=this.getEstimatedColumnsPerRow();return(this.width-(t-1)*this.options.gap)/t}organizeItems(t,e,n){sn.organizeItems(this,t,e,n)}}})();var o=i.Rk,r=i.U8,s=i.bK;export{o as Masonry,r as Natural,s as Square};
//# sourceMappingURL=natural-gallery-esm.js.map