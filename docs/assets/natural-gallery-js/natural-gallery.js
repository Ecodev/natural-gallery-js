var qs=Object.defineProperty,$s=Object.defineProperties;var Ks=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var to=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable;var Zt=Math.pow,ze=(s,t,e)=>t in s?qs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,st=(s,t)=>{for(var e in t||(t={}))to.call(t,e)&&ze(s,e,t[e]);if(Re)for(var e of Re(t))eo.call(t,e)&&ze(s,e,t[e]);return s},De=(s,t)=>$s(s,Ks(t));var io=typeof global=="object"&&global&&global.Object===Object&&global,gt=io;var so=typeof self=="object"&&self&&self.Object===Object&&self,oo=gt||so||Function("return this")(),y=oo;var ro=y.Symbol,v=ro;var Fe=Object.prototype,no=Fe.hasOwnProperty,ao=Fe.toString,ot=v?v.toStringTag:void 0;function lo(s){var t=no.call(s,ot),e=s[ot];try{s[ot]=void 0;var i=!0}catch(r){}var o=ao.call(s);return i&&(t?s[ot]=e:delete s[ot]),o}var Me=lo;var po=Object.prototype,ho=po.toString;function co(s){return ho.call(s)}var Ge=co;var uo="[object Null]",mo="[object Undefined]",He=v?v.toStringTag:void 0;function fo(s){return s==null?s===void 0?mo:uo:He&&He in Object(s)?Me(s):Ge(s)}var P=fo;function go(s){return s!=null&&typeof s=="object"}var _=go;var Io="[object Symbol]";function Ao(s){return typeof s=="symbol"||_(s)&&P(s)==Io}var B=Ao;function Co(s,t){for(var e=-1,i=s==null?0:s.length,o=Array(i);++e<i;)o[e]=t(s[e],e,s);return o}var Ze=Co;var xo=Array.isArray,C=xo;var yo=1/0,Xe=v?v.prototype:void 0,Ne=Xe?Xe.toString:void 0;function We(s){if(typeof s=="string")return s;if(C(s))return Ze(s,We)+"";if(B(s))return Ne?Ne.call(s):"";var t=s+"";return t=="0"&&1/s==-yo?"-0":t}var ke=We;var bo=/\s/;function vo(s){for(var t=s.length;t--&&bo.test(s.charAt(t)););return t}var Ue=vo;var _o=/^\s+/;function wo(s){return s&&s.slice(0,Ue(s)+1).replace(_o,"")}var Ve=wo;function So(s){var t=typeof s;return s!=null&&(t=="object"||t=="function")}var f=So;var Qe=NaN,To=/^[-+]0x[0-9a-f]+$/i,Po=/^0b[01]+$/i,Oo=/^0o[0-7]+$/i,Eo=parseInt;function Lo(s){if(typeof s=="number")return s;if(B(s))return Qe;if(f(s)){var t=typeof s.valueOf=="function"?s.valueOf():s;s=f(t)?t+"":t}if(typeof s!="string")return s===0?s:+s;s=Ve(s);var e=Po.test(s);return e||Oo.test(s)?Eo(s.slice(2),e?2:8):To.test(s)?Qe:+s}var Xt=Lo;function Bo(s){return s}var It=Bo;var Ro="[object AsyncFunction]",zo="[object Function]",Do="[object GeneratorFunction]",Fo="[object Proxy]";function Mo(s){if(!f(s))return!1;var t=P(s);return t==zo||t==Do||t==Ro||t==Fo}var W=Mo;var Go=y["__core-js_shared__"],At=Go;var Je=function(){var s=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function Ho(s){return!!Je&&Je in s}var je=Ho;var Zo=Function.prototype,Xo=Zo.toString;function No(s){if(s!=null){try{return Xo.call(s)}catch(t){}try{return s+""}catch(t){}}return""}var Ye=No;var Wo=/[\\^$.*+?()[\]{}|]/g,ko=/^\[object .+?Constructor\]$/,Uo=Function.prototype,Vo=Object.prototype,Qo=Uo.toString,Jo=Vo.hasOwnProperty,jo=RegExp("^"+Qo.call(Jo).replace(Wo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yo(s){if(!f(s)||je(s))return!1;var t=W(s)?jo:ko;return t.test(Ye(s))}var qe=Yo;function qo(s,t){return s==null?void 0:s[t]}var $e=qo;function $o(s,t){var e=$e(s,t);return qe(e)?e:void 0}var k=$o;var Ke=Object.create,Ko=function(){function s(){}return function(t){if(!f(t))return{};if(Ke)return Ke(t);s.prototype=t;var e=new s;return s.prototype=void 0,e}}(),ti=Ko;function tr(s,t,e){switch(e.length){case 0:return s.call(t);case 1:return s.call(t,e[0]);case 2:return s.call(t,e[0],e[1]);case 3:return s.call(t,e[0],e[1],e[2])}return s.apply(t,e)}var Ct=tr;function er(s,t){var e=-1,i=s.length;for(t||(t=Array(i));++e<i;)t[e]=s[e];return t}var ei=er;var ir=800,sr=16,or=Date.now;function rr(s){var t=0,e=0;return function(){var i=or(),o=sr-(i-e);if(e=i,o>0){if(++t>=ir)return arguments[0]}else t=0;return s.apply(void 0,arguments)}}var ii=rr;function nr(s){return function(){return s}}var si=nr;var ar=function(){try{var s=k(Object,"defineProperty");return s({},"",{}),s}catch(t){}}(),U=ar;var lr=U?function(s,t){return U(s,"toString",{configurable:!0,enumerable:!1,value:si(t),writable:!0})}:It,oi=lr;var dr=ii(oi),xt=dr;var pr=9007199254740991,hr=/^(?:0|[1-9]\d*)$/;function cr(s,t){var e=typeof s;return t=t==null?pr:t,!!t&&(e=="number"||e!="symbol"&&hr.test(s))&&s>-1&&s%1==0&&s<t}var R=cr;function ur(s,t,e){t=="__proto__"&&U?U(s,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):s[t]=e}var V=ur;function mr(s,t){return s===t||s!==s&&t!==t}var z=mr;var fr=Object.prototype,gr=fr.hasOwnProperty;function Ir(s,t,e){var i=s[t];(!(gr.call(s,t)&&z(i,e))||e===void 0&&!(t in s))&&V(s,t,e)}var yt=Ir;function Ar(s,t,e,i){var o=!e;e||(e={});for(var r=-1,n=t.length;++r<n;){var a=t[r],l=i?i(e[a],s[a],a,e,s):void 0;l===void 0&&(l=s[a]),o?V(e,a,l):yt(e,a,l)}return e}var ri=Ar;var ni=Math.max;function Cr(s,t,e){return t=ni(t===void 0?s.length-1:t,0),function(){for(var i=arguments,o=-1,r=ni(i.length-t,0),n=Array(r);++o<r;)n[o]=i[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=i[o];return a[t]=e(n),Ct(s,this,a)}}var bt=Cr;function xr(s,t){return xt(bt(s,t,It),s+"")}var vt=xr;var yr=9007199254740991;function br(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=yr}var Q=br;function vr(s){return s!=null&&Q(s.length)&&!W(s)}var J=vr;function _r(s,t,e){if(!f(e))return!1;var i=typeof t;return(i=="number"?J(e)&&R(t,e.length):i=="string"&&t in e)?z(e[t],s):!1}var ai=_r;function wr(s){return vt(function(t,e){var i=-1,o=e.length,r=o>1?e[o-1]:void 0,n=o>2?e[2]:void 0;for(r=s.length>3&&typeof r=="function"?(o--,r):void 0,n&&ai(e[0],e[1],n)&&(r=o<3?void 0:r,o=1),t=Object(t);++i<o;){var a=e[i];a&&s(t,a,i,r)}return t})}var li=wr;var Sr=Object.prototype;function Tr(s){var t=s&&s.constructor,e=typeof t=="function"&&t.prototype||Sr;return s===e}var _t=Tr;function Pr(s,t){for(var e=-1,i=Array(s);++e<s;)i[e]=t(e);return i}var di=Pr;var Or="[object Arguments]";function Er(s){return _(s)&&P(s)==Or}var Nt=Er;var pi=Object.prototype,Lr=pi.hasOwnProperty,Br=pi.propertyIsEnumerable,Rr=Nt(function(){return arguments}())?Nt:function(s){return _(s)&&Lr.call(s,"callee")&&!Br.call(s,"callee")},O=Rr;function zr(){return!1}var hi=zr;var mi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ci=mi&&typeof module=="object"&&module&&!module.nodeType&&module,Dr=ci&&ci.exports===mi,ui=Dr?y.Buffer:void 0,Fr=ui?ui.isBuffer:void 0,Mr=Fr||hi,wt=Mr;var Gr="[object Arguments]",Hr="[object Array]",Zr="[object Boolean]",Xr="[object Date]",Nr="[object Error]",Wr="[object Function]",kr="[object Map]",Ur="[object Number]",Vr="[object Object]",Qr="[object RegExp]",Jr="[object Set]",jr="[object String]",Yr="[object WeakMap]",qr="[object ArrayBuffer]",$r="[object DataView]",Kr="[object Float32Array]",tn="[object Float64Array]",en="[object Int8Array]",sn="[object Int16Array]",on="[object Int32Array]",rn="[object Uint8Array]",nn="[object Uint8ClampedArray]",an="[object Uint16Array]",ln="[object Uint32Array]",g={};g[Kr]=g[tn]=g[en]=g[sn]=g[on]=g[rn]=g[nn]=g[an]=g[ln]=!0;g[Gr]=g[Hr]=g[qr]=g[Zr]=g[$r]=g[Xr]=g[Nr]=g[Wr]=g[kr]=g[Ur]=g[Vr]=g[Qr]=g[Jr]=g[jr]=g[Yr]=!1;function dn(s){return _(s)&&Q(s.length)&&!!g[P(s)]}var fi=dn;function pn(s){return function(t){return s(t)}}var gi=pn;var Ii=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rt=Ii&&typeof module=="object"&&module&&!module.nodeType&&module,hn=rt&&rt.exports===Ii,Wt=hn&&gt.process,cn=function(){try{var s=rt&&rt.require&&rt.require("util").types;return s||Wt&&Wt.binding&&Wt.binding("util")}catch(t){}}(),kt=cn;var Ai=kt&&kt.isTypedArray,un=Ai?gi(Ai):fi,St=un;var mn=Object.prototype,fn=mn.hasOwnProperty;function gn(s,t){var e=C(s),i=!e&&O(s),o=!e&&!i&&wt(s),r=!e&&!i&&!o&&St(s),n=e||i||o||r,a=n?di(s.length,String):[],l=a.length;for(var d in s)(t||fn.call(s,d))&&!(n&&(d=="length"||o&&(d=="offset"||d=="parent")||r&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||R(d,l)))&&a.push(d);return a}var Ci=gn;function In(s,t){return function(e){return s(t(e))}}var xi=In;function An(s){var t=[];if(s!=null)for(var e in Object(s))t.push(e);return t}var yi=An;var Cn=Object.prototype,xn=Cn.hasOwnProperty;function yn(s){if(!f(s))return yi(s);var t=_t(s),e=[];for(var i in s)i=="constructor"&&(t||!xn.call(s,i))||e.push(i);return e}var bi=yn;function bn(s){return J(s)?Ci(s,!0):bi(s)}var Tt=bn;var vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_n=/^\w*$/;function wn(s,t){if(C(s))return!1;var e=typeof s;return e=="number"||e=="symbol"||e=="boolean"||s==null||B(s)?!0:_n.test(s)||!vn.test(s)||t!=null&&s in Object(t)}var vi=wn;var Sn=k(Object,"create"),E=Sn;function Tn(){this.__data__=E?E(null):{},this.size=0}var _i=Tn;function Pn(s){var t=this.has(s)&&delete this.__data__[s];return this.size-=t?1:0,t}var wi=Pn;var On="__lodash_hash_undefined__",En=Object.prototype,Ln=En.hasOwnProperty;function Bn(s){var t=this.__data__;if(E){var e=t[s];return e===On?void 0:e}return Ln.call(t,s)?t[s]:void 0}var Si=Bn;var Rn=Object.prototype,zn=Rn.hasOwnProperty;function Dn(s){var t=this.__data__;return E?t[s]!==void 0:zn.call(t,s)}var Ti=Dn;var Fn="__lodash_hash_undefined__";function Mn(s,t){var e=this.__data__;return this.size+=this.has(s)?0:1,e[s]=E&&t===void 0?Fn:t,this}var Pi=Mn;function j(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var i=s[t];this.set(i[0],i[1])}}j.prototype.clear=_i;j.prototype.delete=wi;j.prototype.get=Si;j.prototype.has=Ti;j.prototype.set=Pi;var Ut=j;function Gn(){this.__data__=[],this.size=0}var Oi=Gn;function Hn(s,t){for(var e=s.length;e--;)if(z(s[e][0],t))return e;return-1}var D=Hn;var Zn=Array.prototype,Xn=Zn.splice;function Nn(s){var t=this.__data__,e=D(t,s);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():Xn.call(t,e,1),--this.size,!0}var Ei=Nn;function Wn(s){var t=this.__data__,e=D(t,s);return e<0?void 0:t[e][1]}var Li=Wn;function kn(s){return D(this.__data__,s)>-1}var Bi=kn;function Un(s,t){var e=this.__data__,i=D(e,s);return i<0?(++this.size,e.push([s,t])):e[i][1]=t,this}var Ri=Un;function Y(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var i=s[t];this.set(i[0],i[1])}}Y.prototype.clear=Oi;Y.prototype.delete=Ei;Y.prototype.get=Li;Y.prototype.has=Bi;Y.prototype.set=Ri;var F=Y;var Vn=k(y,"Map"),Pt=Vn;function Qn(){this.size=0,this.__data__={hash:new Ut,map:new(Pt||F),string:new Ut}}var zi=Qn;function Jn(s){var t=typeof s;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?s!=="__proto__":s===null}var Di=Jn;function jn(s,t){var e=s.__data__;return Di(t)?e[typeof t=="string"?"string":"hash"]:e.map}var M=jn;function Yn(s){var t=M(this,s).delete(s);return this.size-=t?1:0,t}var Fi=Yn;function qn(s){return M(this,s).get(s)}var Mi=qn;function $n(s){return M(this,s).has(s)}var Gi=$n;function Kn(s,t){var e=M(this,s),i=e.size;return e.set(s,t),this.size+=e.size==i?0:1,this}var Hi=Kn;function q(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var i=s[t];this.set(i[0],i[1])}}q.prototype.clear=zi;q.prototype.delete=Fi;q.prototype.get=Mi;q.prototype.has=Gi;q.prototype.set=Hi;var nt=q;var ta="Expected a function";function Vt(s,t){if(typeof s!="function"||t!=null&&typeof t!="function")throw new TypeError(ta);var e=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=e.cache;if(r.has(o))return r.get(o);var n=s.apply(this,i);return e.cache=r.set(o,n)||r,n};return e.cache=new(Vt.Cache||nt),e}Vt.Cache=nt;var Zi=Vt;var ea=500;function ia(s){var t=Zi(s,function(i){return e.size===ea&&e.clear(),i}),e=t.cache;return t}var Xi=ia;var sa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oa=/\\(\\)?/g,ra=Xi(function(s){var t=[];return s.charCodeAt(0)===46&&t.push(""),s.replace(sa,function(e,i,o,r){t.push(o?r.replace(oa,"$1"):i||e)}),t}),Ni=ra;function na(s){return s==null?"":ke(s)}var Wi=na;function aa(s,t){return C(s)?s:vi(s,t)?[s]:Ni(Wi(s))}var G=aa;var la=1/0;function da(s){if(typeof s=="string"||B(s))return s;var t=s+"";return t=="0"&&1/s==-la?"-0":t}var $=da;function pa(s,t){t=G(t,s);for(var e=0,i=t.length;s!=null&&e<i;)s=s[$(t[e++])];return e&&e==i?s:void 0}var ki=pa;function ha(s,t){for(var e=-1,i=t.length,o=s.length;++e<i;)s[o+e]=t[e];return s}var Ui=ha;var Vi=v?v.isConcatSpreadable:void 0;function ca(s){return C(s)||O(s)||!!(Vi&&s&&s[Vi])}var Qi=ca;function Ji(s,t,e,i,o){var r=-1,n=s.length;for(e||(e=Qi),o||(o=[]);++r<n;){var a=s[r];t>0&&e(a)?t>1?Ji(a,t-1,e,i,o):Ui(o,a):i||(o[o.length]=a)}return o}var ji=Ji;function ua(s){var t=s==null?0:s.length;return t?ji(s,1):[]}var Yi=ua;function ma(s){return xt(bt(s,void 0,Yi),s+"")}var qi=ma;var fa=xi(Object.getPrototypeOf,Object),Ot=fa;var ga="[object Object]",Ia=Function.prototype,Aa=Object.prototype,$i=Ia.toString,Ca=Aa.hasOwnProperty,xa=$i.call(Object);function ya(s){if(!_(s)||P(s)!=ga)return!1;var t=Ot(s);if(t===null)return!0;var e=Ca.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&$i.call(e)==xa}var Ki=ya;function ba(){this.__data__=new F,this.size=0}var ts=ba;function va(s){var t=this.__data__,e=t.delete(s);return this.size=t.size,e}var es=va;function _a(s){return this.__data__.get(s)}var is=_a;function wa(s){return this.__data__.has(s)}var ss=wa;var Sa=200;function Ta(s,t){var e=this.__data__;if(e instanceof F){var i=e.__data__;if(!Pt||i.length<Sa-1)return i.push([s,t]),this.size=++e.size,this;e=this.__data__=new nt(i)}return e.set(s,t),this.size=e.size,this}var os=Ta;function K(s){var t=this.__data__=new F(s);this.size=t.size}K.prototype.clear=ts;K.prototype.delete=es;K.prototype.get=is;K.prototype.has=ss;K.prototype.set=os;var rs=K;var ds=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ns=ds&&typeof module=="object"&&module&&!module.nodeType&&module,Pa=ns&&ns.exports===ds,as=Pa?y.Buffer:void 0,ls=as?as.allocUnsafe:void 0;function Oa(s,t){if(t)return s.slice();var e=s.length,i=ls?ls(e):new s.constructor(e);return s.copy(i),i}var ps=Oa;var Ea=y.Uint8Array,Qt=Ea;function La(s){var t=new s.constructor(s.byteLength);return new Qt(t).set(new Qt(s)),t}var hs=La;function Ba(s,t){var e=t?hs(s.buffer):s.buffer;return new s.constructor(e,s.byteOffset,s.length)}var cs=Ba;function Ra(s){return typeof s.constructor=="function"&&!_t(s)?ti(Ot(s)):{}}var us=Ra;function za(s,t){return s!=null&&t in Object(s)}var ms=za;function Da(s,t,e){t=G(t,s);for(var i=-1,o=t.length,r=!1;++i<o;){var n=$(t[i]);if(!(r=s!=null&&e(s,n)))break;s=s[n]}return r||++i!=o?r:(o=s==null?0:s.length,!!o&&Q(o)&&R(n,o)&&(C(s)||O(s)))}var fs=Da;function Fa(s,t){return s!=null&&fs(s,t,ms)}var gs=Fa;function Ma(s){return function(t,e,i){for(var o=-1,r=Object(t),n=i(t),a=n.length;a--;){var l=n[s?a:++o];if(e(r[l],l,r)===!1)break}return t}}var Is=Ma;var Ga=Is(),As=Ga;var Ha=function(){return y.Date.now()},Et=Ha;var Za="Expected a function",Xa=Math.max,Na=Math.min;function Wa(s,t,e){var i,o,r,n,a,l,d=0,p=!1,c=!1,u=!0;if(typeof s!="function")throw new TypeError(Za);t=Xt(t)||0,f(e)&&(p=!!e.leading,c="maxWait"in e,r=c?Xa(Xt(e.maxWait)||0,t):r,u="trailing"in e?!!e.trailing:u);function h(A){var L=i,it=o;return i=o=void 0,d=A,n=s.apply(it,L),n}function m(A){return d=A,a=setTimeout(T,t),p?h(A):n}function x(A){var L=A-l,it=A-d,Be=t-L;return c?Na(Be,r-it):Be}function N(A){var L=A-l,it=A-d;return l===void 0||L>=t||L<0||c&&it>=r}function T(){var A=Et();if(N(A))return Le(A);a=setTimeout(T,x(A))}function Le(A){return a=void 0,u&&i?h(A):(i=o=void 0,n)}function js(){a!==void 0&&clearTimeout(a),d=0,i=l=o=a=void 0}function Ys(){return a===void 0?n:Le(Et())}function Ht(){var A=Et(),L=N(A);if(i=arguments,o=this,l=A,L){if(a===void 0)return m(l);if(c)return clearTimeout(a),a=setTimeout(T,t),h(l)}return a===void 0&&(a=setTimeout(T,t)),n}return Ht.cancel=js,Ht.flush=Ys,Ht}var H=Wa;function ka(s,t,e){(e!==void 0&&!z(s[t],e)||e===void 0&&!(t in s))&&V(s,t,e)}var at=ka;function Ua(s){return _(s)&&J(s)}var Cs=Ua;function Va(s,t){if(!(t==="constructor"&&typeof s[t]=="function")&&t!="__proto__")return s[t]}var lt=Va;function Qa(s){return ri(s,Tt(s))}var xs=Qa;function Ja(s,t,e,i,o,r,n){var a=lt(s,e),l=lt(t,e),d=n.get(l);if(d){at(s,e,d);return}var p=r?r(a,l,e+"",s,t,n):void 0,c=p===void 0;if(c){var u=C(l),h=!u&&wt(l),m=!u&&!h&&St(l);p=l,u||h||m?C(a)?p=a:Cs(a)?p=ei(a):h?(c=!1,p=ps(l,!0)):m?(c=!1,p=cs(l,!0)):p=[]:Ki(l)||O(l)?(p=a,O(a)?p=xs(a):(!f(a)||W(a))&&(p=us(l))):c=!1}c&&(n.set(l,p),o(p,l,i,r,n),n.delete(l)),at(s,e,p)}var ys=Ja;function bs(s,t,e,i,o){s!==t&&As(t,function(r,n){if(o||(o=new rs),f(r))ys(s,t,n,e,bs,i,o);else{var a=i?i(lt(s,n),r,n+"",s,t,o):void 0;a===void 0&&(a=r),at(s,n,a)}},Tt)}var Lt=bs;function vs(s,t,e,i,o,r){return f(s)&&f(t)&&(r.set(t,s),Lt(s,t,void 0,vs,r),r.delete(t)),s}var _s=vs;var ja=li(function(s,t,e,i){Lt(s,t,e,i)}),ws=ja;var Ya=vt(function(s){return s.push(void 0,_s),Ct(ws,void 0,s)}),Jt=Ya;function qa(s,t,e,i){if(!f(s))return s;t=G(t,s);for(var o=-1,r=t.length,n=r-1,a=s;a!=null&&++o<r;){var l=$(t[o]),d=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return s;if(o!=n){var p=a[l];d=i?i(p,l,a):void 0,d===void 0&&(d=f(p)?p:R(t[o+1])?[]:{})}yt(a,l,d),a=a[l]}return s}var Ss=qa;function $a(s,t,e){for(var i=-1,o=t.length,r={};++i<o;){var n=t[i],a=ki(s,n);e(a,n)&&Ss(r,G(n,s),a)}return r}var Ts=$a;function Ka(s,t){return Ts(s,t,function(e,i){return gs(s,i)})}var Ps=Ka;var tl=qi(function(s,t){return s==null?{}:Ps(s,t)}),jt=tl;function b(s,t,e){let i=document.createElement(t);return s&&(i.className=s),e&&e.appendChild(i),i}function I(s,t){return s.x=t.x,s.y=t.y,t.id!==void 0&&(s.id=t.id),s}function Fs(s){s.x=Math.round(s.x),s.y=Math.round(s.y)}function Yt(s,t){let e=Math.abs(s.x-t.x),i=Math.abs(s.y-t.y);return Math.sqrt(e*e+i*i)}function ht(s,t){return s.x===t.x&&s.y===t.y}function ut(s,t,e){return Math.min(Math.max(s,t),e)}function ct(s,t,e){let i=`translate3d(${s}px,${t||0}px,0)`;return e!==void 0&&(i+=` scale3d(${e},${e},1)`),i}function X(s,t,e,i){s.style.transform=ct(t,e,i)}var el="cubic-bezier(.4,0,.22,1)";function Ms(s,t,e,i){s.style.transition=t?`${t} ${e}ms ${i||el}`:"none"}function qt(s,t,e){s.style.width=typeof t=="number"?`${t}px`:t,s.style.height=typeof e=="number"?`${e}px`:e}function il(s){Ms(s)}function sl(s){return"decode"in s?s.decode().catch(()=>{}):s.complete?Promise.resolve(s):new Promise((t,e)=>{s.onload=()=>t(s),s.onerror=e})}var w={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function ol(s){return"button"in s&&s.button===1||s.ctrlKey||s.metaKey||s.altKey||s.shiftKey}function rl(s,t,e=document){let i=[];if(s instanceof Element)i=[s];else if(s instanceof NodeList||Array.isArray(s))i=Array.from(s);else{let o=typeof s=="string"?s:t;o&&(i=Array.from(e.querySelectorAll(o)))}return i}function Os(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}var Gs=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{Gs=!0}}))}catch(s){}var $t=class{constructor(){this._pool=[]}add(t,e,i,o){this._toggleListener(t,e,i,o)}remove(t,e,i,o){this._toggleListener(t,e,i,o,!0)}removeAll(){this._pool.forEach(t=>{this._toggleListener(t.target,t.type,t.listener,t.passive,!0,!0)}),this._pool=[]}_toggleListener(t,e,i,o,r,n){if(!t)return;let a=r?"removeEventListener":"addEventListener";e.split(" ").forEach(d=>{if(d){n||(r?this._pool=this._pool.filter(c=>c.type!==d||c.listener!==i||c.target!==t):this._pool.push({target:t,type:d,listener:i,passive:o}));let p=Gs?{passive:o||!1}:!1;t[a](d,i,p)}})}};function Hs(s,t){if(s.getViewportSizeFn){let e=s.getViewportSizeFn(s,t);if(e)return e}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function pt(s,t,e,i,o){let r=0;if(t.paddingFn)r=t.paddingFn(e,i,o)[s];else if(t.padding)r=t.padding[s];else{let n="padding"+s[0].toUpperCase()+s.slice(1);t[n]&&(r=t[n])}return Number(r)||0}function Zs(s,t,e,i){return{x:t.x-pt("left",s,t,e,i)-pt("right",s,t,e,i),y:t.y-pt("top",s,t,e,i)-pt("bottom",s,t,e,i)}}var Kt=class{constructor(t){this.slide=t,this.currZoomLevel=1,this.center={x:0,y:0},this.max={x:0,y:0},this.min={x:0,y:0}}update(t){this.currZoomLevel=t,this.slide.width?(this._updateAxis("x"),this._updateAxis("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}_updateAxis(t){let{pswp:e}=this.slide,i=this.slide[t==="x"?"width":"height"]*this.currZoomLevel,r=pt(t==="x"?"left":"top",e.options,e.viewportSize,this.slide.data,this.slide.index),n=this.slide.panAreaSize[t];this.center[t]=Math.round((n-i)/2)+r,this.max[t]=i>n?Math.round(n-i)+r:this.center[t],this.min[t]=i>n?r:this.center[t]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(t,e){return ut(e,this.max[t],this.min[t])}},Es=4e3,Bt=class{constructor(t,e,i,o){this.pswp=o,this.options=t,this.itemData=e,this.index=i,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(t,e,i){let o={x:t,y:e};this.elementSize=o,this.panAreaSize=i;let r=i.x/o.x,n=i.y/o.y;this.fit=Math.min(1,r<n?r:n),this.fill=Math.min(1,r>n?r:n),this.vFill=Math.min(1,n),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(t){let e=t+"ZoomLevel",i=this.options[e];if(i)return typeof i=="function"?i(this):i==="fill"?this.fill:i==="fit"?this.fit:Number(i)}_getSecondary(){let t=this._parseZoomLevelOption("secondary");return t||(t=Math.min(1,this.fit*3),this.elementSize&&t*this.elementSize.x>Es&&(t=Es/this.elementSize.x),t)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}},te=class{constructor(t,e,i){this.data=t,this.index=e,this.pswp=i,this.isActive=e===i.currIndex,this.currentResolution=0,this.panAreaSize={x:0,y:0},this.pan={x:0,y:0},this.isFirstSlide=this.isActive&&!i.opener.isOpen,this.zoomLevels=new Bt(i.options,t,e,i),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:e}),this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=b("pswp__zoom-wrap","div"),this.holderElement=null,this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.heavyAppended=!1,this.bounds=new Kt(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(t){t&&!this.isActive?this.activate():!t&&this.isActive&&this.deactivate()}append(t){this.holderElement=t,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate())}load(){this.content.load(!1),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){let{pswp:t}=this;this.heavyAppended||!t.opener.isOpen||t.mainScroll.isShifted()||!this.isActive&&!!0||this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this}))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel===this.zoomLevels.initial||!this.isActive?(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize()):(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y))}updateContentSize(t){let e=this.currentResolution||this.zoomLevels.initial;if(!e)return;let i=Math.round(this.width*e)||this.pswp.viewportSize.x,o=Math.round(this.height*e)||this.pswp.viewportSize.y;!this.sizeChanged(i,o)&&!t||this.content.setDisplayedSize(i,o)}sizeChanged(t,e){return t!==this.prevDisplayedWidth||e!==this.prevDisplayedHeight?(this.prevDisplayedWidth=t,this.prevDisplayedHeight=e,!0):!1}getPlaceholderElement(){var t;return(t=this.content.placeholder)===null||t===void 0?void 0:t.element}zoomTo(t,e,i,o){let{pswp:r}=this;if(!this.isZoomable()||r.mainScroll.isShifted())return;r.dispatch("beforeZoomTo",{destZoomLevel:t,centerPoint:e,transitionDuration:i}),r.animations.stopAllPan();let n=this.currZoomLevel;o||(t=ut(t,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(t),this.pan.x=this.calculateZoomToPanOffset("x",e,n),this.pan.y=this.calculateZoomToPanOffset("y",e,n),Fs(this.pan);let a=()=>{this._setResolution(t),this.applyCurrentZoomPan()};i?r.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:a,duration:i,easing:r.options.easing}):a()}toggleZoom(t){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,t,this.pswp.options.zoomAnimationDuration)}setZoomLevel(t){this.currZoomLevel=t,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(t,e,i){if(this.bounds.max[t]-this.bounds.min[t]===0)return this.bounds.center[t];e||(e=this.pswp.getViewportCenterPoint()),i||(i=this.zoomLevels.initial);let r=this.currZoomLevel/i;return this.bounds.correctPan(t,(this.pan[t]-e[t])*r+e[t])}panTo(t,e){this.pan.x=this.bounds.correctPan("x",t),this.pan.y=this.bounds.correctPan("y",e),this.applyCurrentZoomPan()}isPannable(){return!!this.width&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return!!this.width&&this.content.isZoomable()}applyCurrentZoomPan(){this._applyZoomTransform(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),I(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}_applyZoomTransform(t,e,i){i/=this.currentResolution||this.zoomLevels.initial,X(this.container,t,e,i)}calculateSize(){let{pswp:t}=this;I(this.panAreaSize,Zs(t.options,t.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),t.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){let t=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return ct(this.pan.x,this.pan.y,t)}_setResolution(t){t!==this.currentResolution&&(this.currentResolution=t,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}},nl=.35,al=.6,Ls=.4,Bs=.5;function ll(s,t){return s*t/(1-t)}var ee=class{constructor(t){this.gestures=t,this.pswp=t.pswp,this.startPan={x:0,y:0}}start(){this.pswp.currSlide&&I(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){let{p1:t,prevP1:e,dragAxis:i}=this.gestures,{currSlide:o}=this.pswp;if(i==="y"&&this.pswp.options.closeOnVerticalDrag&&o&&o.currZoomLevel<=o.zoomLevels.fit&&!this.gestures.isMultitouch){let r=o.pan.y+(t.y-e.y);if(!this.pswp.dispatch("verticalDrag",{panY:r}).defaultPrevented){this._setPanWithFriction("y",r,al);let n=1-Math.abs(this._getVerticalDragRatio(o.pan.y));this.pswp.applyBgOpacity(n),o.applyCurrentZoomPan()}}else this._panOrMoveMainScroll("x")||(this._panOrMoveMainScroll("y"),o&&(Fs(o.pan),o.applyCurrentZoomPan()))}end(){let{velocity:t}=this.gestures,{mainScroll:e,currSlide:i}=this.pswp,o=0;if(this.pswp.animations.stopAll(),e.isShifted()){let n=(e.x-e.getCurrSlideX())/this.pswp.viewportSize.x;t.x<-Bs&&n<0||t.x<.1&&n<-.5?(o=1,t.x=Math.min(t.x,0)):(t.x>Bs&&n>0||t.x>-.1&&n>.5)&&(o=-1,t.x=Math.max(t.x,0)),e.moveIndexBy(o,!0,t.x)}i&&i.currZoomLevel>i.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this._finishPanGestureForAxis("x"),this._finishPanGestureForAxis("y"))}_finishPanGestureForAxis(t){let{velocity:e}=this.gestures,{currSlide:i}=this.pswp;if(!i)return;let{pan:o,bounds:r}=i,n=o[t],a=this.pswp.bgOpacity<1&&t==="y",d=n+ll(e[t],.995);if(a){let m=this._getVerticalDragRatio(n),x=this._getVerticalDragRatio(d);if(m<0&&x<-Ls||m>0&&x>Ls){this.pswp.close();return}}let p=r.correctPan(t,d);if(n===p)return;let c=p===d?1:.82,u=this.pswp.bgOpacity,h=p-n;this.pswp.animations.startSpring({name:"panGesture"+t,isPan:!0,start:n,end:p,velocity:e[t],dampingRatio:c,onUpdate:m=>{if(a&&this.pswp.bgOpacity<1){let x=1-(p-m)/h;this.pswp.applyBgOpacity(ut(u+(1-u)*x,0,1))}o[t]=Math.floor(m),i.applyCurrentZoomPan()}})}_panOrMoveMainScroll(t){let{p1:e,dragAxis:i,prevP1:o,isMultitouch:r}=this.gestures,{currSlide:n,mainScroll:a}=this.pswp,l=e[t]-o[t],d=a.x+l;if(!l||!n)return!1;if(t==="x"&&!n.isPannable()&&!r)return a.moveTo(d,!0),!0;let{bounds:p}=n,c=n.pan[t]+l;if(this.pswp.options.allowPanToNext&&i==="x"&&t==="x"&&!r){let u=a.getCurrSlideX(),h=a.x-u,m=l>0,x=!m;if(c>p.min[t]&&m){if(p.min[t]<=this.startPan[t])return a.moveTo(d,!0),!0;this._setPanWithFriction(t,c)}else if(c<p.max[t]&&x){if(this.startPan[t]<=p.max[t])return a.moveTo(d,!0),!0;this._setPanWithFriction(t,c)}else if(h!==0){if(h>0)return a.moveTo(Math.max(d,u),!0),!0;if(h<0)return a.moveTo(Math.min(d,u),!0),!0}else this._setPanWithFriction(t,c)}else t==="y"?!a.isShifted()&&p.min.y!==p.max.y&&this._setPanWithFriction(t,c):this._setPanWithFriction(t,c);return!1}_getVerticalDragRatio(t){var e,i;return(t-((e=(i=this.pswp.currSlide)===null||i===void 0?void 0:i.bounds.center.y)!==null&&e!==void 0?e:0))/(this.pswp.viewportSize.y/3)}_setPanWithFriction(t,e,i){let{currSlide:o}=this.pswp;if(!o)return;let{pan:r,bounds:n}=o;if(n.correctPan(t,e)!==e||i){let l=Math.round(e-r[t]);r[t]+=l*(i||nl)}else r[t]=e}},dl=.05,pl=.15;function Rs(s,t,e){return s.x=(t.x+e.x)/2,s.y=(t.y+e.y)/2,s}var ie=class{constructor(t){this.gestures=t,this._startPan={x:0,y:0},this._startZoomPoint={x:0,y:0},this._zoomPoint={x:0,y:0},this._wasOverFitZoomLevel=!1,this._startZoomLevel=1}start(){let{currSlide:t}=this.gestures.pswp;t&&(this._startZoomLevel=t.currZoomLevel,I(this._startPan,t.pan)),this.gestures.pswp.animations.stopAllPan(),this._wasOverFitZoomLevel=!1}change(){let{p1:t,startP1:e,p2:i,startP2:o,pswp:r}=this.gestures,{currSlide:n}=r;if(!n)return;let a=n.zoomLevels.min,l=n.zoomLevels.max;if(!n.isZoomable()||r.mainScroll.isShifted())return;Rs(this._startZoomPoint,e,o),Rs(this._zoomPoint,t,i);let d=1/Yt(e,o)*Yt(t,i)*this._startZoomLevel;if(d>n.zoomLevels.initial+n.zoomLevels.initial/15&&(this._wasOverFitZoomLevel=!0),d<a)if(r.options.pinchToClose&&!this._wasOverFitZoomLevel&&this._startZoomLevel<=n.zoomLevels.initial){let p=1-(a-d)/(a/1.2);r.dispatch("pinchClose",{bgOpacity:p}).defaultPrevented||r.applyBgOpacity(p)}else d=a-(a-d)*pl;else d>l&&(d=l+(d-l)*dl);n.pan.x=this._calculatePanForZoomLevel("x",d),n.pan.y=this._calculatePanForZoomLevel("y",d),n.setZoomLevel(d),n.applyCurrentZoomPan()}end(){let{pswp:t}=this.gestures,{currSlide:e}=t;(!e||e.currZoomLevel<e.zoomLevels.initial)&&!this._wasOverFitZoomLevel&&t.options.pinchToClose?t.close():this.correctZoomPan()}_calculatePanForZoomLevel(t,e){let i=e/this._startZoomLevel;return this._zoomPoint[t]-(this._startZoomPoint[t]-this._startPan[t])*i}correctZoomPan(t){let{pswp:e}=this.gestures,{currSlide:i}=e;if(!(i!=null&&i.isZoomable()))return;this._zoomPoint.x===0&&(t=!0);let o=i.currZoomLevel,r,n=!0;o<i.zoomLevels.initial?r=i.zoomLevels.initial:o>i.zoomLevels.max?r=i.zoomLevels.max:(n=!1,r=o);let a=e.bgOpacity,l=e.bgOpacity<1,d=I({x:0,y:0},i.pan),p=I({x:0,y:0},d);t&&(this._zoomPoint.x=0,this._zoomPoint.y=0,this._startZoomPoint.x=0,this._startZoomPoint.y=0,this._startZoomLevel=o,I(this._startPan,d)),n&&(p={x:this._calculatePanForZoomLevel("x",r),y:this._calculatePanForZoomLevel("y",r)}),i.setZoomLevel(r),p={x:i.bounds.correctPan("x",p.x),y:i.bounds.correctPan("y",p.y)},i.setZoomLevel(o);let c=!ht(p,d);if(!c&&!n&&!l){i._setResolution(r),i.applyCurrentZoomPan();return}e.animations.stopAllPan(),e.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:u=>{if(u/=1e3,c||n){if(c&&(i.pan.x=d.x+(p.x-d.x)*u,i.pan.y=d.y+(p.y-d.y)*u),n){let h=o+(r-o)*u;i.setZoomLevel(h)}i.applyCurrentZoomPan()}l&&e.bgOpacity<1&&e.applyBgOpacity(ut(a+(1-a)*u,0,1))},onComplete:()=>{i._setResolution(r),i.applyCurrentZoomPan()}})}};function zs(s){return!!s.target.closest(".pswp__container")}var se=class{constructor(t){this.gestures=t}click(t,e){let i=e.target.classList,o=i.contains("pswp__img"),r=i.contains("pswp__item")||i.contains("pswp__zoom-wrap");o?this._doClickOrTapAction("imageClick",t,e):r&&this._doClickOrTapAction("bgClick",t,e)}tap(t,e){zs(e)&&this._doClickOrTapAction("tap",t,e)}doubleTap(t,e){zs(e)&&this._doClickOrTapAction("doubleTap",t,e)}_doClickOrTapAction(t,e,i){var o;let{pswp:r}=this.gestures,{currSlide:n}=r,a=t+"Action",l=r.options[a];if(!r.dispatch(a,{point:e,originalEvent:i}).defaultPrevented){if(typeof l=="function"){l.call(r,e,i);return}switch(l){case"close":case"next":r[l]();break;case"zoom":n==null||n.toggleZoom(e);break;case"zoom-or-close":n!=null&&n.isZoomable()&&n.zoomLevels.secondary!==n.zoomLevels.initial?n.toggleZoom(e):r.options.clickToCloseNonZoomable&&r.close();break;case"toggle-controls":(o=this.gestures.pswp.element)===null||o===void 0||o.classList.toggle("pswp--ui-visible");break}}}},hl=10,cl=300,ul=25,oe=class{constructor(t){this.pswp=t,this.dragAxis=null,this.p1={x:0,y:0},this.p2={x:0,y:0},this.prevP1={x:0,y:0},this.prevP2={x:0,y:0},this.startP1={x:0,y:0},this.startP2={x:0,y:0},this.velocity={x:0,y:0},this._lastStartP1={x:0,y:0},this._intervalP1={x:0,y:0},this._numActivePoints=0,this._ongoingPointers=[],this._touchEventEnabled="ontouchstart"in window,this._pointerEventEnabled=!!window.PointerEvent,this.supportsTouch=this._touchEventEnabled||this._pointerEventEnabled&&navigator.maxTouchPoints>1,this._numActivePoints=0,this._intervalTime=0,this._velocityCalculated=!1,this.isMultitouch=!1,this.isDragging=!1,this.isZooming=!1,this.raf=null,this._tapTimer=null,this.supportsTouch||(t.options.allowPanToNext=!1),this.drag=new ee(this),this.zoomLevels=new ie(this),this.tapHandler=new se(this),t.on("bindEvents",()=>{t.events.add(t.scrollWrap,"click",this._onClick.bind(this)),this._pointerEventEnabled?this._bindEvents("pointer","down","up","cancel"):this._touchEventEnabled?(this._bindEvents("touch","start","end","cancel"),t.scrollWrap&&(t.scrollWrap.ontouchmove=()=>{},t.scrollWrap.ontouchend=()=>{})):this._bindEvents("mouse","down","up")})}_bindEvents(t,e,i,o){let{pswp:r}=this,{events:n}=r,a=o?t+o:"";n.add(r.scrollWrap,t+e,this.onPointerDown.bind(this)),n.add(window,t+"move",this.onPointerMove.bind(this)),n.add(window,t+i,this.onPointerUp.bind(this)),a&&n.add(r.scrollWrap,a,this.onPointerUp.bind(this))}onPointerDown(t){let e=t.type==="mousedown"||t.pointerType==="mouse";if(e&&t.button>0)return;let{pswp:i}=this;if(!i.opener.isOpen){t.preventDefault();return}i.dispatch("pointerDown",{originalEvent:t}).defaultPrevented||(e&&(i.mouseDetected(),this._preventPointerEventBehaviour(t,"down")),i.animations.stopAll(),this._updatePoints(t,"down"),this._numActivePoints===1&&(this.dragAxis=null,I(this.startP1,this.p1)),this._numActivePoints>1?(this._clearTapTimer(),this.isMultitouch=!0):this.isMultitouch=!1)}onPointerMove(t){this._preventPointerEventBehaviour(t,"move"),this._numActivePoints&&(this._updatePoints(t,"move"),!this.pswp.dispatch("pointerMove",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===1&&!this.isDragging?(this.dragAxis||this._calculateDragDirection(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this._clearTapTimer(),this._updateStartPoints(),this._intervalTime=Date.now(),this._velocityCalculated=!1,I(this._intervalP1,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this._rafStopLoop(),this._rafRenderLoop())):this._numActivePoints>1&&!this.isZooming&&(this._finishDrag(),this.isZooming=!0,this._updateStartPoints(),this.zoomLevels.start(),this._rafStopLoop(),this._rafRenderLoop())))}_finishDrag(){this.isDragging&&(this.isDragging=!1,this._velocityCalculated||this._updateVelocity(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(t){this._numActivePoints&&(this._updatePoints(t,"up"),!this.pswp.dispatch("pointerUp",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===0&&(this._rafStopLoop(),this.isDragging?this._finishDrag():!this.isZooming&&!this.isMultitouch&&this._finishTap(t)),this._numActivePoints<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),this._numActivePoints===1&&(this.dragAxis=null,this._updateStartPoints()))))}_rafRenderLoop(){(this.isDragging||this.isZooming)&&(this._updateVelocity(),this.isDragging?ht(this.p1,this.prevP1)||this.drag.change():(!ht(this.p1,this.prevP1)||!ht(this.p2,this.prevP2))&&this.zoomLevels.change(),this._updatePrevPoints(),this.raf=requestAnimationFrame(this._rafRenderLoop.bind(this)))}_updateVelocity(t){let e=Date.now(),i=e-this._intervalTime;i<50&&!t||(this.velocity.x=this._getVelocity("x",i),this.velocity.y=this._getVelocity("y",i),this._intervalTime=e,I(this._intervalP1,this.p1),this._velocityCalculated=!0)}_finishTap(t){let{mainScroll:e}=this.pswp;if(e.isShifted()){e.moveIndexBy(0,!0);return}if(t.type.indexOf("cancel")>0)return;if(t.type==="mouseup"||t.pointerType==="mouse"){this.tapHandler.click(this.startP1,t);return}let i=this.pswp.options.doubleTapAction?cl:0;this._tapTimer?(this._clearTapTimer(),Yt(this._lastStartP1,this.startP1)<ul&&this.tapHandler.doubleTap(this.startP1,t)):(I(this._lastStartP1,this.startP1),this._tapTimer=setTimeout(()=>{this.tapHandler.tap(this.startP1,t),this._clearTapTimer()},i))}_clearTapTimer(){this._tapTimer&&(clearTimeout(this._tapTimer),this._tapTimer=null)}_getVelocity(t,e){let i=this.p1[t]-this._intervalP1[t];return Math.abs(i)>1&&e>5?i/e:0}_rafStopLoop(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}_preventPointerEventBehaviour(t,e){this.pswp.applyFilters("preventPointerEvent",!0,t,e)&&t.preventDefault()}_updatePoints(t,e){if(this._pointerEventEnabled){let i=t,o=this._ongoingPointers.findIndex(r=>r.id===i.pointerId);e==="up"&&o>-1?this._ongoingPointers.splice(o,1):e==="down"&&o===-1?this._ongoingPointers.push(this._convertEventPosToPoint(i,{x:0,y:0})):o>-1&&this._convertEventPosToPoint(i,this._ongoingPointers[o]),this._numActivePoints=this._ongoingPointers.length,this._numActivePoints>0&&I(this.p1,this._ongoingPointers[0]),this._numActivePoints>1&&I(this.p2,this._ongoingPointers[1])}else{let i=t;this._numActivePoints=0,i.type.indexOf("touch")>-1?i.touches&&i.touches.length>0&&(this._convertEventPosToPoint(i.touches[0],this.p1),this._numActivePoints++,i.touches.length>1&&(this._convertEventPosToPoint(i.touches[1],this.p2),this._numActivePoints++)):(this._convertEventPosToPoint(t,this.p1),e==="up"?this._numActivePoints=0:this._numActivePoints++)}}_updatePrevPoints(){I(this.prevP1,this.p1),I(this.prevP2,this.p2)}_updateStartPoints(){I(this.startP1,this.p1),I(this.startP2,this.p2),this._updatePrevPoints()}_calculateDragDirection(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{let t=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(t!==0){let e=t>0?"x":"y";Math.abs(this.p1[e]-this.startP1[e])>=hl&&(this.dragAxis=e)}}}_convertEventPosToPoint(t,e){return e.x=t.pageX-this.pswp.offset.x,e.y=t.pageY-this.pswp.offset.y,"pointerId"in t?e.id=t.pointerId:t.identifier!==void 0&&(e.id=t.identifier),e}_onClick(t){this.pswp.mainScroll.isShifted()&&(t.preventDefault(),t.stopPropagation())}},ml=.35,re=class{constructor(t){this.pswp=t,this.x=0,this.slideWidth=0,this._currPositionIndex=0,this._prevPositionIndex=0,this._containerShiftIndex=-1,this.itemHolders=[]}resize(t){let{pswp:e}=this,i=Math.round(e.viewportSize.x+e.viewportSize.x*e.options.spacing),o=i!==this.slideWidth;o&&(this.slideWidth=i,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((r,n)=>{o&&X(r.el,(n+this._containerShiftIndex)*this.slideWidth),t&&r.slide&&r.slide.resize()})}resetPosition(){this._currPositionIndex=0,this._prevPositionIndex=0,this.slideWidth=0,this._containerShiftIndex=-1}appendHolders(){this.itemHolders=[];for(let t=0;t<3;t++){let e=b("pswp__item","div",this.pswp.container);e.setAttribute("role","group"),e.setAttribute("aria-roledescription","slide"),e.setAttribute("aria-hidden","true"),e.style.display=t===1?"block":"none",this.itemHolders.push({el:e})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(t,e,i){let{pswp:o}=this,r=o.potentialIndex+t,n=o.getNumItems();if(o.canLoop()){r=o.getLoopedIndex(r);let l=(t+n)%n;l<=n/2?t=l:t=l-n}else r<0?r=0:r>=n&&(r=n-1),t=r-o.potentialIndex;o.potentialIndex=r,this._currPositionIndex-=t,o.animations.stopMainScroll();let a=this.getCurrSlideX();if(!e)this.moveTo(a),this.updateCurrItem();else{o.animations.startSpring({isMainScroll:!0,start:this.x,end:a,velocity:i||0,naturalFrequency:30,dampingRatio:1,onUpdate:d=>{this.moveTo(d)},onComplete:()=>{this.updateCurrItem(),o.appendHeavy()}});let l=o.potentialIndex-o.currIndex;if(o.canLoop()){let d=(l+n)%n;d<=n/2?l=d:l=d-n}Math.abs(l)>1&&this.updateCurrItem()}return!!t}getCurrSlideX(){return this.slideWidth*this._currPositionIndex}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){var t;let{pswp:e}=this,i=this._prevPositionIndex-this._currPositionIndex;if(!i)return;this._prevPositionIndex=this._currPositionIndex,e.currIndex=e.potentialIndex;let o=Math.abs(i),r;o>=3&&(this._containerShiftIndex+=i+(i>0?-3:3),o=3,this.itemHolders.forEach(n=>{var a;(a=n.slide)===null||a===void 0||a.destroy(),n.slide=void 0}));for(let n=0;n<o;n++)i>0?(r=this.itemHolders.shift(),r&&(this.itemHolders[2]=r,this._containerShiftIndex++,X(r.el,(this._containerShiftIndex+2)*this.slideWidth),e.setContent(r,e.currIndex-o+n+2))):(r=this.itemHolders.pop(),r&&(this.itemHolders.unshift(r),this._containerShiftIndex--,X(r.el,this._containerShiftIndex*this.slideWidth),e.setContent(r,e.currIndex+o-n-2)));Math.abs(this._containerShiftIndex)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),e.animations.stopAllPan(),this.itemHolders.forEach((n,a)=>{n.slide&&n.slide.setIsActive(a===1)}),e.currSlide=(t=this.itemHolders[1])===null||t===void 0?void 0:t.slide,e.contentLoader.updateLazy(i),e.currSlide&&e.currSlide.applyCurrentZoomPan(),e.dispatch("change")}moveTo(t,e){if(!this.pswp.canLoop()&&e){let i=(this.slideWidth*this._currPositionIndex-t)/this.slideWidth;i+=this.pswp.currIndex;let o=Math.round(t-this.x);(i<0&&o>0||i>=this.pswp.getNumItems()-1&&o<0)&&(t=this.x+o*ml)}this.x=t,this.pswp.container&&X(this.pswp.container,t),this.pswp.dispatch("moveMainScroll",{x:t,dragging:e!=null?e:!1})}},fl={Escape:27,z:90,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Tab:9},Z=(s,t)=>t?s:fl[s],ne=class{constructor(t){this.pswp=t,this._wasFocused=!1,t.on("bindEvents",()=>{t.options.trapFocus&&(t.options.initialPointerPos||this._focusRoot(),t.events.add(document,"focusin",this._onFocusIn.bind(this))),t.events.add(document,"keydown",this._onKeyDown.bind(this))});let e=document.activeElement;t.on("destroy",()=>{t.options.returnFocus&&e&&this._wasFocused&&e.focus()})}_focusRoot(){!this._wasFocused&&this.pswp.element&&(this.pswp.element.focus(),this._wasFocused=!0)}_onKeyDown(t){let{pswp:e}=this;if(e.dispatch("keydown",{originalEvent:t}).defaultPrevented||ol(t))return;let i,o,r=!1,n="key"in t;switch(n?t.key:t.keyCode){case Z("Escape",n):e.options.escKey&&(i="close");break;case Z("z",n):i="toggleZoom";break;case Z("ArrowLeft",n):o="x";break;case Z("ArrowUp",n):o="y";break;case Z("ArrowRight",n):o="x",r=!0;break;case Z("ArrowDown",n):r=!0,o="y";break;case Z("Tab",n):this._focusRoot();break}if(o){t.preventDefault();let{currSlide:a}=e;e.options.arrowKeys&&o==="x"&&e.getNumItems()>1?i=r?"next":"prev":a&&a.currZoomLevel>a.zoomLevels.fit&&(a.pan[o]+=r?-80:80,a.panTo(a.pan.x,a.pan.y))}i&&(t.preventDefault(),e[i]())}_onFocusIn(t){let{template:e}=this.pswp;e&&document!==t.target&&e!==t.target&&!e.contains(t.target)&&e.focus()}},gl="cubic-bezier(.4,0,.22,1)",ae=class{constructor(t){var e;this.props=t;let{target:i,onComplete:o,transform:r,onFinish:n=()=>{},duration:a=333,easing:l=gl}=t;this.onFinish=n;let d=r?"transform":"opacity",p=(e=t[d])!==null&&e!==void 0?e:"";this._target=i,this._onComplete=o,this._finished=!1,this._onTransitionEnd=this._onTransitionEnd.bind(this),this._helperTimeout=setTimeout(()=>{Ms(i,d,a,l),this._helperTimeout=setTimeout(()=>{i.addEventListener("transitionend",this._onTransitionEnd,!1),i.addEventListener("transitioncancel",this._onTransitionEnd,!1),this._helperTimeout=setTimeout(()=>{this._finalizeAnimation()},a+500),i.style[d]=p},30)},0)}_onTransitionEnd(t){t.target===this._target&&this._finalizeAnimation()}_finalizeAnimation(){this._finished||(this._finished=!0,this.onFinish(),this._onComplete&&this._onComplete())}destroy(){this._helperTimeout&&clearTimeout(this._helperTimeout),il(this._target),this._target.removeEventListener("transitionend",this._onTransitionEnd,!1),this._target.removeEventListener("transitioncancel",this._onTransitionEnd,!1),this._finished||this._finalizeAnimation()}},Il=12,Al=.75,le=class{constructor(t,e,i){this.velocity=t*1e3,this._dampingRatio=e||Al,this._naturalFrequency=i||Il,this._dampedFrequency=this._naturalFrequency,this._dampingRatio<1&&(this._dampedFrequency*=Math.sqrt(1-this._dampingRatio*this._dampingRatio))}easeFrame(t,e){let i=0,o;e/=1e3;let r=Zt(Math.E,-this._dampingRatio*this._naturalFrequency*e);if(this._dampingRatio===1)o=this.velocity+this._naturalFrequency*t,i=(t+o*e)*r,this.velocity=i*-this._naturalFrequency+o*r;else if(this._dampingRatio<1){o=1/this._dampedFrequency*(this._dampingRatio*this._naturalFrequency*t+this.velocity);let n=Math.cos(this._dampedFrequency*e),a=Math.sin(this._dampedFrequency*e);i=r*(t*n+o*a),this.velocity=i*-this._naturalFrequency*this._dampingRatio+r*(-this._dampedFrequency*t*a+this._dampedFrequency*o*n)}return i}},de=class{constructor(t){this.props=t,this._raf=0;let{start:e,end:i,velocity:o,onUpdate:r,onComplete:n,onFinish:a=()=>{},dampingRatio:l,naturalFrequency:d}=t;this.onFinish=a;let p=new le(o,l,d),c=Date.now(),u=e-i,h=()=>{this._raf&&(u=p.easeFrame(u,Date.now()-c),Math.abs(u)<1&&Math.abs(p.velocity)<50?(r(i),n&&n(),this.onFinish()):(c=Date.now(),r(u+i),this._raf=requestAnimationFrame(h)))};this._raf=requestAnimationFrame(h)}destroy(){this._raf>=0&&cancelAnimationFrame(this._raf),this._raf=0}},pe=class{constructor(){this.activeAnimations=[]}startSpring(t){this._start(t,!0)}startTransition(t){this._start(t)}_start(t,e){let i=e?new de(t):new ae(t);return this.activeAnimations.push(i),i.onFinish=()=>this.stop(i),i}stop(t){t.destroy();let e=this.activeAnimations.indexOf(t);e>-1&&this.activeAnimations.splice(e,1)}stopAll(){this.activeAnimations.forEach(t=>{t.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isPan?(t.destroy(),!1):!0)}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isMainScroll?(t.destroy(),!1):!0)}isPanRunning(){return this.activeAnimations.some(t=>t.props.isPan)}},he=class{constructor(t){this.pswp=t,t.events.add(t.element,"wheel",this._onWheel.bind(this))}_onWheel(t){t.preventDefault();let{currSlide:e}=this.pswp,{deltaX:i,deltaY:o}=t;if(e&&!this.pswp.dispatch("wheel",{originalEvent:t}).defaultPrevented)if(t.ctrlKey||this.pswp.options.wheelToZoom){if(e.isZoomable()){let r=-o;t.deltaMode===1?r*=.05:r*=t.deltaMode?1:.002,r=Zt(2,r);let n=e.currZoomLevel*r;e.zoomTo(n,{x:t.clientX,y:t.clientY})}}else e.isPannable()&&(t.deltaMode===1&&(i*=18,o*=18),e.panTo(e.pan.x-i,e.pan.y-o))}};function Cl(s){if(typeof s=="string")return s;if(!s||!s.isCustomSVG)return"";let t=s,e='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return e=e.split("%d").join(t.size||32),t.outlineID&&(e+='<use class="pswp__icn-shadow" xlink:href="#'+t.outlineID+'"/>'),e+=t.inner,e+="</svg>",e}var ce=class{constructor(t,e){var i;let o=e.name||e.className,r=e.html;if(t.options[o]===!1)return;typeof t.options[o+"SVG"]=="string"&&(r=t.options[o+"SVG"]),t.dispatch("uiElementCreate",{data:e});let n="";e.isButton?(n+="pswp__button ",n+=e.className||`pswp__button--${e.name}`):n+=e.className||`pswp__${e.name}`;let a=e.isButton?e.tagName||"button":e.tagName||"div";a=a.toLowerCase();let l=b(n,a);if(e.isButton){a==="button"&&(l.type="button");let{title:c}=e,{ariaLabel:u}=e;typeof t.options[o+"Title"]=="string"&&(c=t.options[o+"Title"]),c&&(l.title=c);let h=u||c;h&&l.setAttribute("aria-label",h)}l.innerHTML=Cl(r),e.onInit&&e.onInit(l,t),e.onClick&&(l.onclick=c=>{typeof e.onClick=="string"?t[e.onClick]():typeof e.onClick=="function"&&e.onClick(c,l,t)});let d=e.appendTo||"bar",p=t.element;d==="bar"?(t.topBar||(t.topBar=b("pswp__top-bar pswp__hide-on-close","div",t.scrollWrap)),p=t.topBar):(l.classList.add("pswp__hide-on-close"),d==="wrapper"&&(p=t.scrollWrap)),(i=p)===null||i===void 0||i.appendChild(t.applyFilters("uiElement",l,e))}};function Xs(s,t,e){s.classList.add("pswp__button--arrow"),s.setAttribute("aria-controls","pswp__items"),t.on("change",()=>{t.options.loop||(e?s.disabled=!(t.currIndex<t.getNumItems()-1):s.disabled=!(t.currIndex>0))})}var xl={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:Xs},yl={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:(s,t)=>{Xs(s,t,!0)}},bl={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},vl={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},_l={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:(s,t)=>{let e,i=null,o=(a,l)=>{s.classList.toggle("pswp__preloader--"+a,l)},r=a=>{e!==a&&(e=a,o("active",a))},n=()=>{var a;if(!((a=t.currSlide)!==null&&a!==void 0&&a.content.isLoading())){r(!1),i&&(clearTimeout(i),i=null);return}i||(i=setTimeout(()=>{var l;r(!!(!((l=t.currSlide)===null||l===void 0)&&l.content.isLoading())),i=null},t.options.preloaderDelay))};t.on("change",n),t.on("loadComplete",a=>{t.currSlide===a.slide&&n()}),t.ui&&(t.ui.updatePreloaderVisibility=n)}},wl={name:"counter",order:5,onInit:(s,t)=>{t.on("change",()=>{s.innerText=t.currIndex+1+t.options.indexIndicatorSep+t.getNumItems()})}};function Ds(s,t){s.classList.toggle("pswp--zoomed-in",t)}var ue=class{constructor(t){this.pswp=t,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=()=>{},this._lastUpdatedZoomLevel=void 0}init(){let{pswp:t}=this;this.isRegistered=!1,this.uiElementsData=[bl,xl,yl,vl,_l,wl],t.dispatch("uiRegister"),this.uiElementsData.sort((e,i)=>(e.order||0)-(i.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(e=>{this.registerElement(e)}),t.on("change",()=>{var e;(e=t.element)===null||e===void 0||e.classList.toggle("pswp--one-slide",t.getNumItems()===1)}),t.on("zoomPanUpdate",()=>this._onZoomPanUpdate())}registerElement(t){this.isRegistered?this.items.push(new ce(this.pswp,t)):this.uiElementsData.push(t)}_onZoomPanUpdate(){let{template:t,currSlide:e,options:i}=this.pswp;if(this.pswp.opener.isClosing||!t||!e)return;let{currZoomLevel:o}=e;if(this.pswp.opener.isOpen||(o=e.zoomLevels.initial),o===this._lastUpdatedZoomLevel)return;this._lastUpdatedZoomLevel=o;let r=e.zoomLevels.initial-e.zoomLevels.secondary;if(Math.abs(r)<.01||!e.isZoomable()){Ds(t,!1),t.classList.remove("pswp--zoom-allowed");return}t.classList.add("pswp--zoom-allowed");let n=o===e.zoomLevels.initial?e.zoomLevels.secondary:e.zoomLevels.initial;Ds(t,n<=o),(i.imageClickAction==="zoom"||i.imageClickAction==="zoom-or-close")&&t.classList.add("pswp--click-to-zoom")}};function Sl(s){let t=s.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width}}function Tl(s,t,e){let i=s.getBoundingClientRect(),o=i.width/t,r=i.height/e,n=o>r?o:r,a=(i.width-t*n)/2,l=(i.height-e*n)/2,d={x:i.left+a,y:i.top+l,w:t*n};return d.innerRect={w:i.width,h:i.height,x:a,y:l},d}function Pl(s,t,e){let i=e.dispatch("thumbBounds",{index:s,itemData:t,instance:e});if(i.thumbBounds)return i.thumbBounds;let{element:o}=t,r,n;if(o&&e.options.thumbSelector!==!1){let a=e.options.thumbSelector||"img";n=o.matches(a)?o:o.querySelector(a)}return n=e.applyFilters("thumbEl",n,t,s),n&&(t.thumbCropped?r=Tl(n,t.width||t.w||0,t.height||t.h||0):r=Sl(n)),e.applyFilters("thumbBounds",r,t,s)}var me=class{constructor(t,e){this.type=t,this.defaultPrevented=!1,e&&Object.assign(this,e)}preventDefault(){this.defaultPrevented=!0}},fe=class{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(t,e,i=100){var o,r,n;this._filters[t]||(this._filters[t]=[]),(o=this._filters[t])===null||o===void 0||o.push({fn:e,priority:i}),(r=this._filters[t])===null||r===void 0||r.sort((a,l)=>a.priority-l.priority),(n=this.pswp)===null||n===void 0||n.addFilter(t,e,i)}removeFilter(t,e){this._filters[t]&&(this._filters[t]=this._filters[t].filter(i=>i.fn!==e)),this.pswp&&this.pswp.removeFilter(t,e)}applyFilters(t,...e){var i;return(i=this._filters[t])===null||i===void 0||i.forEach(o=>{e[0]=o.fn.apply(this,e)}),e[0]}on(t,e){var i,o;this._listeners[t]||(this._listeners[t]=[]),(i=this._listeners[t])===null||i===void 0||i.push(e),(o=this.pswp)===null||o===void 0||o.on(t,e)}off(t,e){var i;this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(o=>e!==o)),(i=this.pswp)===null||i===void 0||i.off(t,e)}dispatch(t,e){var i;if(this.pswp)return this.pswp.dispatch(t,e);let o=new me(t,e);return(i=this._listeners[t])===null||i===void 0||i.forEach(r=>{r.call(this,o)}),o}},ge=class{constructor(t,e){if(this.element=b("pswp__img pswp__img--placeholder",t?"img":"div",e),t){let i=this.element;i.decoding="async",i.alt="",i.src=t,i.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(t,e){this.element&&(this.element.tagName==="IMG"?(qt(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=ct(0,0,t/250)):qt(this.element,t,e))}destroy(){var t;(t=this.element)!==null&&t!==void 0&&t.parentNode&&this.element.remove(),this.element=null}},Ie=class{constructor(t,e,i){this.instance=e,this.data=t,this.index=i,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=w.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(t,e){if(this.slide&&this.usePlaceholder())if(this.placeholder){let i=this.placeholder.element;i&&!i.parentElement&&this.slide.container.prepend(i)}else{let i=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new ge(i,this.slide.container)}this.element&&!e||this.instance.dispatch("contentLoad",{content:this,isLazy:t}).defaultPrevented||(this.isImageContent()?(this.element=b("pswp__img","img"),this.displayedImageWidth&&this.loadImage(t)):(this.element=b("pswp__content","div"),this.element.innerHTML=this.data.html||""),e&&this.slide&&this.slide.updateContentSize(!0))}loadImage(t){var e,i;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:t}).defaultPrevented)return;let o=this.element;this.updateSrcsetSizes(),this.data.srcset&&(o.srcset=this.data.srcset),o.src=(e=this.data.src)!==null&&e!==void 0?e:"",o.alt=(i=this.data.alt)!==null&&i!==void 0?i:"",this.state=w.LOADING,o.complete?this.onLoaded():(o.onload=()=>{this.onLoaded()},o.onerror=()=>{this.onError()})}setSlide(t){this.slide=t,this.hasSlide=!0,this.instance=t.pswp}onLoaded(){this.state=w.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===w.LOADED||this.state===w.ERROR)&&this.removePlaceholder())}onError(){this.state=w.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===w.LOADING,this)}isError(){return this.state===w.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(t,e){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(t,e),!this.instance.dispatch("contentResize",{content:this,width:t,height:e}).defaultPrevented&&(qt(this.element,t,e),this.isImageContent()&&!this.isError()))){let i=!this.displayedImageWidth&&t;this.displayedImageWidth=t,this.displayedImageHeight=e,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:t,height:e,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==w.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;let t=this.element,e=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!t.dataset.largestUsedSize||e>parseInt(t.dataset.largestUsedSize,10))&&(t.sizes=e+"px",t.dataset.largestUsedSize=String(e))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var t,e;let i=b("pswp__error-msg","div");i.innerText=(t=(e=this.instance.options)===null||e===void 0?void 0:e.errorMsg)!==null&&t!==void 0?t:"",i=this.instance.applyFilters("contentErrorElement",i,this),this.element=b("pswp__content pswp__error-msg-container","div"),this.element.appendChild(i),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===w.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;let t="decode"in this.element;this.isImageContent()?t&&this.slide&&(!this.slide.isActive||Os())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!Os()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===w.LOADED||this.state===w.ERROR)&&this.removePlaceholder()))}},Ol=5;function Ns(s,t,e){let i=t.createContentFromData(s,e),o,{options:r}=t;if(r){o=new Bt(r,s,-1);let n;t.pswp?n=t.pswp.viewportSize:n=Hs(r,t);let a=Zs(r,n,s,e);o.update(i.width,i.height,a)}return i.lazyLoad(),o&&i.setDisplayedSize(Math.ceil(i.width*o.initial),Math.ceil(i.height*o.initial)),i}function El(s,t){let e=t.getItemData(s);if(!t.dispatch("lazyLoadSlide",{index:s,itemData:e}).defaultPrevented)return Ns(e,t,s)}var Ae=class{constructor(t){this.pswp=t,this.limit=Math.max(t.options.preload[0]+t.options.preload[1]+1,Ol),this._cachedItems=[]}updateLazy(t){let{pswp:e}=this;if(e.dispatch("lazyLoad").defaultPrevented)return;let{preload:i}=e.options,o=t===void 0?!0:t>=0,r;for(r=0;r<=i[1];r++)this.loadSlideByIndex(e.currIndex+(o?r:-r));for(r=1;r<=i[0];r++)this.loadSlideByIndex(e.currIndex+(o?-r:r))}loadSlideByIndex(t){let e=this.pswp.getLoopedIndex(t),i=this.getContentByIndex(e);i||(i=El(e,this.pswp),i&&this.addToCache(i))}getContentBySlide(t){let e=this.getContentByIndex(t.index);return e||(e=this.pswp.createContentFromData(t.data,t.index),this.addToCache(e)),e.setSlide(t),e}addToCache(t){if(this.removeByIndex(t.index),this._cachedItems.push(t),this._cachedItems.length>this.limit){let e=this._cachedItems.findIndex(i=>!i.isAttached&&!i.hasSlide);e!==-1&&this._cachedItems.splice(e,1)[0].destroy()}}removeByIndex(t){let e=this._cachedItems.findIndex(i=>i.index===t);e!==-1&&this._cachedItems.splice(e,1)}getContentByIndex(t){return this._cachedItems.find(e=>e.index===t)}destroy(){this._cachedItems.forEach(t=>t.destroy()),this._cachedItems=[]}},Ce=class extends fe{getNumItems(){var t;let e=0,i=(t=this.options)===null||t===void 0?void 0:t.dataSource;i&&"length"in i?e=i.length:i&&"gallery"in i&&(i.items||(i.items=this._getGalleryDOMElements(i.gallery)),i.items&&(e=i.items.length));let o=this.dispatch("numItems",{dataSource:i,numItems:e});return this.applyFilters("numItems",o.numItems,i)}createContentFromData(t,e){return new Ie(t,this,e)}getItemData(t){var e;let i=(e=this.options)===null||e===void 0?void 0:e.dataSource,o={};Array.isArray(i)?o=i[t]:i&&"gallery"in i&&(i.items||(i.items=this._getGalleryDOMElements(i.gallery)),o=i.items[t]);let r=o;r instanceof Element&&(r=this._domElementToItemData(r));let n=this.dispatch("itemData",{itemData:r||{},index:t});return this.applyFilters("itemData",n.itemData,t)}_getGalleryDOMElements(t){var e,i;return(e=this.options)!==null&&e!==void 0&&e.children||(i=this.options)!==null&&i!==void 0&&i.childSelector?rl(this.options.children,this.options.childSelector,t)||[]:[t]}_domElementToItemData(t){let e={element:t},i=t.tagName==="A"?t:t.querySelector("a");if(i){e.src=i.dataset.pswpSrc||i.href,i.dataset.pswpSrcset&&(e.srcset=i.dataset.pswpSrcset),e.width=i.dataset.pswpWidth?parseInt(i.dataset.pswpWidth,10):0,e.height=i.dataset.pswpHeight?parseInt(i.dataset.pswpHeight,10):0,e.w=e.width,e.h=e.height,i.dataset.pswpType&&(e.type=i.dataset.pswpType);let r=t.querySelector("img");if(r){var o;e.msrc=r.currentSrc||r.src,e.alt=(o=r.getAttribute("alt"))!==null&&o!==void 0?o:""}(i.dataset.pswpCropped||i.dataset.cropped)&&(e.thumbCropped=!0)}return this.applyFilters("domItemData",e,t,i)}lazyLoadData(t,e){return Ns(t,this,e)}},dt=.003,xe=class{constructor(t){this.pswp=t,this.isClosed=!0,this.isOpen=!1,this.isClosing=!1,this.isOpening=!1,this._duration=void 0,this._useAnimation=!1,this._croppedZoom=!1,this._animateRootOpacity=!1,this._animateBgOpacity=!1,this._placeholder=void 0,this._opacityElement=void 0,this._cropContainer1=void 0,this._cropContainer2=void 0,this._thumbBounds=void 0,this._prepareOpen=this._prepareOpen.bind(this),t.on("firstZoomPan",this._prepareOpen)}open(){this._prepareOpen(),this._start()}close(){if(this.isClosed||this.isClosing||this.isOpening)return;let t=this.pswp.currSlide;this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this._duration=this.pswp.options.hideAnimationDuration,t&&t.currZoomLevel*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps(),setTimeout(()=>{this._start()},this._croppedZoom?30:0)}_prepareOpen(){if(this.pswp.off("firstZoomPan",this._prepareOpen),!this.isOpening){let t=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this._duration=this.pswp.options.showAnimationDuration,t&&t.zoomLevels.initial*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps()}}_applyStartProps(){let{pswp:t}=this,e=this.pswp.currSlide,{options:i}=t;if(i.showHideAnimationType==="fade"?(i.showHideOpacity=!0,this._thumbBounds=void 0):i.showHideAnimationType==="none"?(i.showHideOpacity=!1,this._duration=0,this._thumbBounds=void 0):this.isOpening&&t._initialThumbBounds?this._thumbBounds=t._initialThumbBounds:this._thumbBounds=this.pswp.getThumbBounds(),this._placeholder=e==null?void 0:e.getPlaceholderElement(),t.animations.stopAll(),this._useAnimation=!!(this._duration&&this._duration>50),this._animateZoom=!!this._thumbBounds&&(e==null?void 0:e.content.usePlaceholder())&&(!this.isClosing||!t.mainScroll.isShifted()),!this._animateZoom)this._animateRootOpacity=!0,this.isOpening&&e&&(e.zoomAndPanToInitial(),e.applyCurrentZoomPan());else{var o;this._animateRootOpacity=(o=i.showHideOpacity)!==null&&o!==void 0?o:!1}if(this._animateBgOpacity=!this._animateRootOpacity&&this.pswp.options.bgOpacity>dt,this._opacityElement=this._animateRootOpacity?t.element:t.bg,!this._useAnimation){this._duration=0,this._animateZoom=!1,this._animateBgOpacity=!1,this._animateRootOpacity=!0,this.isOpening&&(t.element&&(t.element.style.opacity=String(dt)),t.applyBgOpacity(1));return}if(this._animateZoom&&this._thumbBounds&&this._thumbBounds.innerRect){var r;this._croppedZoom=!0,this._cropContainer1=this.pswp.container,this._cropContainer2=(r=this.pswp.currSlide)===null||r===void 0?void 0:r.holderElement,t.container&&(t.container.style.overflow="hidden",t.container.style.width=t.viewportSize.x+"px")}else this._croppedZoom=!1;this.isOpening?(this._animateRootOpacity?(t.element&&(t.element.style.opacity=String(dt)),t.applyBgOpacity(1)):(this._animateBgOpacity&&t.bg&&(t.bg.style.opacity=String(dt)),t.element&&(t.element.style.opacity="1")),this._animateZoom&&(this._setClosedStateZoomPan(),this._placeholder&&(this._placeholder.style.willChange="transform",this._placeholder.style.opacity=String(dt)))):this.isClosing&&(t.mainScroll.itemHolders[0]&&(t.mainScroll.itemHolders[0].el.style.display="none"),t.mainScroll.itemHolders[2]&&(t.mainScroll.itemHolders[2].el.style.display="none"),this._croppedZoom&&t.mainScroll.x!==0&&(t.mainScroll.resetPosition(),t.mainScroll.resize()))}_start(){this.isOpening&&this._useAnimation&&this._placeholder&&this._placeholder.tagName==="IMG"?new Promise(t=>{let e=!1,i=!0;sl(this._placeholder).finally(()=>{e=!0,i||t(!0)}),setTimeout(()=>{i=!1,e&&t(!0)},50),setTimeout(t,250)}).finally(()=>this._initiate()):this._initiate()}_initiate(){var t,e;(t=this.pswp.element)===null||t===void 0||t.style.setProperty("--pswp-transition-duration",this._duration+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),(e=this.pswp.element)===null||e===void 0||e.classList.toggle("pswp--ui-visible",this.isOpening),this.isOpening?(this._placeholder&&(this._placeholder.style.opacity="1"),this._animateToOpenState()):this.isClosing&&this._animateToClosedState(),this._useAnimation||this._onAnimationComplete()}_onAnimationComplete(){let{pswp:t}=this;if(this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,t.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),t.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed)t.destroy();else if(this.isOpen){var e;this._animateZoom&&t.container&&(t.container.style.overflow="visible",t.container.style.width="100%"),(e=t.currSlide)===null||e===void 0||e.applyCurrentZoomPan()}}_animateToOpenState(){let{pswp:t}=this;this._animateZoom&&(this._croppedZoom&&this._cropContainer1&&this._cropContainer2&&(this._animateTo(this._cropContainer1,"transform","translate3d(0,0,0)"),this._animateTo(this._cropContainer2,"transform","none")),t.currSlide&&(t.currSlide.zoomAndPanToInitial(),this._animateTo(t.currSlide.container,"transform",t.currSlide.getCurrentTransform()))),this._animateBgOpacity&&t.bg&&this._animateTo(t.bg,"opacity",String(t.options.bgOpacity)),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","1")}_animateToClosedState(){let{pswp:t}=this;this._animateZoom&&this._setClosedStateZoomPan(!0),this._animateBgOpacity&&t.bgOpacity>.01&&t.bg&&this._animateTo(t.bg,"opacity","0"),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","0")}_setClosedStateZoomPan(t){if(!this._thumbBounds)return;let{pswp:e}=this,{innerRect:i}=this._thumbBounds,{currSlide:o,viewportSize:r}=e;if(this._croppedZoom&&i&&this._cropContainer1&&this._cropContainer2){let n=-r.x+(this._thumbBounds.x-i.x)+i.w,a=-r.y+(this._thumbBounds.y-i.y)+i.h,l=r.x-i.w,d=r.y-i.h;t?(this._animateTo(this._cropContainer1,"transform",ct(n,a)),this._animateTo(this._cropContainer2,"transform",ct(l,d))):(X(this._cropContainer1,n,a),X(this._cropContainer2,l,d))}o&&(I(o.pan,i||this._thumbBounds),o.currZoomLevel=this._thumbBounds.w/o.width,t?this._animateTo(o.container,"transform",o.getCurrentTransform()):o.applyCurrentZoomPan())}_animateTo(t,e,i){if(!this._duration){t.style[e]=i;return}let{animations:o}=this.pswp,r={duration:this._duration,easing:this.pswp.options.easing,onComplete:()=>{o.activeAnimations.length||this._onAnimationComplete()},target:t};r[e]=i,o.startTransition(r)}},Ll={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,trapFocus:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"},Rt=class extends Ce{constructor(t){super(),this.options=this._prepareOptions(t||{}),this.offset={x:0,y:0},this._prevViewportSize={x:0,y:0},this.viewportSize={x:0,y:0},this.bgOpacity=1,this.currIndex=0,this.potentialIndex=0,this.isOpen=!1,this.isDestroying=!1,this.hasMouse=!1,this._initialItemData={},this._initialThumbBounds=void 0,this.topBar=void 0,this.element=void 0,this.template=void 0,this.container=void 0,this.scrollWrap=void 0,this.currSlide=void 0,this.events=new $t,this.animations=new pe,this.mainScroll=new re(this),this.gestures=new oe(this),this.opener=new xe(this),this.keyboard=new ne(this),this.contentLoader=new Ae(this)}init(){if(this.isOpen||this.isDestroying)return!1;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this._createMainStructure();let t="pswp--open";return this.gestures.supportsTouch&&(t+=" pswp--touch"),this.options.mainClass&&(t+=" "+this.options.mainClass),this.element&&(this.element.className+=" "+t),this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new he(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this._initialItemData=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this._initialItemData,slide:void 0}),this._initialThumbBounds=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{let{itemHolders:e}=this.mainScroll;e[0]&&(e[0].el.style.display="block",this.setContent(e[0],this.currIndex-1)),e[2]&&(e[2].el.style.display="block",this.setContent(e[2],this.currIndex+1)),this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this._handlePageResize.bind(this)),this.events.add(window,"scroll",this._updatePageScrollOffset.bind(this)),this.dispatch("bindEvents")}),this.mainScroll.itemHolders[1]&&this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(t){let e=this.getNumItems();return this.options.loop&&(t>e-1&&(t-=e),t<0&&(t+=e)),ut(t,0,e-1)}appendHeavy(){this.mainScroll.itemHolders.forEach(t=>{var e;(e=t.slide)===null||e===void 0||e.appendHeavy()})}goTo(t){this.mainScroll.moveIndexBy(this.getLoopedIndex(t)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...t){var e;(e=this.currSlide)===null||e===void 0||e.zoomTo(...t)}toggleZoom(){var t;(t=this.currSlide)===null||t===void 0||t.toggleZoom()}close(){!this.opener.isOpen||this.isDestroying||(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){var t;if(!this.isDestroying){this.options.showHideAnimationType="none",this.close();return}this.dispatch("destroy"),this._listeners={},this.scrollWrap&&(this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null),(t=this.element)===null||t===void 0||t.remove(),this.mainScroll.itemHolders.forEach(e=>{var i;(i=e.slide)===null||i===void 0||i.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(t){this.contentLoader.removeByIndex(t),this.mainScroll.itemHolders.forEach((e,i)=>{var o,r;let n=((o=(r=this.currSlide)===null||r===void 0?void 0:r.index)!==null&&o!==void 0?o:0)-1+i;if(this.canLoop()&&(n=this.getLoopedIndex(n)),n===t&&(this.setContent(e,t,!0),i===1)){var a;this.currSlide=e.slide,(a=e.slide)===null||a===void 0||a.setIsActive(!0)}}),this.dispatch("change")}setContent(t,e,i){if(this.canLoop()&&(e=this.getLoopedIndex(e)),t.slide){if(t.slide.index===e&&!i)return;t.slide.destroy(),t.slide=void 0}if(!this.canLoop()&&(e<0||e>=this.getNumItems()))return;let o=this.getItemData(e);t.slide=new te(o,e,this),e===this.currIndex&&(this.currSlide=t.slide),t.slide.append(t.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(t){if(this.isDestroying)return;let e=Hs(this.options,this);!t&&ht(e,this._prevViewportSize)||(I(this._prevViewportSize,e),this.dispatch("beforeResize"),I(this.viewportSize,this._prevViewportSize),this._updatePageScrollOffset(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(t){this.bgOpacity=Math.max(t,0),this.bg&&(this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity))}mouseDetected(){if(!this.hasMouse){var t;this.hasMouse=!0,(t=this.element)===null||t===void 0||t.classList.add("pswp--has_mouse")}}_handlePageResize(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}_updatePageScrollOffset(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(t,e){this.offset.x=t,this.offset.y=e,this.dispatch("updateScrollOffset")}_createMainStructure(){this.element=b("pswp","div"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=b("pswp__bg","div",this.element),this.scrollWrap=b("pswp__scroll-wrap","section",this.element),this.container=b("pswp__container","div",this.scrollWrap),this.scrollWrap.setAttribute("aria-roledescription","carousel"),this.container.setAttribute("aria-live","off"),this.container.setAttribute("id","pswp__items"),this.mainScroll.appendHolders(),this.ui=new ue(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return Pl(this.currIndex,this.currSlide?this.currSlide.data:this._initialItemData,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}_prepareOptions(t){return window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(t.showHideAnimationType="none",t.zoomAnimationDuration=0),st(st({},Ll),t)}};function mt(s,t,e){let i=document.createElement(t);return s&&(i.className=s),e&&e.appendChild(i),i}function Bl(s,t,e){let i=`translate3d(${s}px,${t||0}px,0)`;return e!==void 0&&(i+=` scale3d(${e},${e},1)`),i}function ye(s,t,e){s.style.width=typeof t=="number"?`${t}px`:t,s.style.height=typeof e=="number"?`${e}px`:e}var S={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Rl(s){return"button"in s&&s.button===1||s.ctrlKey||s.metaKey||s.altKey||s.shiftKey}function ft(s,t,e=document){let i=[];if(s instanceof Element)i=[s];else if(s instanceof NodeList||Array.isArray(s))i=Array.from(s);else{let o=typeof s=="string"?s:t;o&&(i=Array.from(e.querySelectorAll(o)))}return i}function zl(s){return typeof s=="function"&&s.prototype&&s.prototype.goTo}function Ws(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}var be=class{constructor(t,e){this.type=t,this.defaultPrevented=!1,e&&Object.assign(this,e)}preventDefault(){this.defaultPrevented=!0}},ve=class{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(t,e,i=100){var o,r,n;this._filters[t]||(this._filters[t]=[]),(o=this._filters[t])===null||o===void 0||o.push({fn:e,priority:i}),(r=this._filters[t])===null||r===void 0||r.sort((a,l)=>a.priority-l.priority),(n=this.pswp)===null||n===void 0||n.addFilter(t,e,i)}removeFilter(t,e){this._filters[t]&&(this._filters[t]=this._filters[t].filter(i=>i.fn!==e)),this.pswp&&this.pswp.removeFilter(t,e)}applyFilters(t,...e){var i;return(i=this._filters[t])===null||i===void 0||i.forEach(o=>{e[0]=o.fn.apply(this,e)}),e[0]}on(t,e){var i,o;this._listeners[t]||(this._listeners[t]=[]),(i=this._listeners[t])===null||i===void 0||i.push(e),(o=this.pswp)===null||o===void 0||o.on(t,e)}off(t,e){var i;this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(o=>e!==o)),(i=this.pswp)===null||i===void 0||i.off(t,e)}dispatch(t,e){var i;if(this.pswp)return this.pswp.dispatch(t,e);let o=new be(t,e);return(i=this._listeners[t])===null||i===void 0||i.forEach(r=>{r.call(this,o)}),o}},_e=class{constructor(t,e){if(this.element=mt("pswp__img pswp__img--placeholder",t?"img":"div",e),t){let i=this.element;i.decoding="async",i.alt="",i.src=t,i.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(t,e){this.element&&(this.element.tagName==="IMG"?(ye(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Bl(0,0,t/250)):ye(this.element,t,e))}destroy(){var t;(t=this.element)!==null&&t!==void 0&&t.parentNode&&this.element.remove(),this.element=null}},we=class{constructor(t,e,i){this.instance=e,this.data=t,this.index=i,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=S.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(t,e){if(this.slide&&this.usePlaceholder())if(this.placeholder){let i=this.placeholder.element;i&&!i.parentElement&&this.slide.container.prepend(i)}else{let i=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new _e(i,this.slide.container)}this.element&&!e||this.instance.dispatch("contentLoad",{content:this,isLazy:t}).defaultPrevented||(this.isImageContent()?(this.element=mt("pswp__img","img"),this.displayedImageWidth&&this.loadImage(t)):(this.element=mt("pswp__content","div"),this.element.innerHTML=this.data.html||""),e&&this.slide&&this.slide.updateContentSize(!0))}loadImage(t){var e,i;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:t}).defaultPrevented)return;let o=this.element;this.updateSrcsetSizes(),this.data.srcset&&(o.srcset=this.data.srcset),o.src=(e=this.data.src)!==null&&e!==void 0?e:"",o.alt=(i=this.data.alt)!==null&&i!==void 0?i:"",this.state=S.LOADING,o.complete?this.onLoaded():(o.onload=()=>{this.onLoaded()},o.onerror=()=>{this.onError()})}setSlide(t){this.slide=t,this.hasSlide=!0,this.instance=t.pswp}onLoaded(){this.state=S.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===S.LOADED||this.state===S.ERROR)&&this.removePlaceholder())}onError(){this.state=S.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===S.LOADING,this)}isError(){return this.state===S.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(t,e){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(t,e),!this.instance.dispatch("contentResize",{content:this,width:t,height:e}).defaultPrevented&&(ye(this.element,t,e),this.isImageContent()&&!this.isError()))){let i=!this.displayedImageWidth&&t;this.displayedImageWidth=t,this.displayedImageHeight=e,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:t,height:e,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==S.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;let t=this.element,e=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!t.dataset.largestUsedSize||e>parseInt(t.dataset.largestUsedSize,10))&&(t.sizes=e+"px",t.dataset.largestUsedSize=String(e))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var t,e;let i=mt("pswp__error-msg","div");i.innerText=(t=(e=this.instance.options)===null||e===void 0?void 0:e.errorMsg)!==null&&t!==void 0?t:"",i=this.instance.applyFilters("contentErrorElement",i,this),this.element=mt("pswp__content pswp__error-msg-container","div"),this.element.appendChild(i),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===S.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;let t="decode"in this.element;this.isImageContent()?t&&this.slide&&(!this.slide.isActive||Ws())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!Ws()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===S.LOADED||this.state===S.ERROR)&&this.removePlaceholder()))}};function Dl(s,t){if(s.getViewportSizeFn){let e=s.getViewportSizeFn(s,t);if(e)return e}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function zt(s,t,e,i,o){let r=0;if(t.paddingFn)r=t.paddingFn(e,i,o)[s];else if(t.padding)r=t.padding[s];else{let n="padding"+s[0].toUpperCase()+s.slice(1);t[n]&&(r=t[n])}return Number(r)||0}function Fl(s,t,e,i){return{x:t.x-zt("left",s,t,e,i)-zt("right",s,t,e,i),y:t.y-zt("top",s,t,e,i)-zt("bottom",s,t,e,i)}}var ks=4e3,Se=class{constructor(t,e,i,o){this.pswp=o,this.options=t,this.itemData=e,this.index=i,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(t,e,i){let o={x:t,y:e};this.elementSize=o,this.panAreaSize=i;let r=i.x/o.x,n=i.y/o.y;this.fit=Math.min(1,r<n?r:n),this.fill=Math.min(1,r>n?r:n),this.vFill=Math.min(1,n),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(t){let e=t+"ZoomLevel",i=this.options[e];if(i)return typeof i=="function"?i(this):i==="fill"?this.fill:i==="fit"?this.fit:Number(i)}_getSecondary(){let t=this._parseZoomLevelOption("secondary");return t||(t=Math.min(1,this.fit*3),this.elementSize&&t*this.elementSize.x>ks&&(t=ks/this.elementSize.x),t)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}};function Us(s,t,e){let i=t.createContentFromData(s,e),o,{options:r}=t;if(r){o=new Se(r,s,-1);let n;t.pswp?n=t.pswp.viewportSize:n=Dl(r,t);let a=Fl(r,n,s,e);o.update(i.width,i.height,a)}return i.lazyLoad(),o&&i.setDisplayedSize(Math.ceil(i.width*o.initial),Math.ceil(i.height*o.initial)),i}function Ml(s,t){let e=t.getItemData(s);if(!t.dispatch("lazyLoadSlide",{index:s,itemData:e}).defaultPrevented)return Us(e,t,s)}var Te=class extends ve{getNumItems(){var t;let e=0,i=(t=this.options)===null||t===void 0?void 0:t.dataSource;i&&"length"in i?e=i.length:i&&"gallery"in i&&(i.items||(i.items=this._getGalleryDOMElements(i.gallery)),i.items&&(e=i.items.length));let o=this.dispatch("numItems",{dataSource:i,numItems:e});return this.applyFilters("numItems",o.numItems,i)}createContentFromData(t,e){return new we(t,this,e)}getItemData(t){var e;let i=(e=this.options)===null||e===void 0?void 0:e.dataSource,o={};Array.isArray(i)?o=i[t]:i&&"gallery"in i&&(i.items||(i.items=this._getGalleryDOMElements(i.gallery)),o=i.items[t]);let r=o;r instanceof Element&&(r=this._domElementToItemData(r));let n=this.dispatch("itemData",{itemData:r||{},index:t});return this.applyFilters("itemData",n.itemData,t)}_getGalleryDOMElements(t){var e,i;return(e=this.options)!==null&&e!==void 0&&e.children||(i=this.options)!==null&&i!==void 0&&i.childSelector?ft(this.options.children,this.options.childSelector,t)||[]:[t]}_domElementToItemData(t){let e={element:t},i=t.tagName==="A"?t:t.querySelector("a");if(i){e.src=i.dataset.pswpSrc||i.href,i.dataset.pswpSrcset&&(e.srcset=i.dataset.pswpSrcset),e.width=i.dataset.pswpWidth?parseInt(i.dataset.pswpWidth,10):0,e.height=i.dataset.pswpHeight?parseInt(i.dataset.pswpHeight,10):0,e.w=e.width,e.h=e.height,i.dataset.pswpType&&(e.type=i.dataset.pswpType);let r=t.querySelector("img");if(r){var o;e.msrc=r.currentSrc||r.src,e.alt=(o=r.getAttribute("alt"))!==null&&o!==void 0?o:""}(i.dataset.pswpCropped||i.dataset.cropped)&&(e.thumbCropped=!0)}return this.applyFilters("domItemData",e,t,i)}lazyLoadData(t,e){return Us(t,this,e)}},Dt=class extends Te{constructor(t){super(),this.options=t||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){ft(this.options.gallery,this.options.gallerySelector).forEach(t=>{t.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(t){if(Rl(t)||window.pswp)return;let e={x:t.clientX,y:t.clientY};!e.x&&!e.y&&(e=null);let i=this.getClickedIndex(t);i=this.applyFilters("clickedIndex",i,t,this);let o={gallery:t.currentTarget};i>=0&&(t.preventDefault(),this.loadAndOpen(i,o,e))}getClickedIndex(t){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,t);let e=t.target,o=ft(this.options.children,this.options.childSelector,t.currentTarget).findIndex(r=>r===e||r.contains(e));return o!==-1?o:this.options.children||this.options.childSelector?-1:0}loadAndOpen(t,e,i){if(window.pswp||!this.options)return!1;if(!e&&this.options.gallery&&this.options.children){let o=ft(this.options.gallery);o[0]&&(e={gallery:o[0]})}return this.options.index=t,this.options.initialPointerPos=i,this.shouldOpen=!0,this.preload(t,e),!0}preload(t,e){let{options:i}=this;e&&(i.dataSource=e);let o=[],r=typeof i.pswpModule;if(zl(i.pswpModule))o.push(Promise.resolve(i.pswpModule));else{if(r==="string")throw new Error("pswpModule as string is no longer supported");if(r==="function")o.push(i.pswpModule());else throw new Error("pswpModule is not valid")}typeof i.openPromise=="function"&&o.push(i.openPromise()),i.preloadFirstSlide!==!1&&t>=0&&(this._preloadedContent=Ml(t,this));let n=++this._uid;Promise.all(o).then(a=>{if(this.shouldOpen){let l=a[0];this._openPhotoswipe(l,n)}})}_openPhotoswipe(t,e){if(e!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;let i=typeof t=="object"?new t.default(this.options):new t(this.options);this.pswp=i,window.pswp=i,Object.keys(this._listeners).forEach(o=>{var r;(r=this._listeners[o])===null||r===void 0||r.forEach(n=>{i.on(o,n)})}),Object.keys(this._filters).forEach(o=>{var r;(r=this._filters[o])===null||r===void 0||r.forEach(n=>{i.addFilter(o,n.fn,n.priority)})}),this._preloadedContent&&(i.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),i.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),i.init()}destroy(){var t;(t=this.pswp)===null||t===void 0||t.destroy(),this.shouldOpen=!1,this._listeners={},ft(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.removeEventListener("click",this.onThumbnailsClick,!1)})}};function Vs(s,t){let e=s.createElement("div");return e.innerHTML='<svg viewBox="0 0 100 100"><use xlink:href="#'+t+'"></use></svg>',e.querySelector("svg")}function Qs(s,t){let e=Number(s.enlargedWidth)/Number(s.enlargedHeight);return t&&(t.min&&e<t.min?e=t.min:t.max&&e>t.max&&(e=t.max)),e}function Ft(s,t){let e=Number(s.enlargedWidth)/Number(s.enlargedHeight),i=!1;return t&&(t.min&&e<t.min?(e=t.min,i=!0):t.max&&e>t.max&&(e=t.max,i=!0)),{ratio:e,cropped:i}}function Js(s){return s?s.replace(/<(?!\s*br\s*\/?)[^>]*>/gi,""):""}var Mt=class{constructor(t,e,i){this.document=t;this.options=e;this.model=i;this._cropped=!0;this._selected=!1;this.label=null;this.title=Js(i.title)}init(){var c,u;let t=!1,e=["always","hover"];this.title&&this.options.showLabels&&e.includes(this.options.showLabels)&&(t=!0);let i=this.document.createElement("figure");i.classList.add("figure"),i.setAttribute("role","group");let o=this.document.createElement("img"),r=!!this.model.title,n=!!this.model.caption,a="";r&&(a=(c=this.model.title)!=null?c:""),o.alt=a,o.classList.add("image");let l=o,d=o,p=this.getLinkElement();if(p&&(p.appendChild(o),l=p,d=p),this.options.lightbox&&(d.classList.add("zoomable"),d.tagName.toLowerCase()!=="a"&&(d.tabIndex=0),d.addEventListener("click",()=>{let h=new CustomEvent("zoom",{detail:this});this._element.dispatchEvent(h)}),d.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),d.click())})),this.options.activable&&(d.classList.add("activable"),d.tagName.toLowerCase()!=="a"&&(d.tabIndex=0,d.setAttribute("role","button"),d.setAttribute("aria-label",this.title)),d.addEventListener("click",h=>{let m={item:this,clickEvent:h},x=new CustomEvent("activate",{detail:m});this._element.dispatchEvent(x)}),d.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),d.click())})),i.appendChild(l),r&&n){let h=this.document.createElement("figcaption");h.textContent=(u=this.model.caption)!=null?u:null,h.classList.add("caption"),i.appendChild(h)}if(t&&(this.label=this.document.createElement("div"),this.label.innerHTML=this.title,this.label.classList.add("title"),this.options.showLabels==="hover"&&this.label.classList.add("hover"),p?p.appendChild(this.label):i.appendChild(this.label)),this.options.selectable){this.model.selected&&this.select(),this._selectBtn=this.document.createElement("button"),this._selectBtn.classList.add("selectBtn"),this._selectBtn.setAttribute("aria-pressed",String(this._selected)),this._selectBtn.setAttribute("aria-label","Select image"),this._selectBtn.type="button";let h=this.document.createElement("div");h.classList.add("marker"),this._selectBtn.appendChild(h),this._selectBtn.addEventListener("click",m=>{m.stopPropagation(),this.toggleSelect(),this._selectBtn.setAttribute("aria-pressed",String(this._selected));let x=new CustomEvent("select",{detail:this});this._element.dispatchEvent(x)}),i.appendChild(this._selectBtn)}return this.model.color&&(i.style.backgroundColor=this.model.color+"11"),this._element=i,this._image=o,this.style(),i}setLabelHover(t){var e,i;t?(this.options.showLabels="hover",(e=this.label)==null||e.classList.add("hover")):(this.options.showLabels="always",(i=this.label)==null||i.classList.remove("hover"))}style(){this._element&&(this._element.style.width=this.width+"px",this._element.style.height=this.height+"px",this._element.style.marginBottom=this.options.gap+"px",this.last?this._element.style.marginRight="0":this._element.style.marginRight=this.options.gap+"px")}loadImage(){this._image.setAttribute("src",this.model.thumbnailSrc);let t=this.model.title||"";this._image.setAttribute("alt",t),this._image.addEventListener("load",()=>{this._element.classList.add("loaded")}),this._image.addEventListener("error",()=>{this._element.classList.add("errored")})}toggleSelect(){this._selected?this.unselect():this.select()}select(){this._selected=!0,this._element.classList.add("selected")}unselect(){this._selected=!1,this._element.classList.remove("selected")}getLinkElement(){if(this.model.link){let t=this.document.createElement("a");return t.setAttribute("href",this.model.link),t.classList.add("link"),this.model.linkTarget&&t.setAttribute("target",this.model.linkTarget),t}return null}remove(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)}get last(){return this._last}set last(t){this._last=t}get row(){return this._row}set row(t){this._row=t}get height(){return this._height}set height(t){this._height=t}get width(){return this._width}set width(t){this._width=t}get cropped(){return this._cropped}set cropped(t){this._cropped=t}get enlargedWidth(){return this.model.enlargedWidth}get enlargedHeight(){return this.model.enlargedHeight}get selected(){return this._selected}get element(){return this._element}};var tt=class{constructor(t,e,i){this.elementRef=t;this.scrollElementRef=i;this.options={gap:3,rowsPerPage:0,showLabels:"hover",lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:{loop:!1},photoSwipePluginsInitFn:null,ssr:{galleryWidth:480}};this.bodyElementRef=null;this.scrollBufferedItems=[];this.requiredItems=0;this.old_scroll_top=0;this.requestedIndexesLog=[];this.nextButton=null;this.psLightbox=null;this._collection=[];this._domCollection=[];this.document=this.elementRef.ownerDocument,this.options=Jt(e,this.options),this.flushBufferedItems=H(()=>{if(this.scrollBufferedItems.forEach(o=>{o.loadImage(),this.dispatchEvent("item-displayed",o.model)}),this.scrollBufferedItems=[],!!this.requiredItems&&this.requestedIndexesLog.indexOf(this.collection.length)<0){let o=this.collection.length;this.dispatchEvent("pagination",{offset:o,limit:this.requiredItems}),this.requestedIndexesLog.push(o),this.requiredItems=0}},500,{leading:!1,trailing:!0})}get photoSwipe(){return this.psLightbox}get photoSwipeCurrentItem(){var t,e,i;return((i=this.collection[((e=(t=this.psLightbox)==null?void 0:t.pswp)==null?void 0:e.currIndex)||0])==null?void 0:i.model)||null}get collection(){return this._collection}get domCollection(){return this._domCollection}get selectedItems(){return this.domCollection.filter(t=>t.selected).map(t=>t.model)}get width(){var t,e,i;return Math.floor((i=(e=(t=this.elementRef).getBoundingClientRect)==null?void 0:e.call(t).width)!=null?i:this.options.ssr.galleryWidth)}get collectionLength(){return this.collection.length}get domCollectionLength(){return this.domCollection.length}init(){var r;this.elementRef.classList.add("natural-gallery-js"),this.nextButton=this.document.createElement("div"),this.nextButton.classList.add("natural-gallery-next"),this.nextButton.appendChild(Vs(this.document,"natural-gallery-icon-next")),this.nextButton.style.display="none",this.nextButton.addEventListener("click",n=>{n.preventDefault(),this.onPageAdd()}),this.bodyElementRef=this.document.createElement("div"),this.bodyElementRef.classList.add("natural-gallery-body"),this.extendToFreeViewport();let t=this.document.createElement("iframe");this.elementRef.appendChild(t);let e=500,i=H(()=>this.startResize(),e,{leading:!0,trailing:!1}),o=H(()=>this.endResize(),e,{leading:!1,trailing:!0});(r=t.contentWindow)==null||r.addEventListener("resize",()=>{o(),i()}),this.elementRef.appendChild(this.bodyElementRef),this.elementRef.appendChild(this.nextButton),this.options.rowsPerPage||this.bindScroll(this.scrollElementRef||this.document),this.initItems(),this.options.lightbox&&this.photoSwipeInit()}photoSwipeInit(){this.psLightbox=new Dt(De(st({},this.options.photoSwipeOptions),{pswpModule:Rt})),this.psLightbox.addFilter("numItems",()=>this.domCollection.length),this.psLightbox.addFilter("itemData",(t,e)=>{let i=this.collection[e];return{id:e,src:i.model.enlargedSrc,w:i.model.enlargedWidth,h:i.model.enlargedHeight,msrc:i.model.thumbnailSrc,element:i.element,thumbCropped:i.cropped,alt:i.model.caption||""}}),this.options.photoSwipePluginsInitFn&&this.options.photoSwipePluginsInitFn(this.psLightbox),this.psLightbox.init(),this.psLightbox.on("change",()=>{var t;(t=this.psLightbox)!=null&&t.pswp&&this.psLightbox.pswp.currIndex>this.domCollection.length-10&&this.onPageAdd()})}addItemToPhotoSwipeCollection(t){let e=this.domCollection.length-1;t.element.addEventListener("zoom",()=>{var i;(i=this.psLightbox)==null||i.loadAndOpen(e)})}addItems(t){if(!(t.constructor===Array&&t.length))return;let e=this.collection.length===this.domCollection.length,i=this.collection.length;t.forEach(o=>{let r=jt(this.options,["lightbox","selectable","activable","gap","showLabels"]),n=new Mt(this.document,r,o);this._collection.push(n)}),e&&i===0&&this.bodyElementRef?this.onPageAdd():e&&i>0&&this.bodyElementRef&&this.onScroll()}setLabelHover(t){this.options.showLabels=t?"hover":"always",this.collection.forEach(e=>{e.setLabelHover(t)})}selectVisibleItems(){return this.domCollection.forEach(t=>t.select()),this.selectedItems}unselectAllItems(){this.domCollection.forEach(t=>t.unselect())}addEventListener(t,e,i){this.elementRef.addEventListener(t,e,i),t==="pagination"&&this.bodyElementRef&&this.requestItems()}clear(){this.empty(),this.requestItems()}getOptions(){return this.options}setItems(t){this.empty(),this.addItems(t)}initItems(){if(!this.collection.length){this.requestItems();return}let t=this.getEstimatedRowsPerPage(),e=this.getEstimatedColumnsPerRow(),i=t*e,o=this.collection.slice(0,i);this.organizeItems(o,0,t),o.forEach(a=>this.addItemToDOM(a)),this.scrollBufferedItems=o;let r=this.collection.slice(this.domCollection.length),n=r.length-i;this.requiredItems=Math.min(n,r.length,0),this.flushBufferedItems(),this.updateNextButtonVisibility()}requestItems(){let e=this.getEstimatedColumnsPerRow()*this.getRowsPerPage()+1;this.dispatchEvent("pagination",{offset:this.collection.length,limit:e})}getRowsPerPage(){if(this.options.rowsPerPage>0)return this.options.rowsPerPage;let t=this.getEstimatedRowsPerPage();return t<this.options.minRowsAtStart?this.options.minRowsAtStart:t}addItemToDOM(t,e=this.bodyElementRef){if(!e)throw new Error("Gallery not initialized");this.domCollection.push(t),e.appendChild(t.init()),this.scrollBufferedItems.push(t),this.requiredItems++,this.dispatchEvent("item-added-to-dom",t.model),t.element.addEventListener("select",()=>{this.dispatchEvent("select",this.domCollection.filter(i=>i.selected).map(i=>i.model))}),t.element.addEventListener("activate",i=>{this.dispatchEvent("activate",{model:i.detail.item.model,clickEvent:i.detail.clickEvent})}),this.options.lightbox&&this.addItemToPhotoSwipeCollection(t)}updateNextButtonVisibility(){this.nextButton&&(this.domCollection.length===this.collection.length?this.nextButton.style.display="none":this.nextButton.style.display="block")}extendToFreeViewport(){this.options.rowsPerPage||(this.elementRef.style.minHeight=this.getGalleryVisibleHeight()+10+"px")}getGalleryVisibleHeight(){return this.document.defaultView?this.document.defaultView.innerHeight-this.elementRef.offsetTop:0}startResize(){var t;(t=this.bodyElementRef)==null||t.classList.add("resizing")}endResize(){var t;(t=this.bodyElementRef)==null||t.classList.remove("resizing")}dispatchEvent(t,e){let i=new CustomEvent(t,{detail:e});this.elementRef.dispatchEvent(i)}empty(){this.bodyElementRef&&(this.bodyElementRef.innerHTML=""),this.requestedIndexesLog.length=0,this._domCollection=[],this._collection=[]}bindScroll(t){let e=t,i=t instanceof Document?t.documentElement:t,o=H(()=>this.elementRef.classList.add("scrolling"),300,{leading:!0,trailing:!1}),r=H(()=>this.elementRef.classList.remove("scrolling"),300,{leading:!1,trailing:!0});e.addEventListener("scroll",()=>{o(),r();let n=this.elementRef.offsetTop+this.elementRef.offsetHeight+this.options.infiniteScrollOffset,a=i.scrollTop-(i.clientTop||0),l=i.clientHeight,d=a-this.old_scroll_top;this.old_scroll_top=a,d>0&&a+l>=n&&this.onScroll()})}};var et=class extends tt{onScroll(){this.addRows(1)}onPageAdd(){this.addRows(this.getRowsPerPage())}addRows(t){let e=this.domCollection.length,i=this.domCollection.length?this.domCollection[e-1].row+1:0,o=i+t-1,r=this.collection.slice(e);this.organizeItems(r,i,o),r.filter(a=>a.row<=o).forEach(a=>this.addItemToDOM(a)),this.flushBufferedItems(),this.updateNextButtonVisibility()}endResize(){super.endResize(),this.domCollection.length&&this.organizeItems(this.domCollection)}};var Pe=class s extends et{constructor(t,e,i){if(super(t,e,i),!e.rowHeight||e.rowHeight<=0)throw new Error("Option.rowHeight must be positive")}static organizeItems(t,e,i=0,o=null,r=null){r||(r=i||0);let n=t.options;for(let a=1;a<=e.length;a++){let l=e.slice(0,a);if(this.getRowWidth(l.map(p=>p.model),n.rowHeight,n.gap,n.ratioLimit)>=t.width){this.computeSizes(l,t.width,n.gap,r,null,n.ratioLimit);let p=r+1;(o===null||p<=o)&&s.organizeItems(t,e.slice(a),i,o,p);break}else if(a===e.length){this.computeSizes(l,null,n.gap,r,n.rowHeight,n.ratioLimit);break}}}static computeSizes(t,e,i,o,r=null,n){let a=t.map(h=>h.model),l=e?this.getRowHeight(a,e,i,n):r!=null?r:0,p=(this.getRowWidth(a,l,i,n)-(e!=null?e:0))/t.length,c=e?p:0,u=0;for(let h=0;h<t.length;h++){let m=t[h],{ratio:x,cropped:N}=Ft(m.model,n),T=x*l-c;u+=T-Math.floor(T),T=Math.floor(T),(u>=1||h===t.length-1&&Math.round(u)===1)&&(T++,u--),m.width=T,m.height=Math.floor(l),m.cropped=N,m.row=o,m.last=h===t.length-1,m.style()}}static getRowWidth(t,e,i,o){return i*(t.length-1)+this.getRatios(t,o)*e}static getRowHeight(t,e,i,o){return(e-i*(t.length-1))/this.getRatios(t,o)}static getRatios(t,e){return t.reduce((i,o)=>i+Qs(o,e),0)}addRows(t){this.completeLastRow(),super.addRows(t)}organizeItems(t,e,i){s.organizeItems(this,t,e,i)}endResize(){super.endResize(),this.completeLastRow(),this.flushBufferedItems()}getEstimatedColumnsPerRow(){let t=1;return this.options.ratioLimit&&this.options.ratioLimit.min&&(t=this.options.ratioLimit.min),Math.ceil((1/t*this.width+this.options.gap)/(this.options.rowHeight+this.options.gap))}getEstimatedRowsPerPage(){return Math.ceil(this.getGalleryVisibleHeight()/(this.options.rowHeight+this.options.gap))+1}completeLastRow(){if(!this.domCollection.length)return;let t=this.domCollection[this.domCollection.length-1].row,e=this.domCollection.filter(r=>r.row===t).length,i=this.collection.slice(this.domCollection.length-e);this.organizeItems(i,i[0].row,i[0].row),i.slice(e).filter(r=>r.row<=i[0].row).forEach(r=>this.addItemToDOM(r))}};var Gt=class{constructor(t,e){this.options=e;this.collection=[];this._elementRef=t.createElement("div"),this._elementRef.classList.add("column"),this._elementRef.style.marginRight=this.options.gap+"px",this._elementRef.style.width=this.options.width+"px"}addItem(t){this.collection.push(t)}get height(){return this._elementRef.offsetHeight}get length(){return this.collection.length}get elementRef(){return this._elementRef}};var Oe=class s extends tt{constructor(e,i,o){super(e,i,o);this.columns=[];if(!i.columnWidth||i.columnWidth<=0)throw new Error("Option.columnWidth must be positive")}static organizeItems(e,i,o=0,r=null){let n=e.getEstimatedColumnsPerRow(),a=e.getColumnWidth(),l=r?n*(r-o+1):i.length;l=l>i.length?i.length:l;for(let d=0;d<l;d++){let p=i[d],{ratio:c,cropped:u}=Ft(p.model,e.options.ratioLimit);p.last=!0,p.width=Math.floor(a),p.height=p.width/c,p.cropped=u,p.style()}}init(){if(super.init(),!this.options.infiniteScrollOffset){let e=.5;this.options.ratioLimit&&this.options.ratioLimit.min&&(e=this.options.ratioLimit.min);let i=this.getColumnWidth();this.options.infiniteScrollOffset=-1*i/e}}organizeItems(e,i,o){s.organizeItems(this,e,i,o)}initItems(){this.addColumns(),super.initItems()}onScroll(){this.addUntilFill()}onPageAdd(){this.addUntilFill()}getEstimatedColumnsPerRow(){return Math.ceil((this.width-this.options.gap)/(this.options.columnWidth+this.options.gap))}getEstimatedRowsPerPage(){let e=1.75;this.options.ratioLimit&&this.options.ratioLimit.max&&(e=this.options.ratioLimit.max);let o=this.getColumnWidth()/e;return Math.ceil(this.getGalleryVisibleHeight()/o)}addUntilFill(){do this.addItemsToDom(1);while(this.viewPortIsNotFilled()&&this.domCollection.length<this.collection.length)}addItemToDOM(e){let i=this.getShortestColumn();i.addItem(e),super.addItemToDOM(e,i.elementRef)}endResize(){super.endResize(),this.domCollection.length&&(this.domCollection.length=0,this.addColumns(),this.addUntilFill())}addColumns(){if(!this.bodyElementRef)throw new Error("Gallery not initialized");this.bodyElementRef.innerHTML="",this.columns=[];let e=this.getColumnWidth();for(let i=0;i<this.getEstimatedColumnsPerRow();i++){let o=new Gt(this.document,{width:e,gap:this.options.gap});this.columns.push(o),this.bodyElementRef.appendChild(o.elementRef)}}empty(){super.empty(),this.addColumns()}viewPortIsNotFilled(){return this.columns.some(e=>e.elementRef.getBoundingClientRect().bottom<this.document.documentElement.clientHeight)}addItemsToDom(e){let i=this.domCollection.length,o=this.domCollection.length?i:0,r=o+e-1;this.organizeItems(this.collection.slice(i),o,r);for(let n=i;n<this.collection.length;n++){let a=this.collection[n];if(n<=r)this.addItemToDOM(a);else break}this.flushBufferedItems(),this.updateNextButtonVisibility()}getColumnWidth(){let e=this.getEstimatedColumnsPerRow();return Math.floor((this.width-(e-1)*this.options.gap)/e)}getShortestColumn(){return this.columns.reduce((e,i)=>e?i.height<e.height?i:e:i)}};var Ee=class s extends et{constructor(t,e,i){if(super(t,e,i),!e.itemsPerRow||e.itemsPerRow<=0)throw new Error("Option.itemsPerRow must be positive")}static organizeItems(t,e,i=0,o=null){let r=t.getItemSideSize(),n=o?t.options.itemsPerRow*(o-i+1):e.length;n=n>e.length?e.length:n;for(let a=0;a<n;a++){let l=e[a];l.width=Math.floor(r),l.height=Math.floor(r),l.cropped=!0,l.last=a%t.options.itemsPerRow===t.options.itemsPerRow-1,l.row=Math.floor(a/t.options.itemsPerRow)+i,l.style()}}getEstimatedColumnsPerRow(){return this.options.itemsPerRow}getEstimatedRowsPerPage(){return Math.ceil(this.getGalleryVisibleHeight()/this.getItemSideSize())}getItemSideSize(){let t=this.getEstimatedColumnsPerRow();return(this.width-(t-1)*this.options.gap)/t}organizeItems(t,e,i){s.organizeItems(this,t,e,i)}};export{Oe as Masonry,Pe as Natural,Ee as Square};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

photoswipe/dist/photoswipe.esm.js:
  (*!
    * PhotoSwipe 5.4.4 - https://photoswipe.com
    * (c) 2024 Dmytro Semenov
    *)

photoswipe/dist/photoswipe-lightbox.esm.js:
  (*!
    * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
    * (c) 2024 Dmytro Semenov
    *)
*/
//# sourceMappingURL=natural-gallery.js.map